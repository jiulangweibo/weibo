var STK=function(){var e={},d=[],f=[];e.inc=function(g,c){return !0};e.register=function(l,k){var j=l.split("."),c=e,b=null;while(b=j.shift()){if(j.length){c[b]===undefined&&(c[b]={});c=c[b]}else{if(c[b]===undefined){try{c[b]=k(e);f.push(l)}catch(a){d.push(a)}}}}};e.unregister=function(g){var c=g.split(".");if(c[0]==="core"){return !1}for(var i=0,h=f.length;i<h;i+=1){if(f[i]===g){f[i]=null;f.splice(i,1);return !0}}return !1};e.checkRegister=function(g){for(var c=0,h=f.length;c<h;c+=1){if(f[c]===g){return !0}}return !1};e.regShort=function(a,g){if(e[a]!==undefined){throw"["+a+"] : short : has been register"}e[a]=g};e.IE=/msie/i.test(navigator.userAgent);e.E=function(b){return typeof b=="string"?document.getElementById(b):b};e.C=function(g){var c;g=g.toUpperCase();g=="TEXT"?c=document.createTextNode(""):g=="BUFFER"?c=document.createDocumentFragment():c=document.createElement(g);return c};e.log=function(b){d.push(b)};e.getErrorLogInformationList=function(b){return d.splice(0,b||d.length)};return e}();$Import=STK.inc;STK.register("core.ani.algorithm",function(d){var c={linear:function(g,f,j,i,h){return j*g/i+f},easeincubic:function(g,f,j,i,h){return j*(g/=i)*g*g+f},easeoutcubic:function(g,f,j,i,h){return(g/=i/2)<1?j/2*g*g*g+f:j/2*((g-=2)*g*g+2)+f},easeinoutcubic:function(g,f,j,i,h){h==undefined&&(h=1.70158);return j*(g/=i)*g*((h+1)*g-h)+f},easeinback:function(g,f,j,i,h){h==undefined&&(h=1.70158);return j*(g/=i)*g*((h+1)*g-h)+f},easeoutback:function(g,f,j,i,h){h==undefined&&(h=1.70158);return j*((g=g/i-1)*g*((h+1)*g+h)+1)+f},easeinoutback:function(g,f,j,i,h){h==undefined&&(h=1.70158);return(g/=i/2)<1?j/2*g*g*(((h*=1.525)+1)*g-h)+f:j/2*((g-=2)*g*(((h*=1.525)+1)*g+h)+2)+f}};return{addAlgorithm:function(b,e){if(c[b]){throw"[core.ani.tweenValue] this algorithm :"+b+"already exist"}c[b]=e},compute:function(b,n,m,l,k,j,i){if(typeof c[b]!="function"){throw"[core.ani.tweenValue] this algorithm :"+b+"do not exist"}return c[b](l,n,m,k,j,i)}}});STK.register("core.func.empty",function(){return function(){}});STK.register("core.obj.parseParam",function(b){return function(g,f,j){var i,h={};f=f||{};for(i in g){h[i]=g[i];f[i]!=null&&(j?g.hasOwnProperty[i]&&(h[i]=f[i]):h[i]=f[i])}return h}});STK.register("core.ani.tweenArche",function(b){return function(v,u){var t,s,r,q,p,o,n,m;s={};t=b.core.obj.parseParam({animationType:"linear",distance:1,duration:500,callback:b.core.func.empty,algorithmParams:{},extra:5,delay:25},u);var a=function(){r=+(new Date)-q;if(r<t.duration){p=b.core.ani.algorithm.compute(t.animationType,0,t.distance,r,t.duration,t.extra,t.algorithmParams);v(p);o=setTimeout(a,t.delay)}else{m="stop";t.callback()}};m="stop";s.getStatus=function(){return m};s.play=function(){q=+(new Date);p=null;a();m="play";return s};s.stop=function(){clearTimeout(o);m="stop";return s};s.resume=function(){if(n){q+=+(new Date)-n;a()}return s};s.pause=function(){clearTimeout(o);n=+(new Date);m="pause";return s};s.destroy=function(){clearTimeout(o);n=0;m="stop"};return s}});STK.register("core.dom.getStyle",function(b){return function(a,l){if(!b.IE){l=="float"&&(l="cssFloat");try{var h=document.defaultView.getComputedStyle(a,"")}catch(j){}return a.style[l]||h?h[l]:null}switch(l){case"opacity":var k=100;try{k=a.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(j){try{k=a.filters("alpha").opacity}catch(j){}}return k/100;case"float":l="styleFloat";default:var i=a.currentStyle?a.currentStyle[l]:null;return a.style[l]||i}}});STK.register("core.util.browser",function(v){var u=navigator.userAgent.toLowerCase(),t=window.external||"",s,r,q,p,o,n=function(d){var c=0;return parseFloat(d.replace(/\./g,function(){return c++==1?"":"."}))};try{/windows|win32/i.test(u)?o="windows":/macintosh/i.test(u)?o="macintosh":/rhino/i.test(u)&&(o="rhino");if((r=u.match(/applewebkit\/([^\s]*)/))&&r[1]){s="webkit";p=n(r[1])}else{if((r=u.match(/presto\/([\d.]*)/))&&r[1]){s="presto";p=n(r[1])}else{if(r=u.match(/msie\s([^;]*)/)){s="trident";p=1;(r=u.match(/trident\/([\d.]*)/))&&r[1]&&(p=n(r[1]))}else{if(/gecko/.test(u)){s="gecko";p=1;(r=u.match(/rv:([\d.]*)/))&&r[1]&&(p=n(r[1]))}}}}/world/.test(u)?q="world":/360se/.test(u)?q="360":/maxthon/.test(u)||typeof t.max_version=="number"?q="maxthon":/tencenttraveler\s([\d.]*)/.test(u)?q="tt":/se\s([\d.]*)/.test(u)&&(q="sogou")}catch(m){}var l={OS:o,CORE:s,Version:p,EXTRA:q?q:!1,IE:/msie/.test(u),OPERA:/opera/.test(u),MOZ:/gecko/.test(u)&&!/(compatible|webkit)/.test(u),IE5:/msie 5 /.test(u),IE55:/msie 5.5/.test(u),IE6:/msie 6/.test(u),IE7:/msie 7/.test(u),IE8:/msie 8/.test(u),IE9:/msie 9/.test(u),SAFARI:!/chrome\/([\d.]*)/.test(u)&&/\/([\da-f.]*) safari/.test(u),CHROME:/chrome\/([\d.]*)/.test(u),IPAD:/\(ipad/i.test(u),IPHONE:/\(iphone/i.test(u),ITOUCH:/\(itouch/i.test(u),MOBILE:/mobile/i.test(u)};return l});STK.register("core.dom.cssText",function(h){var g=function(n){var m=0,t=[],s="close",r=!1,q=null,p=function(a){t.push({type:"info",content:n.slice(0,m)});t.push({type:"sign",content:n.slice(m,m+1)});n=n.slice(m+1);m=0};while(n){var o=n.charAt(m);switch(o){case":":if(!r&&s==="close"){t.push({type:"attr",content:n.slice(0,m)});t.push({type:"sign",content:n.slice(m,m+1)});n=n.slice(m+1);m=0;s="open";break}m+=1;break;case";":if(!r){if(s==="open"){t.push({type:"info",content:n.slice(0,m)});t.push({type:"sign",content:n.slice(m,m+1)})}n=n.slice(m+1);m=0;s="close";break}m+=1;break;case'"':case"'":if(r){if(o===q){r=!r;q=null}}else{r=!r;q=o}m+=1;break;case" ":case"!":case",":case"(":case")":p(o);break;case"":t.push({type:"info",content:n.slice(0,m)});n="";m=0;break;default:m+=1}}return t},l=function(m){var f={},p;for(var o=0,n=m.length;o<n;o+=1){if(m[o].type==="attr"){p=m[o].content;f[p]=""}else{if(m[o].type==="sign"&&m[o].content===";"){p=null;continue}if(m[o].type==="sign"&&m[o].content===":"){continue}p!==null;f[p]+=m[o].content}}return f},k={webkit:"-webkit-",presto:"-o-",trident:"-ms-",gecko:"-moz-"}[h.core.util.browser.CORE],j=["transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function"],i=function(e){for(var d=0,f=j.length;d<f;d+=1){if(e===j[d]){return !0}}return !1};return function(b){var f=l(g(b||"")),d=function(m,e){m=m.toLowerCase();f[m]=e;i(m)&&(f[k+m]=e);return c},c={push:d,remove:function(e){e=e.toLowerCase();f[e]&&delete f[e];i(e)&&f[k+e]&&delete f[k+e];return c},merge:function(m){var o=l(g(m||""));for(var n in o){d(n,o[n])}},getCss:function(){var m=[];for(var e in f){m.push(e+":"+f[e])}return m.join(";")}};return c}});STK.register("core.func.getType",function(b){return function(d){var c;return((c=typeof d)=="object"?d==null&&"null"||Object.prototype.toString.call(d).slice(8,-1):c).toLowerCase()}});STK.register("core.arr.isArray",function(b){return function(c){return Object.prototype.toString.call(c)==="[object Array]"}});STK.register("core.arr.foreach",function(e){var d=function(h,g){var l=[];for(var k=0,j=h.length;k<j;k+=1){var i=g(h[k],k);if(i===!1){break}i!==null&&(l[k]=i)}return l},f=function(h,g){var k={};for(var j in h){var i=g(h[j],j);if(i===!1){break}i!==null&&(k[j]=i)}return k};return function(b,a){if(e.core.arr.isArray(b)||b.length&&b[0]!==undefined){return d(b,a)}if(typeof b=="object"){return f(b,a)}return null}});STK.register("core.arr.indexOf",function(b){return function(f,e){if(e.indexOf){return e.indexOf(f)}for(var h=0,g=e.length;h<g;h++){if(e[h]===f){return h}}return -1}});STK.register("core.arr.inArray",function(b){return function(a,d){return b.core.arr.indexOf(a,d)>-1}});STK.register("core.dom.isNode",function(b){return function(c){return c!=undefined&&Boolean(c.nodeName)&&Boolean(c.nodeType)}});STK.register("core.json.merge",function(f){var e=function(a){return a===undefined?!0:a===null?!0:f.core.arr.inArray(typeof a,["number","string","function","boolean"])?!0:f.core.dom.isNode(a)?!0:!1},h=function(l,k,j){if(e(j)){l[k]=j}else{if(f.core.arr.isArray(j)){f.core.arr.isArray(l[k])||(l[k]=[]);for(var c=0,b=j.length;c<b;c+=1){h(l[k],c,j[c])}return}if(typeof j=="object"){if(e(l[k])||f.core.arr.isArray(l[k])){l[k]={}}for(var a in j){h(l[k],a,j[a])}return}}},g=function(i,c,l){var k={};if(l){for(var j in i){h(k,j,i[j])}for(var j in c){h(k,j,c[j])}}else{for(var j in i){k[j]=i[j]}for(var j in c){k[j]=c[j]}}return k};return function(a,j,i){var d=f.core.obj.parseParam({isDeep:!1},i);return g(a,j,d.isDeep)}});STK.register("core.util.color",function(i){var h=/^#([a-fA-F0-9]{3,8})$/,n=/^rgb[a]?\s*\((\s*([0-9]{1,3})\s*,){2,3}(\s*([0-9]{1,3})\s*)\)$/,m=/([0-9]{1,3})/ig,l=/([a-fA-F0-9]{2})/ig,k=i.core.arr.foreach,j=function(b){var d=[],c=[];if(h.test(b)){c=b.match(h);c[1].length<=4?d=k(c[1].split(""),function(f,e){return parseInt(f+f,16)}):c[1].length<=8&&(d=k(c[1].match(l),function(f,e){return parseInt(f,16)}));return d}if(n.test(b)){c=b.match(m);d=k(c,function(f,e){return parseInt(f,10)});return d}return !1};return function(f,e){var o=j(f);if(!o){return !1}var g={};g.getR=function(){return o[0]};g.getG=function(){return o[1]};g.getB=function(){return o[2]};g.getA=function(){return o[3]};return g}});STK.register("core.ani.tween",function(x){var w=x.core.ani.tweenArche,v=x.core.arr.foreach,u=x.core.dom.getStyle,t=x.core.func.getType,s=x.core.obj.parseParam,r=x.core.json.merge,q=x.core.util.color,p=function(e){var d=/(-?\d\.?\d*)([a-z%]*)/i.exec(e),f=[0,"px"];if(d){d[1]&&(f[0]=d[1]-0);d[2]&&(f[1]=d[2])}return f},o=function(i){for(var h=0,z=i.length;h<z;h+=1){var y=i.charCodeAt(h);if(y>64&&y<90){var l=i.substr(0,h),k=i.substr(h,1),j=i.slice(h+1);return l+"-"+k.toLowerCase()+j}}return i},n=function(h,d,B){var A=u(h,B);if(t(A)==="undefined"||A==="auto"){B==="height"&&(A=h.offsetHeight);B==="width"&&(A=h.offsetWidth)}var z={start:A,end:d,unit:"",key:B,defaultColor:!1};if(t(d)==="number"){var y=[0,"px"];t(A)==="number"?y[0]=A:y=p(A);z.start=y[0];z.unit=y[1]}if(t(d)==="string"){var i,e;i=q(d);if(i){e=q(A);e||(e=q("#fff"));z.start=e;z.end=i;z.defaultColor=!0}}h=null;return z},m={opacity:function(g,f,j,i){var h=g*(j-f)+f;return{filter:"alpha(opacity="+h*100+")",opacity:Math.max(Math.min(1,h),0),zoom:"1"}},defaultColor:function(D,C,B,A,z){var y=Math.max(0,Math.min(255,Math.ceil(D*(B.getR()-C.getR())+C.getR()))),l=Math.max(0,Math.min(255,Math.ceil(D*(B.getG()-C.getG())+C.getG()))),k=Math.max(0,Math.min(255,Math.ceil(D*(B.getB()-C.getB())+C.getB()))),j={};j[o(z)]="#"+(y<16?"0":"")+y.toString(16)+(l<16?"0":"")+l.toString(16)+(k<16?"0":"")+k.toString(16);return j},"default":function(i,h,z,y,l){var k=i*(z-h)+h,j={};j[o(l)]=k+y;return j}};return function(B,A){var z,y,l,k,g,f,c,b,a,H;A=A||{};y=s({animationType:"linear",duration:500,algorithmParams:{},extra:5,delay:25},A);y.distance=1;var G,F;y.callback=function(){F=A.end||x.core.func.empty;G=A.tween||x.core.func.empty;return function(){k(1);c();F(B)}}();l=r(m,A.propertys||{});f=null;g={};a=[];k=function(h){var d=[],i=v(g,function(j,M){var L;l[M]?L=l[M]:j.defaultColor?L=l.defaultColor:L=l["default"];var K=L(h,j.start,j.end,j.unit,j.key);for(var J in K){f.push(J,K[J])}try{G(h)}catch(I){}});B.style.cssText=f.getCss()};c=function(){var e;while(e=a.shift()){try{e.fn();if(e.type==="play"){break}if(e.type==="destroy"){break}}catch(d){}}};H=w(k,y);var E=function(d){H.getStatus()!=="play"?B=d:a.push({fn:E,type:"setNode"})},D=function(d){if(H.getStatus()!=="play"){g=v(d,function(h,e){return n(B,h,e)});f=x.core.dom.cssText(B.style.cssText+(A.staticStyle||""));H.play()}else{a.push({fn:function(){D(d)},type:"play"})}},C=function(){if(H.getStatus()!=="play"){H.destroy();B=null;z=null;y=null;l=null;k=null;g=null;f=null;c=null;b=null;a=null}else{a.push({fn:C,type:"destroy"})}};z={};z.play=function(d){D(d);return z};z.stop=function(){H.stop();return z};z.pause=function(){H.pause();return z};z.resume=function(){H.resume();return z};z.finish=function(d){D(d);C();return z};z.setNode=function(d){E(d);return z};z.destroy=function(){C();return z};return z}});STK.register("core.dom.hasClassName",function(b){return function(d,c){return(new RegExp("(^|\\s)"+c+"($|\\s)")).test(d.className)}});STK.register("core.str.trim",function(b){return function(f){if(typeof f!="string"){throw"trim need a string as parameter"}var e=f.length,h=0,g=/(\u3000|\s|\t|\u00A0)/;while(h<e){if(!g.test(f.charAt(h))){break}h+=1}while(e>h){if(!g.test(f.charAt(e-1))){break}e-=1}return f.slice(h,e)}});STK.register("core.dom.addClassName",function(b){return function(a,d){a.nodeType===1&&(b.core.dom.hasClassName(a,d)||(a.className=b.core.str.trim(a.className)+" "+d))}});STK.register("core.dom.removeClassName",function(b){return function(a,d){a.nodeType===1&&b.core.dom.hasClassName(a,d)&&(a.className=a.className.replace(new RegExp("(^|\\s)"+d+"($|\\s)")," "))}});STK.register("core.evt.addEvent",function(b){return function(a,f,e){a=b.E(a);if(a==null){return !1}if(typeof e!="function"){return !1}a.addEventListener?a.addEventListener(f,e,!1):a.attachEvent?a.attachEvent("on"+f,e):a["on"+f]=e;return !0}});STK.register("core.evt.removeEvent",function(b){return function(a,f,e){a=b.E(a);if(a==null){return !1}if(typeof e!="function"){return !1}a.removeEventListener?a.removeEventListener(f,e):a.detachEvent&&a.detachEvent("on"+f,e);a["on"+f]=null;return !0}});STK.register("core.ani.transition",function(d){var c=function(){var h=document.createElement("style"),g="STK_transition_"+ +(new Date),l=null,k={};h.setAttribute("type","text/css");h.setAttribute("id",g);document.head.appendChild(h);for(var j=0,i=document.styleSheets.length;j<i;j+=1){if(document.styleSheets[j].ownerNode.id===g){l=document.styleSheets[j];break}}k.getCssSheet=function(){return l};k.addRule=function(f,e){var m=l.rules||l.cssRules;l.addRule?l.addRule(f,e,m.length):l.insertRule&&l.insertRule(f+" {"+e+"}",m.length)};k.destory=function(){document.head.removeChild(h);h=null;l=null;g=null};return k};return function(n,m){var l=d.core.obj.parseParam({target:"",duration:500,timingFn:[0,0,1,1],callback:function(){}},m),k="all "+l.duration+"ms cubic-bezier("+l.timingFn.join(",")+")",j=d.core.dom.cssText(n.style.cssText),b="test",a=c();j.merge(l.target);j.push("transition",k);a.addRule("."+b,j.getCss());d.core.evt.addEvent(n,"transitionend",function(){d.core.evt.removeEvent(n,"transitionend",arguments.callee);n.style.cssText=j.remove("transition").getCss();d.core.dom.removeClassName(n,b);a.destory();k=null;j=null;b=null;a=null;l.callback(n);l=null});d.core.dom.addClassName(n,b);n.style.cssText=""}});STK.register("core.arr.findout",function(b){return function(a,j){if(!b.core.arr.isArray(a)){throw"the findout function needs an array as first parameter"}var i=[];for(var h=0,g=a.length;h<g;h+=1){a[h]===j&&i.push(h)}return i}});STK.register("core.arr.clear",function(b){return function(a){if(!b.core.arr.isArray(a)){throw"the clear function needs an array as first parameter"}var h=[];for(var g=0,f=a.length;g<f;g+=1){b.core.arr.findout([undefined,null,""],a[g]).length||h.push(a[g])}return h}});STK.register("core.arr.copy",function(b){return function(a){if(!b.core.arr.isArray(a)){throw"the copy function needs an array as first parameter"}return a.slice(0)}});STK.register("core.arr.hasby",function(b){return function(a,j){if(!b.core.arr.isArray(a)){throw"the hasBy function needs an array as first parameter"}var i=[];for(var h=0,g=a.length;h<g;h+=1){j(a[h],h)&&i.push(h)}return i}});STK.register("core.arr.unique",function(b){return function(a){if(!b.core.arr.isArray(a)){throw"the unique function needs an array as first parameter"}var h=[];for(var g=0,f=a.length;g<f;g+=1){b.core.arr.indexOf(a[g],h)===-1&&h.push(a[g])}return h}});STK.register("core.dom.addHTML",function(b){return function(a,h){if(b.IE){a.insertAdjacentHTML("BeforeEnd",h)}else{var g=a.ownerDocument.createRange();g.setStartBefore(a);var f=g.createContextualFragment(h);a.appendChild(f)}}});STK.register("core.dom.sizzle",function(H){function s(K,J,I,q,p,o){for(var n=0,m=q.length;n<m;n++){var l=q[n];if(l){l=l[K];var g=!1;while(l){if(l.sizcache===I){g=q[l.sizset];break}if(l.nodeType===1){if(!o){l.sizcache=I;l.sizset=n}if(typeof J!="string"){if(l===J){g=!0;break}}else{if(B.filter(J,[l]).length>0){g=l;break}}}l=l[K]}q[n]=g}}}function t(K,J,I,q,p,o){for(var n=0,m=q.length;n<m;n++){var l=q[n];if(l){l=l[K];var k=!1;while(l){if(l.sizcache===I){k=q[l.sizset];break}if(l.nodeType===1&&!o){l.sizcache=I;l.sizset=n}if(l.nodeName.toLowerCase()===J){k=l;break}l=l[K]}q[n]=k}}}var G=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,F=0,E=Object.prototype.toString,D=!1,C=!0;[0,0].sort(function(){C=!1;return 0});var B=function(M,K,J,I){J=J||[];K=K||document;var q=K;if(K.nodeType!==1&&K.nodeType!==9){return[]}if(!M||typeof M!="string"){return J}var l=[],i,h,g,d,b=!0,R=B.isXML(K),Q=M,P,O,N,L;do{G.exec("");i=G.exec(Q);if(i){Q=i[3];l.push(i[1]);if(i[2]){d=i[3];break}}}while(i);if(l.length>1&&z.exec(M)){if(l.length===2&&A.relative[l[0]]){h=r(l[0]+l[1],K)}else{h=A.relative[l[0]]?[K]:B(l.shift(),K);while(l.length){M=l.shift();A.relative[M]&&(M+=l.shift());h=r(M,h)}}}else{if(!I&&l.length>1&&K.nodeType===9&&!R&&A.match.ID.test(l[0])&&!A.match.ID.test(l[l.length-1])){P=B.find(l.shift(),K,R);K=P.expr?B.filter(P.expr,P.set)[0]:P.set[0]}if(K){P=I?{expr:l.pop(),set:w(I)}:B.find(l.pop(),l.length===1&&(l[0]==="~"||l[0]==="+")&&K.parentNode?K.parentNode:K,R);h=P.expr?B.filter(P.expr,P.set):P.set;l.length>0?g=w(h):b=!1;while(l.length){O=l.pop();N=O;A.relative[O]?N=l.pop():O="";N==null&&(N=K);A.relative[O](g,N,R)}}else{g=l=[]}}g||(g=h);g||B.error(O||M);if(E.call(g)==="[object Array]"){if(!b){J.push.apply(J,g)}else{if(K&&K.nodeType===1){for(L=0;g[L]!=null;L++){g[L]&&(g[L]===!0||g[L].nodeType===1&&B.contains(K,g[L]))&&J.push(h[L])}}else{for(L=0;g[L]!=null;L++){g[L]&&g[L].nodeType===1&&J.push(h[L])}}}}else{w(g,J)}if(d){B(d,q,J,I);B.uniqueSort(J)}return J};B.uniqueSort=function(d){if(u){D=C;d.sort(u);if(D){for(var c=1;c<d.length;c++){d[c]===d[c-1]&&d.splice(c--,1)}}}return d};B.matches=function(d,c){return B(d,null,null,c)};B.find=function(I,q,p){var o;if(!I){return[]}for(var n=0,m=A.order.length;n<m;n++){var l=A.order[n],k;if(k=A.leftMatch[l].exec(I)){var h=k[1];k.splice(1,1);if(h.substr(h.length-1)!=="\\"){k[1]=(k[1]||"").replace(/\\/g,"");o=A.find[l](k,q,p);if(o!=null){I=I.replace(A.match[l],"");break}}}}o||(o=q.getElementsByTagName("*"));return{set:o,expr:I}};B.filter=function(V,U,T,S){var R=V,Q=[],P=U,O,N,M=U&&U[0]&&B.isXML(U[0]);while(V&&U.length){for(var L in A.filter){if((O=A.leftMatch[L].exec(V))!=null&&O[2]){var K=A.filter[L],J,I,h=O[1];N=!1;O.splice(1,1);if(h.substr(h.length-1)==="\\"){continue}P===Q&&(Q=[]);if(A.preFilter[L]){O=A.preFilter[L](O,P,T,Q,S,M);if(!O){N=J=!0}else{if(O===!0){continue}}}if(O){for(var g=0;(I=P[g])!=null;g++){if(I){J=K(I,O,g,P);var W=S^!!J;if(T&&J!=null){W?N=!0:P[g]=!1}else{if(W){Q.push(I);N=!0}}}}}if(J!==undefined){T||(P=Q);V=V.replace(A.match[L],"");if(!N){return[]}break}}}if(V===R){if(N==null){B.error(V)}else{break}}R=V}return P};B.error=function(b){throw"Syntax error, unrecognized expression: "+b};var A={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(b){return b.getAttribute("href")}},relative:{"+":function(j,g){var p=typeof g=="string",o=p&&!/\W/.test(g),n=p&&!o;o&&(g=g.toLowerCase());for(var m=0,l=j.length,k;m<l;m++){if(k=j[m]){while((k=k.previousSibling)&&k.nodeType!==1){}j[m]=n||k&&k.nodeName.toLowerCase()===g?k||!1:k===g}}n&&B.filter(g,j,!0)},">":function(i,g){var n=typeof g=="string",m,l=0,k=i.length;if(n&&!/\W/.test(g)){g=g.toLowerCase();for(;l<k;l++){m=i[l];if(m){var j=m.parentNode;i[l]=j.nodeName.toLowerCase()===g?j:!1}}}else{for(;l<k;l++){m=i[l];m&&(i[l]=n?m.parentNode:m.parentNode===g)}n&&B.filter(g,i,!0)}},"":function(h,c,l){var k=F++,j=s,i;if(typeof c=="string"&&!/\W/.test(c)){c=c.toLowerCase();i=c;j=t}j("parentNode",c,k,h,i,l)},"~":function(h,c,l){var k=F++,j=s,i;if(typeof c=="string"&&!/\W/.test(c)){c=c.toLowerCase();i=c;j=t}j("previousSibling",c,k,h,i,l)}},find:{ID:function(f,e,h){if(typeof e.getElementById!="undefined"&&!h){var g=e.getElementById(f[1]);return g?[g]:[]}},NAME:function(h,g){if(typeof g.getElementsByName!="undefined"){var l=[],k=g.getElementsByName(h[1]);for(var j=0,i=k.length;j<i;j++){k[j].getAttribute("name")===h[1]&&l.push(k[j])}return l.length===0?null:l}},TAG:function(d,c){return c.getElementsByTagName(d[1])}},preFilter:{CLASS:function(j,i,p,o,n,m){j=" "+j[1].replace(/\\/g,"")+" ";if(m){return j}for(var l=0,k;(k=i[l])!=null;l++){k&&(n^(k.className&&(" "+k.className+" ").replace(/[\t\n]/g," ").indexOf(j)>=0)?p||o.push(k):p&&(i[l]=!1))}return !1},ID:function(b){return b[1].replace(/\\/g,"")},TAG:function(d,c){return d[1].toLowerCase()},CHILD:function(d){if(d[1]==="nth"){var c=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(d[2]==="even"&&"2n"||d[2]==="odd"&&"2n+1"||!/\D/.test(d[2])&&"0n+"+d[2]||d[2]);d[2]=c[1]+(c[2]||1)-0;d[3]=c[3]-0}d[0]=F++;return d},ATTR:function(i,h,n,m,l,k){var j=i[1].replace(/\\/g,"");!k&&A.attrMap[j]&&(i[1]=A.attrMap[j]);i[2]==="~="&&(i[4]=" "+i[4]+" ");return i},PSEUDO:function(b,l,k,j,h){if(b[1]==="not"){if((G.exec(b[3])||"").length>1||/^\w/.test(b[3])){b[3]=B(b[3],null,null,l)}else{var g=B.filter(b[3],l,k,!0^h);k||j.push.apply(j,g);return !1}}else{if(A.match.POS.test(b[0])||A.match.CHILD.test(b[0])){return !0}}return b},POS:function(b){b.unshift(!0);return b}},filters:{enabled:function(b){return b.disabled===!1&&b.type!=="hidden"},disabled:function(b){return b.disabled===!0},checked:function(b){return b.checked===!0},selected:function(b){b.parentNode.selectedIndex;return b.selected===!0},parent:function(b){return !!b.firstChild},empty:function(b){return !b.firstChild},has:function(e,d,f){return !!B(f[3],e).length},header:function(b){return/h\d/i.test(b.nodeName)},text:function(b){return"text"===b.type},radio:function(b){return"radio"===b.type},checkbox:function(b){return"checkbox"===b.type},file:function(b){return"file"===b.type},password:function(b){return"password"===b.type},submit:function(b){return"submit"===b.type},image:function(b){return"image"===b.type},reset:function(b){return"reset"===b.type},button:function(b){return"button"===b.type||b.nodeName.toLowerCase()==="button"},input:function(b){return/input|select|textarea|button/i.test(b.nodeName)}},setFilters:{first:function(d,c){return c===0},last:function(f,e,h,g){return e===g.length-1},even:function(d,c){return c%2===0},odd:function(d,c){return c%2===1},lt:function(e,d,f){return d<f[3]-0},gt:function(e,d,f){return d>f[3]-0},nth:function(e,d,f){return f[3]-0===d},eq:function(e,d,f){return f[3]-0===d}},filter:{PSEUDO:function(I,q,p,o){var n=q[1],m=A.filters[n];if(m){return m(I,p,q,o)}if(n==="contains"){return(I.textContent||I.innerText||B.getText([I])||"").indexOf(q[3])>=0}if(n==="not"){var l=q[3];for(var h=0,g=l.length;h<g;h++){if(l[h]===I){return !1}}return !0}B.error("Syntax error, unrecognized expression: "+n)},CHILD:function(K,J){var I=J[1],q=K;switch(I){case"only":case"first":while(q=q.previousSibling){if(q.nodeType===1){return !1}}if(I==="first"){return !0}q=K;case"last":while(q=q.nextSibling){if(q.nodeType===1){return !1}}return !0;case"nth":var p=J[2],o=J[3];if(p===1&&o===0){return !0}var n=J[0],m=K.parentNode;if(m&&(m.sizcache!==n||!K.nodeIndex)){var l=0;for(q=m.firstChild;q;q=q.nextSibling){q.nodeType===1&&(q.nodeIndex=++l)}m.sizcache=n}var k=K.nodeIndex-o;return p===0?k===0:k%p===0&&k/p>=0}},ID:function(d,c){return d.nodeType===1&&d.getAttribute("id")===c},TAG:function(d,c){return c==="*"&&d.nodeType===1||d.nodeName.toLowerCase()===c},CLASS:function(d,c){return(" "+(d.className||d.getAttribute("class"))+" ").indexOf(c)>-1},ATTR:function(i,h){var n=h[1],m=A.attrHandle[n]?A.attrHandle[n](i):i[n]!=null?i[n]:i.getAttribute(n),l=m+"",k=h[2],j=h[4];return m==null?k==="!=":k==="="?l===j:k==="*="?l.indexOf(j)>=0:k==="~="?(" "+l+" ").indexOf(j)>=0:j?k==="!="?l!==j:k==="^="?l.indexOf(j)===0:k==="$="?l.substr(l.length-j.length)===j:k==="|="?l===j||l.substr(0,j.length+1)===j+"-":!1:l&&m!==!1},POS:function(h,g,l,k){var j=g[2],i=A.setFilters[j];if(i){return i(h,l,g,k)}}}};B.selectors=A;var z=A.match.POS,y=function(d,c){return"\\"+(c-0+1)};for(var x in A.match){A.match[x]=new RegExp(A.match[x].source+/(?![^\[]*\])(?![^\(]*\))/.source);A.leftMatch[x]=new RegExp(/(^(?:.|\r|\n)*?)/.source+A.match[x].source.replace(/\\(\d+)/g,y))}var w=function(d,c){d=Array.prototype.slice.call(d,0);if(c){c.push.apply(c,d);return c}return d};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(v){w=function(g,d){var j=d||[],i=0;if(E.call(g)==="[object Array]"){Array.prototype.push.apply(j,g)}else{if(typeof g.length=="number"){for(var h=g.length;i<h;i++){j.push(g[i])}}else{for(;g[i];i++){j.push(g[i])}}}return j}}var u;document.documentElement.compareDocumentPosition?u=function(e,d){if(!e.compareDocumentPosition||!d.compareDocumentPosition){e==d&&(D=!0);return e.compareDocumentPosition?-1:1}var f=e.compareDocumentPosition(d)&4?-1:e===d?0:1;f===0&&(D=!0);return f}:"sourceIndex" in document.documentElement?u=function(e,d){if(!e.sourceIndex||!d.sourceIndex){e==d&&(D=!0);return e.sourceIndex?-1:1}var f=e.sourceIndex-d.sourceIndex;f===0&&(D=!0);return f}:document.createRange&&(u=function(g,e){if(!g.ownerDocument||!e.ownerDocument){g==e&&(D=!0);return g.ownerDocument?-1:1}var j=g.ownerDocument.createRange(),i=e.ownerDocument.createRange();j.setStart(g,0);j.setEnd(g,0);i.setStart(e,0);i.setEnd(e,0);var h=j.compareBoundaryPoints(Range.START_TO_END,i);h===0&&(D=!0);return h});B.getText=function(f){var e="",h;for(var g=0;f[g];g++){h=f[g];h.nodeType===3||h.nodeType===4?e+=h.nodeValue:h.nodeType!==8&&(e+=B.getText(h.childNodes))}return e};(function(){var e=document.createElement("div"),d="script"+(new Date).getTime();e.innerHTML="<a name='"+d+"'/>";var f=document.documentElement;f.insertBefore(e,f.firstChild);if(document.getElementById(d)){A.find.ID=function(h,g,j){if(typeof g.getElementById!="undefined"&&!j){var i=g.getElementById(h[1]);return i?i.id===h[1]||typeof i.getAttributeNode!="undefined"&&i.getAttributeNode("id").nodeValue===h[1]?[i]:undefined:[]}};A.filter.ID=function(h,g){var i=typeof h.getAttributeNode!="undefined"&&h.getAttributeNode("id");return h.nodeType===1&&i&&i.nodeValue===g}}f.removeChild(e);f=e=null})();(function(){var b=document.createElement("div");b.appendChild(document.createComment(""));b.getElementsByTagName("*").length>0&&(A.find.TAG=function(g,f){var j=f.getElementsByTagName(g[1]);if(g[1]==="*"){var i=[];for(var h=0;j[h];h++){j[h].nodeType===1&&i.push(j[h])}j=i}return j});b.innerHTML="<a href='#'></a>";b.firstChild&&typeof b.firstChild.getAttribute!="undefined"&&b.firstChild.getAttribute("href")!=="#"&&(A.attrHandle.href=function(c){return c.getAttribute("href",2)});b=null})();document.querySelectorAll&&function(){var e=B,d=document.createElement("div");d.innerHTML="<p class='TEST'></p>";if(!d.querySelectorAll||d.querySelectorAll(".TEST").length!==0){B=function(a,j,i,h){j=j||document;if(!h&&j.nodeType===9&&!B.isXML(j)){try{return w(j.querySelectorAll(a),i)}catch(g){}}return e(a,j,i,h)};for(var f in e){B[f]=e[f]}d=null}}();(function(){var b=document.createElement("div");b.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!b.getElementsByClassName&&b.getElementsByClassName("e").length!==0){b.lastChild.className="e";if(b.getElementsByClassName("e").length===1){return}A.order.splice(1,0,"CLASS");A.find.CLASS=function(e,d,f){if(typeof d.getElementsByClassName!="undefined"&&!f){return d.getElementsByClassName(e[1])}};b=null}})();B.contains=document.compareDocumentPosition?function(d,c){return !!(d.compareDocumentPosition(c)&16)}:function(d,c){return d!==c&&(d.contains?d.contains(c):!0)};B.isXML=function(d){var c=(d?d.ownerDocument||d:0).documentElement;return c?c.nodeName!=="HTML":!1};var r=function(h,g){var p=[],o="",n,m=g.nodeType?[g]:g;while(n=A.match.PSEUDO.exec(h)){o+=n[0];h=h.replace(A.match.PSEUDO,"")}h=A.relative[h]?h+"*":h;for(var l=0,k=m.length;l<k;l++){B(h,m[l],p)}return B.filter(o,p)};return B});STK.register("core.dom.builder",function(b){return function(t,s){var r=typeof t=="string",q=t;if(r){q=b.C("div");q.innerHTML=t}var p,o;o=b.core.dom.sizzle("[node-type]",q);p={};for(var n=0,m=o.length;n<m;n+=1){var l=o[n].getAttribute("node-type");p[l]||(p[l]=[]);p[l].push(o[n])}var a=t;if(r){a=b.C("buffer");while(q.childNodes[0]){a.appendChild(q.childNodes[0])}}return{box:a,list:p}}});STK.register("core.dom.setStyle",function(b){return function(a,f,e){if(b.IE){switch(f){case"opacity":a.style.filter="alpha(opacity="+e*100+")";if(!a.currentStyle||!a.currentStyle.hasLayout){a.style.zoom=1}break;case"float":f="styleFloat";default:a.style[f]=e}}else{f=="float"&&(f="cssFloat");a.style[f]=e}}});STK.register("core.dom.insertAfter",function(b){return function(e,d){var f=d.parentNode;f.lastChild==d?f.appendChild(e):f.insertBefore(e,d.nextSibling)}});STK.register("core.dom.insertBefore",function(b){return function(e,d){var f=d.parentNode;f.insertBefore(e,d)}});STK.register("core.dom.trimNode",function(b){return function(e){var d=e.childNodes;for(var f=d.length;f>=0;f+=1){(d[f].nodeType==3||d[f].nodeType==8)&&e.removeChild(d[f])}}});STK.register("core.dom.removeNode",function(b){return function(a){a=b.E(a)||a;try{a.parentNode.removeChild(a)}catch(d){}}});STK.register("core.evt.fireEvent",function(b){return function(a,h){var g=b.E(a);if(g.addEventListener){var f=document.createEvent("HTMLEvents");f.initEvent(h,!0,!0);g.dispatchEvent(f)}else{g.fireEvent("on"+h)}}});STK.register("core.util.scrollPos",function(b){return function(e){e=e||document;var d=e.documentElement,f=e.body;return{top:Math.max(window.pageYOffset||0,d.scrollTop,f.scrollTop),left:Math.max(window.pageXOffset||0,d.scrollLeft,f.scrollLeft)}}});STK.register("core.dom.position",function(e){var d=function(a){var n,m,l,k,j,i;n=a.getBoundingClientRect();m=e.core.util.scrollPos();l=a.ownerDocument.body;k=a.ownerDocument.documentElement;j=k.clientTop||l.clientTop||0;i=k.clientLeft||l.clientLeft||0;return{l:parseInt(n.left+m.left-i,10)||0,t:parseInt(n.top+m.top-j,10)||0}},f=function(a,i){var h,g;h=[a.offsetLeft,a.offsetTop];g=a.offsetParent;if(g!==a&&g!==i){while(g){h[0]+=g.offsetLeft;h[1]+=g.offsetTop;g=g.offsetParent}}if(e.core.util.browser.OPERA!=-1||e.core.util.browser.SAFARI!=-1&&a.style.position=="absolute"){h[0]-=document.body.offsetLeft;h[1]-=document.body.offsetTop}a.parentNode?g=a.parentNode:g=null;while(g&&!/^body|html$/i.test(g.tagName)&&g!==i){if(g.style.display.search(/^inline|table-row.*$/i)){h[0]-=g.scrollLeft;h[1]-=g.scrollTop}g=g.parentNode}return{l:parseInt(h[0],10),t:parseInt(h[1],10)}};return function(j,i){if(j==document.body){return !1}if(j.parentNode==null){return !1}if(j.style.display=="none"){return !1}var c=e.core.obj.parseParam({parent:null},i);if(j.getBoundingClientRect){if(c.parent){var b=d(j),a=d(c.parent);return{l:b.l-a.l,t:b.t-a.t}}return d(j)}return f(j,c.parent||document.body)}});STK.register("core.dom.setXY",function(b){return function(a,j){var i=b.core.dom.getStyle(a,"position");if(i=="static"){b.core.dom.setStyle(a,"position","relative");i="relative"}var h=b.core.dom.position(a);if(h!=!1){var g={l:parseInt(b.core.dom.getStyle(a,"left"),10),t:parseInt(b.core.dom.getStyle(a,"top"),10)};isNaN(g.l)&&(g.l=i=="relative"?0:a.offsetLeft);isNaN(g.t)&&(g.t=i=="relative"?0:a.offsetTop);j.l!=null&&(a.style.left=j.l-h.l+g.l+"px");j.t!=null&&(a.style.top=j.t-h.t+g.t+"px")}}});STK.register("core.str.encodeHTML",function(b){return function(c){if(typeof c!="string"){throw"encodeHTML need a string as parameter"}return c.replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\'/g,"&#39;").replace(/\u00A0/g,"&nbsp;").replace(/(\u0020|\u000B|\u2028|\u2029|\f)/g,"&#32;")}});STK.register("core.str.decodeHTML",function(b){return function(c){if(typeof c!="string"){throw"decodeHTML need a string as parameter"}return c.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#39;/g,"'").replace(/&nbsp;/g," ").replace(/&#32;/g," ").replace(/&amp;/g,"&")}});STK.register("core.dom.cascadeNode",function(b){return function(a){var h={},g=a.style.display||"";g=g==="none"?"":g;var f=[];h.setStyle=function(d,c){b.core.dom.setStyle(a,d,c);d==="display"&&(g=c==="none"?"":c);return h};h.insertAfter=function(c){b.core.dom.insertAfter(c,a);return h};h.insertBefore=function(c){b.core.dom.insertBefore(c,a);return h};h.addClassName=function(c){b.core.dom.addClassName(a,c);return h};h.removeClassName=function(c){b.core.dom.removeClassName(a,c);return h};h.trimNode=function(){b.core.dom.trimNode(a);return h};h.removeNode=function(){b.core.dom.removeNode(a);return h};h.on=function(j,i){for(var e=0,c=f.length;e<c;e+=1){if(f[e].fn===i&&f[e].type===j){return h}}f.push({fn:i,type:j});b.core.evt.addEvent(a,j,i);return h};h.unon=function(j,i){for(var e=0,c=f.length;e<c;e+=1){if(f[e].fn===i&&f[e].type===j){b.core.evt.removeEvent(a,i,j);f.splice(e,1);break}}return h};h.fire=function(c){b.core.evt.fireEvent(c,a);return h};h.appendChild=function(c){a.appendChild(c);return h};h.removeChild=function(c){a.removeChild(c);return h};h.toggle=function(){a.style.display==="none"?a.style.display=g:a.style.display="none";return h};h.show=function(){a.style.display==="none"&&(g==="none"?a.style.display="":a.style.display=g);return h};h.hidd=function(){a.style.display!=="none"&&(a.style.display="none");return h};h.hide=h.hidd;h.scrollTo=function(c,e){c==="left"&&(a.scrollLeft=e);c==="top"&&(a.scrollTop=e);return h};h.replaceChild=function(c,e){a.replaceChild(c,e);return h};h.position=function(d){d!==undefined&&b.core.dom.setXY(a,d);return b.core.dom.position(a)};h.setPosition=function(c){c!==undefined&&b.core.dom.setXY(a,c);return h};h.getPosition=function(d){return b.core.dom.position(a)};h.html=function(c){c!==undefined&&(a.innerHTML=c);return a.innerHTML};h.setHTML=function(c){c!==undefined&&(a.innerHTML=c);return h};h.getHTML=function(){return a.innerHTML};h.text=function(d){d!==undefined&&(a.innerHTML=b.core.str.encodeHTML(d));return b.core.str.decodeHTML(a.innerHTML)};h.ttext=h.text;h.setText=function(c){c!==undefined&&(a.innerHTML=b.core.str.encodeHTML(c));return h};h.getText=function(){return b.core.str.decodeHTML(a.innerHTML)};h.get=function(d){return d==="node"?a:b.core.dom.getStyle(a,d)};h.getStyle=function(d){return b.core.dom.getStyle(a,d)};h.getOriginNode=function(){return a};h.destroy=function(){for(var e=0,d=f;e<d;e+=1){b.core.evt.removeEvent(a,f[e].fn,f[e].type)}g=null;f=null;a=null};return h}});STK.register("core.dom.contains",function(b){return function(d,c){if(d===c){return !1}if(d.compareDocumentPosition){return(d.compareDocumentPosition(c)&16)===16}if(d.contains&&c.nodeType===1){return d.contains(c)}while(c=c.parentNode){if(d===c){return !0}}return !1}});STK.register("core.dom.dir",function(e){var d={parent:"parentNode",next:"nextSibling",prev:"previousSibling"},f=function(p,o){o=e.core.obj.parseParam({dir:"parent",expr:undefined,endpoint:document,matchAll:!1},o);var n=d[o.dir],m=o.expr,l=o.endpoint,k=!!o.matchAll;if(!p){throw"core.dom.dir: el is undefined."}if(!n){throw"core.dom.dir: spec.dir is undefined."}var b=[],a=p[n];while(a){if(a.nodeType==1){if(!m||e.core.dom.sizzle.matches(m,[a]).length>0){b.push(a);if(!k){break}}}if(a==l){break}a=a[n]}return b};f.parent=function(g,c){c=c||{};c.dir="parent";return f(g,c)};f.prev=function(g,c){c=c||{};c.dir="prev";return f(g,c)};f.next=function(g,c){c=c||{};c.dir="next";return f(g,c)};return f});STK.register("core.dom.firstChild",function(d){var c=d.core.dom.dir;return function(b){if(b.firstElementChild){return b.firstElementChild}var e=b.firstChild;e&&e.nodeType!=1&&(e=c.next(e)[0]);return e}});STK.register("core.util.hideContainer",function(f){var e,h=function(){if(!e){e=f.C("div");e.style.cssText="position:absolute;top:-9999px;left:-9999px;";document.getElementsByTagName("head")[0].appendChild(e)}},g={appendChild:function(a){if(f.core.dom.isNode(a)){h();e.appendChild(a)}},removeChild:function(a){f.core.dom.isNode(a)&&e&&e.removeChild(a)}};return g});STK.register("core.dom.getSize",function(e){var d=function(a){if(!e.core.dom.isNode(a)){throw"core.dom.getSize need Element as first parameter"}return{width:a.offsetWidth,height:a.offsetHeight}},f=function(b){var g=null;if(b.style.display==="none"){b.style.visibility="hidden";b.style.display="";g=d(b);b.style.display="none";b.style.visibility="visible"}else{g=d(b)}return g};return function(a){var c={};if(!a.parentNode){e.core.util.hideContainer.appendChild(a);c=f(a);e.core.util.hideContainer.removeChild(a)}else{c=f(a)}return c}});STK.register("core.dom.insertHTML",function(b){return function(a,j,i){a=b.E(a)||document.body;i=i?i.toLowerCase():"beforeend";if(a.insertAdjacentHTML){switch(i){case"beforebegin":a.insertAdjacentHTML("BeforeBegin",j);return a.previousSibling;case"afterbegin":a.insertAdjacentHTML("AfterBegin",j);return a.firstChild;case"beforeend":a.insertAdjacentHTML("BeforeEnd",j);return a.lastChild;case"afterend":a.insertAdjacentHTML("AfterEnd",j);return a.nextSibling}throw'Illegal insertion point -> "'+i+'"'}var h=a.ownerDocument.createRange(),g;switch(i){case"beforebegin":h.setStartBefore(a);g=h.createContextualFragment(j);a.parentNode.insertBefore(g,a);return a.previousSibling;case"afterbegin":if(a.firstChild){h.setStartBefore(a.firstChild);g=h.createContextualFragment(j);a.insertBefore(g,a.firstChild);return a.firstChild}a.innerHTML=j;return a.firstChild;case"beforeend":if(a.lastChild){h.setStartAfter(a.lastChild);g=h.createContextualFragment(j);a.appendChild(g);return a.lastChild}a.innerHTML=j;return a.lastChild;case"afterend":h.setStartAfter(a);g=h.createContextualFragment(j);a.parentNode.insertBefore(g,a.nextSibling);return a.nextSibling}throw'Illegal insertion point -> "'+i+'"'}});STK.register("core.dom.insertElement",function(b){return function(a,f,e){a=b.E(a)||document.body;e=e?e.toLowerCase():"beforeend";switch(e){case"beforebegin":a.parentNode.insertBefore(f,a);break;case"afterbegin":a.insertBefore(f,a.firstChild);break;case"beforeend":a.appendChild(f);break;case"afterend":a.nextSibling?a.parentNode.insertBefore(f,a.nextSibling):a.parentNode.appendChild(f)}}});STK.register("core.dom.ready",function(x){var w=[],v=!1,u=x.core.func.getType,t=x.core.util.browser,s=x.core.evt.addEvent,r=function(){if(!v&&document.readyState==="complete"){return !0}return v},q=function(){if(v!=!0){v=!0;for(var b=0,d=w.length;b<d;b++){if(u(w[b])==="function"){try{w[b].call()}catch(c){}}}w=[]}},p=function(){if(r()){q()}else{try{document.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,25);return}q()}},o=function(){r()?q():setTimeout(arguments.callee,25)},n=function(){s(document,"DOMContentLoaded",q)},m=function(){s(window,"load",q)};if(!r()){x.IE&&window===window.top&&p();n();o();m()}return function(b){r()?u(b)==="function"&&b.call():w.push(b)}});STK.register("core.dom.isDomReady",function(d){var c=!1;d.core.dom.ready(function(){c=!0});return function(){return c}});STK.register("core.dom.lastChild",function(d){var c=d.core.dom.dir;return function(b){if(b.lastElementChild){return b.lastElementChild}var e=b.lastChild;e&&e.nodeType!=1&&(e=c.prev(e)[0]);return e}});STK.register("core.dom.neighbor",function(e){var d=function(a,h,g){return e.core.dom.dir(a,{dir:h,expr:g})[0]},f=function(g){var b=g,a={getCurrent:function(){return b},setCurrent:function(c){c&&(b=c);return a},finish:function(){var c=b;b=null;return c},parent:function(c){b=d(b,"parent",c)||b;return a},child:function(c){b=(c?e.core.dom.sizzle(c,b)[0]:e.core.dom.firstChild(b))||b;return a},firstChild:function(c){b=e.core.dom.firstChild(b)||b;return a},lastChild:function(c){b=e.core.dom.lastChild(b)||b;return a},prev:function(c){b=d(b,"prev",c)||b;return a},next:function(c){b=d(b,"next",c)||b;return a},destroy:function(){b=null}};return a};return f});STK.register("core.dom.next",function(b){return function(d){var c=d.nextSibling;while(c&&c.nodeType!==1){c=c.nextSibling}return c}});STK.register("core.dom.prev",function(b){return function(d){var c=d.previousSibling;while(c&&c.nodeType!==1){c=c.previousSibling}return c}});STK.register("core.dom.replaceNode",function(b){return function(d,c){if(d==null||c==null){throw"replaceNode need node as paramster"}c.parentNode.replaceChild(d,c)}});STK.register("core.dom.selector",function(d){var c=function(a,p,o,n){var m=[];if(typeof a=="string"){var l=d.core.dom.sizzle(a,p,o,n);for(var k=0,j=l.length;k<j;k+=1){m[k]=l[k]}}else{if(d.core.dom.isNode(a)){p?d.core.dom.contains(p,a)&&(m=[a]):m=[a]}else{if(d.core.arr.isArray(a)){if(p){for(var k=0,j=a.length;k<j;k+=1){d.core.dom.contains(p,a[k])&&m.push(a[k])}}else{m=a}}}}return m};return function(j,i,h,b){var a=c.apply(window,arguments);a.on=function(f,l){for(var k=0,g=a.length;k<g;k+=1){d.core.evt.addEvent(a[k],f,l)}return a};a.css=function(f,l){for(var k=0,g=a.length;k<g;k+=1){d.core.dom.setStyle(a[k],f,l)}return a};a.show=function(){for(var f=0,e=a.length;f<e;f+=1){a[f].style.display=""}return a};a.hidd=function(){for(var f=0,e=a.length;f<e;f+=1){a[f].style.display="none"}return a};a.hide=a.hidd;return a}});STK.register("core.dom.selectText",function(b){return function(g,f){var j=f.start,i=f.len||0;g.focus();if(g.setSelectionRange){g.setSelectionRange(j,j+i)}else{if(g.createTextRange){var h=g.createTextRange();h.collapse(1);h.moveStart("character",j);h.moveEnd("character",i);h.select()}}}});STK.register("core.dom.setStyles",function(b){return function(a,j,i){if(!b.core.arr.isArray(a)){var a=[a]}for(var h=0,g=a.length;h<g;h++){b.core.dom.setStyle(a[h],j,i)}return a}});STK.register("core.dom.textSelectArea",function(b){return function(h){var g={start:0,len:0};if(typeof h.selectionStart=="number"){g.start=h.selectionStart;g.len=h.selectionEnd-h.selectionStart}else{if(typeof document.selection!="undefined"){var l=document.selection.createRange();if(h.tagName==="INPUT"){var k=h.createTextRange()}else{if(h.tagName==="TEXTAREA"){var k=l.duplicate();k.moveToElementText(h)}}k.setEndPoint("EndToStart",l);g.start=k.text.length;g.len=l.text.length;var j=0;k.moveEnd("character",h.value.length-g.start);k.moveStart("character",g.start);for(var i=g.start;i<h.value.length;i+=1){if(!(k.compareEndPoints("StartToStart",l)<0)){break}k.moveStart("character",1);j+=2}g.start+=j;l=null;k=null}}return g}});STK.register("core.dom.toggleClassName",function(b){return function(a,d){b.core.dom.hasClassName(a,d)?b.core.dom.removeClassName(a,d):b.core.dom.addClassName(a,d)}});STK.register("core.util.getUniqueKey",function(e){var d=(new Date).getTime().toString(),f=1;return function(){return d+f++}});STK.register("core.dom.uniqueID",function(b){return function(a){return a&&(a.uniqueID||(a.uniqueID=b.core.util.getUniqueKey()))}});STK.register("core.evt.custEvent",function(r){var q="__custEventKey__",p=1,o={},n=function(b,f){var d=typeof b=="number"?b:b[q];return d&&o[d]&&{obj:typeof f=="string"?o[d][f]:o[d],key:d}},m={},l=function(h,e,u,t,s){if(h&&typeof e=="string"&&u){var i=n(h,e);if(!i||!i.obj){throw"custEvent ("+e+") is undefined !"}i.obj.push({fn:u,data:t,once:s});return i.key}},k=function(B,A,z,y){var x=!0,w=function(){x=!1};if(B&&typeof A=="string"){var v=n(B,A),u;if(v&&(u=v.obj)){z=typeof z!="undefined"&&[].concat(z)||[];for(var t=u.length-1;t>-1&&u[t];t--){var s=u[t].fn,e=u[t].once;if(s&&s.apply){try{s.apply(B,[{obj:B,type:A,data:u[t].data,preventDefault:w}].concat(z));e&&u.splice(t,1)}catch(a){r.log("[error][custEvent]"+a.message,a)}}}x&&r.core.func.getType(y)==="function"&&y();return v.key}}},j={define:function(b,s){if(b&&s){var i=typeof b=="number"?b:b[q]||(b[q]=p++),d=o[i]||(o[i]={});s=[].concat(s);for(var c=0;c<s.length;c++){d[s[c]]||(d[s[c]]=[])}return i}},undefine:function(b,h){if(b){var g=typeof b=="number"?b:b[q];if(g&&o[g]){if(h){h=[].concat(h);for(var d=0;d<h.length;d++){h[d] in o[g]&&delete o[g][h[d]]}}else{delete o[g]}}}},add:function(f,e,h,g){return l(f,e,h,g,!1)},once:function(f,e,h,g){return l(f,e,h,g,!0)},remove:function(a,w,v){if(a){var u=n(a,w),t,s;if(u&&(t=u.obj)){if(r.core.arr.isArray(t)){if(v){var e=0;while(t[e]){if(t[e].fn===v){break}e++}t.splice(e,1)}else{t.splice(0,t.length)}}else{for(var e in t){t[e]=[]}}return u.key}}},fire:function(f,e,h,g){return k(f,e,h,g)},hook:function(x,w,v){if(!(!x||!w||!v)){var u=[],t=x[q],s=t&&o[t],i,h=w[q]||(w[q]=p++),f;if(s){f=m[t+"_"+h]||(m[t+"_"+h]={});var d=function(g){var e=!0;k(w,f[g.type].type,Array.prototype.slice.apply(arguments,[1,arguments.length]),function(){e=!1});e&&g.preventDefault()};for(var c in v){var b=v[c];if(!f[c]){if(i=s[c]){i.push({fn:d,data:undefined});f[c]={fn:d,type:b};u.push(b)}}}j.define(w,u)}}},unhook:function(b,w,v){if(!(!b||!w||!v)){var u=b[q],t=w[q],s=m[u+"_"+t];if(s){for(var i in v){var f=v[i];s[i]&&j.remove(b,i,s[i].fn)}}}},destroy:function(){o={};p=1;m={}}};return j});STK.register("core.json.queryToJson",function(b){return function(t,s){var r=b.core.str.trim(t).split("&"),q={},p=function(c){return s?decodeURIComponent(c):c};for(var o=0,n=r.length;o<n;o++){if(r[o]){var m=r[o].split("="),l=m[0],a=m[1];if(m.length<2){a=l;l="$nullName"}if(!q[l]){q[l]=p(a)}else{b.core.arr.isArray(q[l])!=!0&&(q[l]=[q[l]]);q[l].push(p(a))}}}return q}});STK.register("core.evt.getEvent",function(b){return function(){if(b.IE){return window.event}if(window.event){return window.event}var a=arguments.callee.caller,f,e=0;while(a!=null&&e<40){f=a.arguments[0];if(!(!f||f.constructor!=Event&&f.constructor!=MouseEvent&&f.constructor!=KeyboardEvent)){return f}e++;a=a.caller}return f}});STK.register("core.evt.fixEvent",function(d){var c="clientX clientY pageX pageY screenX screenY".split(" ");return function(a){a=a||d.core.evt.getEvent();a.target||(a.target=a.srcElement||document);if(a.pageX==null&&a.clientX!=null){var f=document.documentElement,e=document.body;a.pageX=a.clientX+(f.scrollLeft||e&&e.scrollLeft||0)-(f.clientLeft||e&&e.clientLeft||0);a.pageY=a.clientY+(f.scrollTop||e&&e.scrollTop||0)-(f.clientTop||e&&e.clientTop||0)}!a.which&&a.button&&(a.button&1?a.which=1:a.button&4?a.which=2:a.button&2&&(a.which=3));a.relatedTarget===undefined&&(a.relatedTarget=a.fromElement||a.toElement);if(a.layerX==null&&a.offsetX!=null){a.layerX=a.offsetX;a.layerY=a.offsetY}return a}});STK.register("core.obj.isEmpty",function(b){return function(e,d){for(var f in e){if(d||e.hasOwnProperty(f)){return !1}}return !0}});STK.register("core.evt.delegatedEvent",function(d){var c=function(a,h){for(var g=0,f=a.length;g<f;g+=1){if(d.core.dom.contains(a[g],h)){return !0}}return !1};return function(l,k){if(!d.core.dom.isNode(l)){throw"core.evt.delegatedEvent need an Element as first Parameter"}k||(k=[]);d.core.arr.isArray(k)&&(k=[k]);var j={},i=function(f){var m=d.core.evt.fixEvent(f),h=m.target,g=f.type;b(h,g,m)},b=function(q,p,o){var n=null,m=function(){var f,h,g;f=q.getAttribute("action-target");if(f){h=d.core.dom.sizzle(f,l);h.length&&(g=o.target=h[0])}m=d.core.func.empty;return g},e=function(){var f=m()||q;return j[p]&&j[p][n]?j[p][n]({evt:o,el:f,box:l,data:d.core.json.queryToJson(f.getAttribute("action-data")||"")}):!0};if(c(k,q)){return !1}if(!d.core.dom.contains(l,q)){return !1}while(q&&q!==l){if(q.nodeType===1){n=q.getAttribute("action-type");if(n&&e()===!1){break}}q=q.parentNode}},a={};a.add=function(e,n,m){if(!j[n]){j[n]={};d.core.evt.addEvent(l,n,i)}var f=j[n];f[e]=m};a.remove=function(e,f){if(j[f]){delete j[f][e];if(d.core.obj.isEmpty(j[f])){delete j[f];d.core.evt.removeEvent(l,f,i)}}};a.pushExcept=function(e){k.push(e)};a.removeExcept=function(f){if(!f){k=[]}else{for(var e=0,g=k.length;e<g;e+=1){k[e]===f&&k.splice(e,1)}}};a.clearExcept=function(e){k=[]};a.fireAction=function(e,p,o,n){var m="";n&&n.actionData&&(m=n.actionData);j[p]&&j[p][e]&&j[p][e]({evt:o,el:null,box:l,data:d.core.json.queryToJson(m),fireFrom:"fireAction"})};a.fireInject=function(e,p,o){var n=e.getAttribute("action-type"),m=e.getAttribute("action-data");n&&j[p]&&j[p][n]&&j[p][n]({evt:o,el:e,box:l,data:d.core.json.queryToJson(m||""),fireFrom:"fireInject"})};a.fireDom=function(f,e,g){b(f,e,g||{})};a.destroy=function(){for(var e in j){for(var f in j[e]){delete j[e][f]}delete j[e];d.core.evt.removeEvent(l,e,i)}};return a}});STK.register("core.evt.getActiveElement",function(b){return function(){try{var a=b.core.evt.getEvent();return document.activeElement?document.activeElement:a.explicitOriginalTarget}catch(d){return document.body}}});STK.register("core.evt.hasEvent",function(d){var c={};return function(h,g){if(typeof g!="string"){throw new Error("[STK.core.evt.hasEvent] tagName is not a String!")}g=g.toLowerCase();h="on"+h;if(c[g]&&c[g][h]!==undefined){return c[g][h]}var b=d.C(g),a=h in b;if(!a){b.setAttribute(h,"return;");a=typeof b[h]=="function"}c[g]||(c[g]={});c[g][h]=a;b=null;return a}});STK.register("core.evt.hitTest",function(d){function c(a){var h=STK.E(a),g=d.core.dom.position(h),f={left:g.l,top:g.t,right:g.l+h.offsetWidth,bottom:g.t+h.offsetHeight};return f}return function(n,m){var l=c(n);if(m==null){m=d.core.evt.getEvent()}else{if(m.nodeType==1){var k=c(m);return l.right>k.left&&l.left<k.right&&l.bottom>k.top&&l.top<k.bottom?!0:!1}if(m.clientX==null){throw"core.evt.hitTest: ["+m+":oEvent] is not a valid value"}}var j=d.core.util.scrollPos(),b=m.clientX+j.left,a=m.clientY+j.top;return b>=l.left&&b<=l.right&&a>=l.top&&a<=l.bottom}});STK.register("core.evt.stopEvent",function(b){return function(a){var d=a?a:b.core.evt.getEvent();if(b.IE){d.cancelBubble=!0;d.returnValue=!1}else{d.preventDefault();d.stopPropagation()}return !1}});STK.register("core.evt.preventDefault",function(b){return function(a){var d=a?a:b.core.evt.getEvent();b.IE?d.returnValue=!1:d.preventDefault()}});STK.register("core.evt.hotKey",function(g){var f=g.core.dom.uniqueID,j={reg1:/^keypress|keydown|keyup$/,keyMap:{27:"esc",9:"tab",32:"space",10:"enter",13:"enter",8:"backspace",145:"scrollclock",20:"capslock",144:"numlock",19:"pause",45:"insert",36:"home",46:"delete",35:"end",33:"pageup",34:"pagedown",37:"left",38:"up",39:"right",40:"down",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",191:"/",17:"ctrl",16:"shift",109:"-",107:"=",219:"[",221:"]",220:"\\",222:"'",187:"=",188:",",189:"-",190:".",191:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",110:".",111:"/"},keyEvents:{}};j.preventDefault=function(){this.returnValue=!1};j.handler=function(r){r=r||window.event;r.target||(r.target=r.srcElement||document);!r.which&&(r.charCode||r.charCode===0?r.charCode:r.keyCode)&&(r.which=r.charCode||r.keyCode);r.preventDefault||(r.preventDefault=j.preventDefault);var q=f(this),p,o;if(q&&(p=j.keyEvents[q])&&(o=p[r.type])){var n;switch(r.type){case"keypress":if(r.ctrlKey||r.altKey){return}r.which==13&&(n=j.keyMap[13]);r.which==32&&(n=j.keyMap[32]);r.which>=33&&r.which<=126&&(n=String.fromCharCode(r.which));break;case"keyup":case"keydown":j.keyMap[r.which]&&(n=j.keyMap[r.which]);n||(r.which>=48&&r.which<=57?n=String.fromCharCode(r.which):r.which>=65&&r.which<=90&&(n=String.fromCharCode(r.which+32)));if(n&&r.type=="keydown"){p.linkedKey+=p.linkedKey?">"+n:n;r.altKey&&(n="alt+"+n);r.shiftKey&&(n="shift+"+n);r.ctrlKey&&(n="ctrl+"+n)}}var m=/^select|textarea|input$/.test(r.target.nodeName.toLowerCase());if(n){var l=[],c=!1;if(p.linkedKey&&p.linkKeyStr){if(p.linkKeyStr.indexOf(" "+p.linkedKey)!=-1){if(p.linkKeyStr.indexOf(" "+p.linkedKey+" ")!=-1){l=l.concat(o[p.linkedKey]);p.linkedKey=""}c=!0}else{p.linkedKey=""}}c||(l=l.concat(o[n]));for(var b=0;b<l.length;b++){l[b]&&(!l[b].disableInInput||!m)&&l[b].fn.apply(this,[r,l[b].key])}}}};var i=function(a,n,m,l){var k={};if(!g.core.dom.isNode(a)||g.core.func.getType(m)!=="function"){return k}if(typeof n!="string"||!(n=n.replace(/\s*/g,""))){return k}l||(l={});l.disableInInput||(l.disableInInput=!1);l.type||(l.type="keypress");l.type=l.type.replace(/\s*/g,"");if(!j.reg1.test(l.type)||l.disableInInput&&/^select|textarea|input$/.test(a.nodeName.toLowerCase())){return k}if(n.length>1||l.type!="keypress"){n=n.toLowerCase()}if(!/(^(\+|>)$)|(^([^\+>]+)$)/.test(n)){var c="";if(/((ctrl)|(shift)|(alt))\+(\+|([^\+]+))$/.test(n)){n.indexOf("ctrl+")!=-1&&(c+="ctr+");n.indexOf("shift+")!=-1&&(c+="shift+");n.indexOf("alt+")!=-1&&(c+="alt+");c+=n.match(/\+(([^\+]+)|(\+))$/)[1]}else{if(!/(^>)|(>$)|>>/.test(n)&&n.length>2){k.linkFlag=!0}else{return k}}l.type="keydown"}k.keys=n;k.fn=m;k.opt=l;return k},h={add:function(r,q,p,o){if(g.core.arr.isArray(q)){for(var e=0;e<q.length;e++){h.add(r,q[e],p,o)}}else{var d=i(r,q,p,o);if(!d.keys){return}q=d.keys;p=d.fn;o=d.opt;var c=d.linkFlag,b=f(r);j.keyEvents[b]||(j.keyEvents[b]={linkKeyStr:"",linkedKey:""});j.keyEvents[b].handler||(j.keyEvents[b].handler=function(){j.handler.apply(r,arguments)});c&&j.keyEvents[b].linkKeyStr.indexOf(" "+q+" ")==-1&&(j.keyEvents[b].linkKeyStr+=" "+q+" ");var a=o.type;if(!j.keyEvents[b][a]){j.keyEvents[b][a]={};g.core.evt.addEvent(r,a,j.keyEvents[b].handler)}j.keyEvents[b][a][q]||(j.keyEvents[b][a][q]=[]);j.keyEvents[b][a][q].push({fn:p,disableInInput:o.disableInInput,key:q})}},remove:function(A,z,y,x){if(g.core.arr.isArray(z)){for(var w=0;w<z.length;w++){h.remove(A,z[w],y,x)}}else{var v=i(A,z,y,x);if(!v.keys){return}z=v.keys;y=v.fn;x=v.opt;var u=v.linkFlag,t=f(A),e,d,c,b=x.type;if(t&&(e=j.keyEvents[t])&&(d=e[b])&&e.handler&&(c=d[z])){for(var w=0;w<c.length;){c[w].fn===y?c.splice(w,1):w++}c.length<1&&delete d[z];var a=!1;for(var B in d){a=!0;break}if(!a){g.core.evt.removeEvent(A,b,e.handler);delete e[b]}u&&e.linkKeyStr&&(e.linkKeyStr=e.linkKeyStr.replace(" "+z+" ",""))}}}};return h});STK.register("core.evt.eventName",function(d){var c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};return function(f){if(f==="mousewheel"){return"onmousewheel" in document?"mousewheel":"DOMMouseScroll"}if(f==="transitionend"){var b=d.C("div");for(var a in c){if(a in b.style){return c[a]}}}return f}});STK.register("core.func.bind",function(b){return function(a,f,e){e=b.core.arr.isArray(e)?e:[e];return function(){return f.apply(a,e)}}});STK.register("core.func.memorize",function(b){return function(e,d){if(typeof e!="function"){throw"core.func.memorize need a function as first parameter"}d=d||{};var f={};d.timeout&&setInterval(function(){f={}},d.timeout);return function(){var a=Array.prototype.join.call(arguments,"_");a in f||(f[a]=e.apply(d.context||{},arguments));return f[a]}}});STK.register("core.func.methodBefore",function(b){return function(){var a=!1,f=[],e={};e.add=function(h,g){var c=b.core.obj.parseParam({args:[],pointer:window,top:!1},g);c.top==!0?f.unshift([h,c.args,c.pointer]):f.push([h,c.args,c.pointer]);return !a};e.start=function(){var c,k,j,i,h;if(a!=!0){a=!0;for(c=0,k=f.length;c<k;c++){j=f[c][0];i=f[c][1];h=f[c][2];j.apply(h,i)}}};e.reset=function(){f=[];a=!1};e.getList=function(){return f};return e}});STK.register("core.func.timedChunk",function(d){var c={process:function(b){typeof b=="function"&&b()},context:{},callback:null,delay:25,execTime:50};return function(l,k){if(!d.core.arr.isArray(l)){throw"core.func.timedChunk need an array as first parameter"}var j=l.concat(),i=d.core.obj.parseParam(c,k),b=null,a=function(){var e=+(new Date);do{i.process.call(i.context,j.shift())}while(j.length>0&&+(new Date)-e<i.execTime);j.length<=0?i.callback&&i.callback(l):setTimeout(arguments.callee,i.delay)};b=setTimeout(a,i.delay)}});STK.register("core.io.getXHR",function(b){return function(){var f=!1;try{f=new XMLHttpRequest}catch(e){try{f=new ActiveXObject("Msxml2.XMLHTTP")}catch(h){try{f=new ActiveXObject("Microsoft.XMLHTTP")}catch(g){f=!1}}}return f}});STK.register("core.str.parseURL",function(b){return function(i){var h=/^(?:([A-Za-z]+):(\/{0,3}))?([0-9.\-A-Za-z]+\.[0-9A-Za-z]+)?(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,n=["url","scheme","slash","host","port","path","query","hash"],m=h.exec(i),l={};for(var k=0,j=n.length;k<j;k+=1){l[n[k]]=m[k]||""}return l}});STK.register("core.json.jsonToQuery",function(d){var c=function(a,e){a=a==null?"":a;a=d.core.str.trim(a.toString());return e?encodeURIComponent(a):a};return function(b,l){var k=[];if(typeof b=="object"){for(var j in b){if(j==="$nullName"){k=k.concat(b[j]);continue}if(b[j] instanceof Array){for(var i=0,h=b[j].length;i<h;i++){k.push(j+"="+c(b[j][i],l))}}else{typeof b[j]!="function"&&k.push(j+"="+c(b[j],l))}}}return k.length?k.join("&"):""}});STK.register("core.util.URL",function(b){return function(a,n){var m=b.core.obj.parseParam({isEncodeQuery:!1,isEncodeHash:!1},n||{}),l={},k=b.core.str.parseURL(a),j=b.core.json.queryToJson(k.query),i=b.core.json.queryToJson(k.hash);l.setParam=function(d,c){j[d]=c;return this};l.getParam=function(c){return j[c]};l.setParams=function(d){for(var c in d){l.setParam(c,d[c])}return this};l.setHash=function(d,c){i[d]=c;return this};l.getHash=function(c){return i[c]};l.valueOf=l.toString=function(){var d=[],g=b.core.json.jsonToQuery(j,m.isEncodeQuery),f=b.core.json.jsonToQuery(i,m.isEncodeQuery);if(k.scheme!=""){d.push(k.scheme+":");d.push(k.slash)}if(k.host!=""){d.push(k.host);if(k.port!=""){d.push(":");d.push(k.port)}}d.push("/");d.push(k.path);g!=""&&d.push("?"+g);f!=""&&d.push("#"+f);return d.join("")};return l}});STK.register("core.json.strToJson",function(B){var A,z,y={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},x,w=function(b){throw {name:"SyntaxError",message:b,at:A,text:x}},v=function(b){b&&b!==z&&w("Expected '"+b+"' instead of '"+z+"'");z=x.charAt(A);A+=1;return z},u=function(){var d,c="";if(z==="-"){c="-";v("-")}while(z>="0"&&z<="9"){c+=z;v()}if(z==="."){c+=".";while(v()&&z>="0"&&z<="9"){c+=z}}if(z==="e"||z==="E"){c+=z;v();if(z==="-"||z==="+"){c+=z;v()}while(z>="0"&&z<="9"){c+=z;v()}}d=+c;if(isNaN(d)){w("Bad number")}else{return d}},t=function(){var d,c,g="",f;if(z==='"'){while(v()){if(z==='"'){v();return g}if(z==="\\"){v();if(z==="u"){f=0;for(c=0;c<4;c+=1){d=parseInt(v(),16);if(!isFinite(d)){break}f=f*16+d}g+=String.fromCharCode(f)}else{if(typeof y[z]=="string"){g+=y[z]}else{break}}}else{g+=z}}}w("Bad string")},s=function(){while(z&&z<=" "){v()}},r=function(){switch(z){case"t":v("t");v("r");v("u");v("e");return !0;case"f":v("f");v("a");v("l");v("s");v("e");return !1;case"n":v("n");v("u");v("l");v("l");return null}w("Unexpected '"+z+"'")},q,p=function(){var b=[];if(z==="["){v("[");s();if(z==="]"){v("]");return b}while(z){b.push(q());s();if(z==="]"){v("]");return b}v(",");s()}}w("Bad array")},o=function(){var d,c={};if(z==="{"){v("{");s();if(z==="}"){v("}");return c}while(z){d=t();s();v(":");Object.hasOwnProperty.call(c,d)&&w('Duplicate key "'+d+'"');c[d]=q();s();if(z==="}"){v("}");return c}v(",");s()}}w("Bad object")};q=function(){s();switch(z){case"{":return o();case"[":return p();case'"':return t();case"-":return u();default:return z>="0"&&z<="9"?u():r()}};return function(b,f){if(window.JSON&&window.JSON.parse){return window.JSON.parse(b,f)}var e;x=b;A=0;z=" ";e=q();s();z&&w("Syntax error");return typeof f=="function"?function c(g,d){var j,i,h=g[d];if(h&&typeof h=="object"){for(j in h){if(Object.hasOwnProperty.call(h,j)){i=c(h,j);i!==undefined?h[j]=i:delete h[j]}}}return f.call(g,d,h)}({"":e},""):e}});STK.register("core.io.ajax",function($){return function(oOpts){var opts=$.core.obj.parseParam({url:"",charset:"UTF-8",timeout:30000,args:{},onComplete:null,onTimeout:$.core.func.empty,uniqueID:null,onFail:$.core.func.empty,method:"get",asynchronous:!0,header:{},isEncode:!1,responseType:"json"},oOpts);if(opts.url==""){throw"ajax need url in parameters object"}var tm,trans=$.core.io.getXHR(),cback=function(){if(trans.readyState==4){clearTimeout(tm);var data="";if(opts.responseType==="xml"){data=trans.responseXML}else{if(opts.responseType==="text"){data=trans.responseText}else{try{trans.responseText&&typeof trans.responseText=="string"?data=eval("("+trans.responseText+")"):data={}}catch(exp){data=opts.url+"return error : data error"}}}trans.status==200?opts.onComplete!=null&&opts.onComplete(data):trans.status!=0&&opts.onFail!=null&&opts.onFail(data,trans)}else{opts.onTraning!=null&&opts.onTraning(trans)}};trans.onreadystatechange=cback;opts.header["Content-Type"]||(opts.header["Content-Type"]="application/x-www-form-urlencoded");opts.header["X-Requested-With"]||(opts.header["X-Requested-With"]="XMLHttpRequest");if(opts.method.toLocaleLowerCase()=="get"){var url=$.core.util.URL(opts.url,{isEncodeQuery:opts.isEncode});url.setParams(opts.args);url.setParam("__rnd",(new Date).valueOf());trans.open(opts.method,url.toString(),opts.asynchronous);try{for(var k in opts.header){trans.setRequestHeader(k,opts.header[k])}}catch(exp){}trans.send("")}else{trans.open(opts.method,opts.url,opts.asynchronous);try{for(var k in opts.header){trans.setRequestHeader(k,opts.header[k])}}catch(exp){}trans.send($.core.json.jsonToQuery(opts.args,opts.isEncode))}opts.timeout&&(tm=setTimeout(function(){try{trans.abort();opts.onTimeout({},trans);opts.onFail({},trans)}catch(a){}},opts.timeout));return trans}});STK.register("core.io.scriptLoader",function(e){var d={},f={url:"",charset:"UTF-8",timeout:30000,args:{},onComplete:e.core.func.empty,onTimeout:e.core.func.empty,isEncode:!1,uniqueID:null};return function(j){var i,c,b=e.core.obj.parseParam(f,j);if(b.url==""){throw"scriptLoader: url is null"}var a=b.uniqueID||e.core.util.getUniqueKey();i=d[a];if(i!=null&&e.IE!=!0){e.core.dom.removeNode(i);i=null}i==null&&(i=d[a]=e.C("script"));i.charset=b.charset;i.id="scriptRequest_script_"+a;i.type="text/javascript";b.onComplete!=null&&(e.IE?i.onreadystatechange=function(){if(i.readyState.toLowerCase()=="loaded"||i.readyState.toLowerCase()=="complete"){try{clearTimeout(c);document.getElementsByTagName("head")[0].removeChild(i);i.onreadystatechange=null}catch(g){}b.onComplete()}}:i.onload=function(){try{clearTimeout(c);e.core.dom.removeNode(i)}catch(g){}b.onComplete()});i.src=e.core.util.URL(b.url,{isEncodeQuery:b.isEncode}).setParams(b.args).toString();document.getElementsByTagName("head")[0].appendChild(i);b.timeout>0&&(c=setTimeout(function(){try{document.getElementsByTagName("head")[0].removeChild(i)}catch(g){}b.onTimeout()},b.timeout));return i}});STK.register("core.io.jsonp",function(b){return function(a){var l=b.core.obj.parseParam({url:"",charset:"UTF-8",timeout:30000,args:{},onComplete:null,onTimeout:null,responseName:null,isEncode:!1,varkey:"callback"},a),k=-1,j=l.responseName||"STK_"+b.core.util.getUniqueKey();l.args[l.varkey]=j;var i=l.onComplete,h=l.onTimeout;window[j]=function(c){if(k!=2&&i!=null){k=1;i(c)}};l.onComplete=null;l.onTimeout=function(){if(k!=1&&h!=null){k=2;h()}};return b.core.io.scriptLoader(l)}});STK.register("core.util.templet",function(b){return function(d,c){return d.replace(/#\{(.+?)\}/ig,function(){var g=arguments[1].replace(/\s/ig,""),k=arguments[0],j=g.split("||");for(var i=0,h=j.length;i<h;i+=1){if(/^default:.*$/.test(j[i])){k=j[i].replace(/^default:/,"");break}if(c[j[i]]!==undefined){k=c[j[i]];break}}return k})}});STK.register("core.io.getIframeTrans",function(d){var c='<iframe id="#{id}" name="#{id}" height="0" width="0" frameborder="no"></iframe>';return function(h){var g,b,a;b=d.core.obj.parseParam({id:"STK_iframe_"+d.core.util.getUniqueKey()},h);a={};g=d.C("DIV");g.innerHTML=d.core.util.templet(c,b);d.core.util.hideContainer.appendChild(g);a.getId=function(){return b.id};a.destroy=function(){g.innerHTML="";try{g.getElementsByTagName("iframe")[0].src="about:blank"}catch(e){}d.core.util.hideContainer.removeChild(g);g=null};return a}});STK.register("core.io.require",function(h){var g="http://js.t.sinajs.cn/STK/js/",l=function(m,f){var p=f.split("."),o=m,n=null;while(n=p.shift()){o=o[n];if(o===undefined){return !1}}return !0},k=[],j=function(a){if(h.core.arr.indexOf(a,k)!==-1){return !1}k.push(a);h.core.io.scriptLoader({url:a,callback:function(){h.core.arr.foreach(k,function(b,d){if(b===a){k.splice(d,1);return !1}})}});return !1},i=function(p,o,n){var m=null;for(var e=0,c=p.length;e<c;e+=1){var b=p[e];typeof b=="string"?l(h,b)||j(g+b.replace(/\./ig,"/")+".js"):l(window,b.NS)||j(b.url)}var a=function(){for(var d=0,q=p.length;d<q;d+=1){var f=p[d];if(typeof f=="string"){if(!l(h,f)){m=setTimeout(a,25);return !1}}else{if(!l(window,f.NS)){m=setTimeout(a,25);return !1}}}clearTimeout(m);o.apply({},[].concat(n))};m=setTimeout(a,25)};i.setBaseURL=function(b){if(typeof b!="string"){throw"[STK.kit.extra.require.setBaseURL] need string as frist parameter"}g=b};return i});STK.register("core.io.ijax",function(b){return function(a){var p,o,n,m,l,k,j;p=b.core.obj.parseParam({url:"",form:null,args:{},uniqueID:null,timeout:30000,onComplete:b.core.func.empty,onTimeout:b.core.func.empty,onFail:b.core.func.empty,asynchronous:!0,isEncode:!0,abaurl:null,responseName:null,varkey:"callback",abakey:"callback"},a);j={};if(p.url==""){throw"ijax need url in parameters object"}if(!p.form){throw"ijax need form in parameters object"}o=b.core.io.getIframeTrans();n=p.responseName||"STK_ijax_"+b.core.util.getUniqueKey();k={};k[p.varkey]=n;if(p.abaurl){p.abaurl=b.core.util.URL(p.abaurl).setParams(k);k={};k[p.abakey]=p.abaurl.toString()}p.url=b.core.util.URL(p.url,{isEncodeQuery:p.isEncode}).setParams(k).setParams(p.args);l=function(){window[n]=null;o.destroy();o=null;clearTimeout(m)};m=setTimeout(function(){try{p.onTimeout();p.onFail()}catch(c){}finally{l()}},p.timeout);window[n]=function(e,c){try{p.onComplete(e,c)}catch(f){}finally{l()}};p.form.action=p.url.toString();p.form.target=o.getId();p.form.submit();j.abort=l;return j}});STK.register("core.json.clone",function(d){function c(b){var h;if(b instanceof Array){h=[];var g=b.length;while(g--){h[g]=c(b[g])}return h}if(b instanceof Object){h={};for(var f in b){h[f]=c(b[f])}return h}return b}return c});STK.register("core.json.include",function(b){return function(g,f){for(var j in f){if(typeof f[j]=="object"){if(f[j] instanceof Array){if(!(g[j] instanceof Array)){return !1}if(f[j].length!==g[j].length){return !1}for(var i=0,h=f[j].length;i<h;i+=1){if(!arguments.callee(f[j][i],g[j][i])){return !1}}}else{if(typeof g[j]!="object"){return !1}if(!arguments.callee(f[j],g[j])){return !1}}}else{if(typeof f[j]=="number"||typeof f[j]=="string"){if(f[j]!==g[j]){return !1}}else{if(f[j]!==undefined&&f[j]!==null){if(g[j]===undefined||g[j]===null){return !1}if(!f[j].toString||!g[j].toString){throw"json1[k] or json2[k] do not have toString method"}if(f[j].toString()!==g[j].toString()){return !1}}}}}return !0}});STK.register("core.json.compare",function(b){return function(a,d){return b.core.json.include(a,d)&&b.core.json.include(d,a)?!0:!1}});STK.register("core.json.jsonToStr",function(t){function k(x,w){var v,u,j,i,h=p,f,e=w[x];e&&typeof e=="object"&&typeof e.toJSON=="function"&&(e=e.toJSON(x));typeof m=="function"&&(e=m.call(w,x,e));switch(typeof e){case"string":return l(e);case"number":return isFinite(e)?String(e):"null";case"boolean":case"null":return String(e);case"object":if(!e){return"null"}p+=o;f=[];if(Object.prototype.toString.apply(e)==="[object Array]"){i=e.length;for(v=0;v<i;v+=1){f[v]=k(v,e)||"null"}j=f.length===0?"[]":p?"[\n"+p+f.join(",\n"+p)+"\n"+h+"]":"["+f.join(",")+"]";p=h;return j}if(m&&typeof m=="object"){i=m.length;for(v=0;v<i;v+=1){u=m[v];if(typeof u=="string"){j=k(u,e);j&&f.push(l(u)+(p?": ":":")+j)}}}else{for(u in e){if(Object.hasOwnProperty.call(e,u)){j=k(u,e);j&&f.push(l(u)+(p?": ":":")+j)}}}j=f.length===0?"{}":p?"{\n"+p+f.join(",\n"+p)+"\n"+h+"}":"{"+f.join(",")+"}";p=h;return j}}function l(b){q.lastIndex=0;return q.test(b)?'"'+b.replace(q,function(d){var c=n[d];return typeof c=="string"?c:"\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function s(b){return b<10?"0"+b:b}if(typeof Date.prototype.toJSON!="function"){Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+s(this.getUTCMonth()+1)+"-"+s(this.getUTCDate())+"T"+s(this.getUTCHours())+":"+s(this.getUTCMinutes())+":"+s(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(b){return this.valueOf()}}var r=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,q=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,p,o,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},m;return function(f,e,h){if(window.JSON&&window.JSON.stringify){return window.JSON.stringify(f,e,h)}var g;p="";o="";if(typeof h=="number"){for(g=0;g<h;g+=1){o+=" "}}else{typeof h=="string"&&(o=h)}m=e;if(!e||typeof e=="function"||typeof e=="object"&&typeof e.length=="number"){return k("",{"":f})}throw new Error("JSON.stringify")}});STK.register("core.obj.beget",function(d){var c=function(){};return function(b){c.prototype=b;return new c}});STK.register("core.obj.cascade",function(b){return function(f,e){for(var h=0,g=e.length;h<g;h+=1){if(typeof f[e[h]]!="function"){throw"cascade need function list as the second paramsters"}f[e[h]]=function(a){return function(){a.apply(f,arguments);return f}}(f[e[h]])}}});STK.register("core.obj.clear",function(b){return function(e){var d,f={};for(d in e){e[d]!=null&&(f[d]=e[d])}return f}});STK.register("core.obj.cut",function(b){return function(a,h){var g={};if(!b.core.arr.isArray(h)){throw"core.obj.cut need array as second parameter"}for(var f in a){b.core.arr.inArray(f,h)||(g[f]=a[f])}return g}});STK.register("core.obj.sup",function(b){return function(g,f){var j={};for(var i=0,h=f.length;i<h;i+=1){if(typeof g[f[i]]!="function"){throw"super need function list as the second paramsters"}j[f[i]]=function(a){return function(){return a.apply(g,arguments)}}(g[f[i]])}return j}});STK.register("core.str.bLength",function(b){return function(d){if(!d){return 0}var c=d.match(/[^\x00-\xff]/g);return d.length+(c?c.length:0)}});STK.register("core.str.dbcToSbc",function(b){return function(c){return c.replace(/[\uff01-\uff5e]/g,function(d){return String.fromCharCode(d.charCodeAt(0)-65248)}).replace(/\u3000/g," ")}});STK.register("core.str.parseHTML",function(b){return function(h){var g=/[^<>]+|<(\/?)([A-Za-z0-9]+)([^<>]*)>/g,l,k,j=[];while(l=g.exec(h)){var i=[];for(k=0;k<l.length;k+=1){i.push(l[k])}j.push(i)}return j}});STK.register("core.str.leftB",function(b){return function(a,f){var e=a.replace(/\*/g," ").replace(/[^\x00-\xff]/g,"**");a=a.slice(0,e.slice(0,f).replace(/\*\*/g," ").replace(/\*/g,"").length);b.core.str.bLength(a)>f&&f>0&&(a=a.slice(0,a.length-1));return a}});STK.register("core.str.queryString",function(b){return function(a,j){var i=b.core.obj.parseParam({source:window.location.href.toString(),split:"&"},j),h=(new RegExp("(^|)"+a+"=([^\\"+i.split+"]*)(\\"+i.split+"|$)","gi")).exec(i.source),g;return(g=h)?g[2]:null}});STK.register("core.util.cookie",function(d){var c={set:function(a,n,m){var l=[],k,j,i=d.core.obj.parseParam({expire:null,path:"/",domain:null,secure:null,encode:!0},m);i.encode==!0&&(n=escape(n));l.push(a+"="+n);i.path!=null&&l.push("path="+i.path);i.domain!=null&&l.push("domain="+i.domain);i.secure!=null&&l.push(i.secure);if(i.expire!=null){k=new Date;j=k.getTime()+i.expire*3600000;k.setTime(j);l.push("expires="+k.toGMTString())}document.cookie=l.join(";")},get:function(f){f=f.replace(/([\.\[\]\$])/g,"\\$1");var e=new RegExp(f+"=([^;]*)?;","i"),h=document.cookie+";",g=h.match(e);return g?g[1]||"":""},remove:function(b,e){e=e||{};e.expire=-10;c.set(b,"",e)}};return c});STK.register("core.util.drag",function(e){var d=function(b){b.cancelBubble=!0;return !1},f=function(a,g){a.clientX=g.clientX;a.clientY=g.clientY;a.pageX=g.clientX+e.core.util.scrollPos().left;a.pageY=g.clientY+e.core.util.scrollPos().top;return a};return function(t,s){if(!e.core.dom.isNode(t)){throw"core.util.drag need Element as first parameter"}var r=e.core.obj.parseParam({actRect:[],actObj:{}},s),q={},p=e.core.evt.custEvent.define(r.actObj,"dragStart"),o=e.core.evt.custEvent.define(r.actObj,"dragEnd"),n=e.core.evt.custEvent.define(r.actObj,"draging"),c=function(h){var g=f({},h);document.body.onselectstart=function(){return !1};e.core.evt.addEvent(document,"mousemove",b);e.core.evt.addEvent(document,"mouseup",a);e.core.evt.addEvent(document,"click",d,!0);if(!e.IE){h.preventDefault();h.stopPropagation()}e.core.evt.custEvent.fire(p,"dragStart",g);return !1},b=function(g){var h=f({},g);g.cancelBubble=!0;e.core.evt.custEvent.fire(p,"draging",h)},a=function(h){var g=f({},h);document.body.onselectstart=function(){return !0};e.core.evt.removeEvent(document,"mousemove",b);e.core.evt.removeEvent(document,"mouseup",a);e.core.evt.removeEvent(document,"click",d,!0);e.core.evt.custEvent.fire(p,"dragEnd",g)};e.core.evt.addEvent(t,"mousedown",c);q.destroy=function(){e.core.evt.removeEvent(t,"mousedown",c);r=null};q.getActObj=function(){return r.actObj};return q}});STK.register("core.util.easyTemplate",function(d){var c=function(b,h){if(!b){return""}if(b!==c.template){c.template=b;c.aStatement=c.parsing(c.separate(b))}var g=c.aStatement,f=function(e){e&&(h=e);return arguments.callee};f.toString=function(){return(new Function(g[0],g[1]))(h)};return f};c.separate=function(f){var e=/\\'/g,g=f.replace(/(<(\/?)#(.*?(?:\(.*?\))*)>)|(')|([\r\n\t])|(\$\{([^\}]*?)\})/g,function(b,p,o,n,m,l,k,j){if(p){return"{|}"+(o?"-":"+")+n+"{|}"}if(m){return"\\'"}if(l){return""}if(k){return"'+("+j.replace(e,"'")+")+'"}});return g};c.parsing=function(t){var s,r,q,p,o,n,m,l=["var aRet = [];"];m=t.split(/\{\|\}/);var k=/\s/;while(m.length){q=m.shift();if(!q){continue}o=q.charAt(0);if(o!=="+"&&o!=="-"){q="'"+q+"'";l.push("aRet.push("+q+");");continue}p=q.split(k);switch(p[0]){case"+et":s=p[1];r=p[2];l.push('aRet.push("<!--'+s+' start-->");');break;case"-et":l.push('aRet.push("<!--'+s+' end-->");');break;case"+if":p.splice(0,1);l.push("if"+p.join(" ")+"{");break;case"+elseif":p.splice(0,1);l.push("}else if"+p.join(" ")+"{");break;case"-if":l.push("}");break;case"+else":l.push("}else{");break;case"+list":l.push("if("+p[1]+".constructor === Array){with({i:0,l:"+p[1]+".length,"+p[3]+"_index:0,"+p[3]+":null}){for(i=l;i--;){"+p[3]+"_index=(l-i-1);"+p[3]+"="+p[1]+"["+p[3]+"_index];");break;case"-list":l.push("}}}");break;default:}}l.push('return aRet.join("");');return[r,l.join("")]};return c});STK.register("core.util.htmlParser",function(x){var w=function(f){var e={},h=f.split(",");for(var g=0;g<h.length;g++){e[h[g]]=!0}return e},v=/^<(\w+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,u=/^<\/(\w+)[^>]*>/,t=/([\w|\-]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,s=w("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),r=w("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul"),q=w("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),p=w("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),o=w("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),n=w("script,style"),m=function(k,j){var i,h,g,f=[],e=k,d=function(C,A,z,b){if(r[A]){while(f.last()&&q[f.last()]){c("",f.last())}}p[A]&&f.last()==A&&c("",A);b=s[A]||!!b;b||f.push(A);var a=[];if(C==="textarea"){var B=k.match(/^(.*)<\/textarea[^>]*>/);a.push({name:"text",value:k.slice(0,B[0].length)});k=k.substring(B[0].length)}if(j.start&&typeof j.start=="function"){z.replace(t,function(D,l){var E=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:o[l]?l:"";a.push({name:l,value:E,escaped:E.replace(/(^|[^\\])"/g,'$1\\"')})});j.start(A,a,b)}},c=function(b,A){if(!A){var z=0}else{for(var z=f.length-1;z>=0;z--){if(f[z]==A){break}}}if(z>=0){for(var l=f.length-1;l>=z;l--){j.end&&typeof j.end=="function"&&j.end(f[l])}f.length=z}};f.last=function(){return this[this.length-1]};while(k){h=!0;if(!f.last()||!n[f.last()]){if(k.indexOf("<!--")===0){i=k.indexOf("-->");if(i>=0){j.comment&&typeof j.comment=="function"&&j.comment(k.substring(4,i));k=k.substring(i+3);h=!1}}else{if(k.indexOf("</")===0){g=k.match(u);if(g){k=k.substring(g[0].length);g[0].replace(u,c);h=!1}}else{if(k.indexOf("<")===0){g=k.match(v);if(g){k=k.substring(g[0].length);g[0].replace(v,d);h=!1}}}}if(h){i=k.indexOf("<");var y=i<0?k:k.substring(0,i);k=i<0?"":k.substring(i);j.chars&&typeof j.chars=="function"&&j.chars(y)}}else{k=k.replace(new RegExp("(.*)</"+f.last()+"[^>]*>"),function(b,l){l=l.replace(/<!--(.*?)-->/g,"$1").replace(/<!\[CDATA\[(.*?)]]>/g,"$1");j.chars&&typeof j.chars=="function"&&j.chars(l);return""});c("",f.last())}if(k==e){throw"Parse Error: "+k}e=k}c()};return m});STK.register("core.util.nameValue",function(b){return function(r){var q=r.getAttribute("name"),p=r.getAttribute("type"),o=r.tagName,n={name:q,value:""},m=function(c){c===!1?n=!1:n.value?n.value=[b.core.str.trim(c||"")].concat(n.value):n.value=b.core.str.trim(c||"")};if(!!r.disabled||!q){return !1}switch(o){case"INPUT":p=="radio"||p=="checkbox"?r.checked?m(r.value):m(!1):p=="reset"||p=="submit"||p=="image"?m(!1):m(r.value);break;case"SELECT":if(r.multiple){var l=r.options;for(var k=0,a=l.length;k<a;k++){l[k].selected&&m(l[k].value)}}else{m(r.value)}break;case"TEXTAREA":m(r.value||r.getAttribute("value")||!1);break;case"BUTTON":default:m(r.value||r.getAttribute("value")||r.innerHTML||!1)}return n}});STK.register("core.util.htmlToJson",function(b){return function(v,u,t){var s={};u=u||["INPUT","TEXTAREA","BUTTON","SELECT"];if(!v||!u){return !1}var r=b.core.util.nameValue;for(var q=0,p=u.length;q<p;q++){var o=v.getElementsByTagName(u[q]);for(var n=0,m=o.length;n<m;n++){var a=r(o[n]);if(!a||t&&a.value===""){continue}s[a.name]?s[a.name] instanceof Array?s[a.name]=s[a.name].concat(a.value):s[a.name]=[s[a.name]].concat(a.value):s[a.name]=a.value}}return s}});STK.register("core.util.jobsM",function(b){return function(){var a=[],l={},k=!1,j={},i=function(c){var p=c.name,o=c.func,n=+(new Date);if(!l[p]){try{o(b);o[p]=!0}catch(m){b.log("[error][jobs]"+p)}}},h=function(c){if(c.length){b.core.func.timedChunk(c,{process:i,callback:arguments.callee});c.splice(0,c.length)}else{k=!1}};j.register=function(d,e){a.push({name:d,func:e})};j.start=function(){if(k){return !0}k=!0;h(a)};j.load=function(){};b.core.dom.ready(j.start);return j}()});STK.register("core.util.language",function(b){return function(g,f){var j=[];for(var i=2,h=arguments.length;i<h;i+=1){j.push(arguments[i])}return g.replace(/#L\{((.*?)(?:[^\\]))\}/ig,function(){var c=arguments[1],e;f&&f[c]!==undefined?e=f[c]:e=c;j.length&&(e=e.replace(/(\%s)/ig,function(){var d=j.shift();return d!==undefined?d:arguments[0]}));return e})}});STK.register("core.util.listener",function(b){return function(){function i(){if(k.length!=0){clearTimeout(j);var d=k.splice(0,1)[0];try{d.func.apply(d.func,[].concat(d.data))}catch(e){b.log("[error][listener]: One of "+d+"-"+d+" function execute error.")}j=setTimeout(i,25)}}var a={},l,k=[],j,h={conn:function(){var c=window;while(c!=top){c=c.parent;c.STK&&c.STK.core&&c.STK.core.util&&c.STK.core.util.listener!=null&&(l=c)}},register:function(c,g,f){if(l!=null){l.STK.core.util.listener.register(c,g,f)}else{a[c]=a[c]||{};a[c][g]=a[c][g]||[];a[c][g].push(f)}},fire:function(c,o,n){if(l!=null){l.listener.fire(c,o,n)}else{var m,f,d;if(a[c]&&a[c][o]&&a[c][o].length>0){m=a[c][o];m.data_cache=n;for(f=0,d=m.length;f<d;f++){k.push({channel:c,evt:o,func:m[f],data:n})}i()}}},remove:function(c,p,o){if(l!=null){l.STK.core.util.listener.remove(c,p,o)}else{if(a[c]&&a[c][p]){for(var n=0,m=a[c][p].length;n<m;n++){if(a[c][p][n]===o){a[c][p].splice(n,1);break}}}}},list:function(){return a},cache:function(c,e){if(l!=null){return l.listener.cache(c,e)}if(a[c]&&a[c][e]){return a[c][e].data_cache}}};return h}()});STK.register("core.util.pageletM",function(ab){var aa="http://js.t.sinajs.cn/t4/",Z="http://img.t.sinajs.cn/t4/";if(typeof $CONFIG!="undefined"){aa=$CONFIG.jsPath||aa;Z=$CONFIG.cssPath||Z}var Y=ab.core.arr.indexOf,X={},W,V={},U={},T={},S={},R,Q;if(ab.IE){R={};Q=function(){var a,f,e;for(a in R){if(R[a].length<31){e=ab.E(a);break}}if(!e){a="style_"+ab.core.util.getUniqueKey(),e=document.createElement("style");e.setAttribute("type","text/css");e.setAttribute("id",a);document.getElementsByTagName("head")[0].appendChild(e);R[a]=[]}return{styleID:a,styleSheet:e.styleSheet||e.sheet}}}var P=function(a,h){T[a]={cssURL:h};if(ab.IE){var g=Q();g.styleSheet.addImport(h);R[g.styleID].push(a);T[a].styleID=g.styleID}else{var f=ab.C("link");f.setAttribute("rel","Stylesheet");f.setAttribute("type","text/css");f.setAttribute("charset","utf-8");f.setAttribute("href",h);f.setAttribute("id",a);document.getElementsByTagName("head")[0].appendChild(f)}},O={},N=function(a,h){var g=ab.E(a);if(g){h(g);O[a]&&delete O[a];for(var f in O){N(f,O[f])}}else{O[a]=h}},M=function(a){if(ab.IE){var j=T[a].styleID,i=R[j],e=ab.E(j),d;if((d=Y(a,i))>-1){(e.styleSheet||e.sheet).removeImport(d);i.splice(d,1)}}else{ab.core.dom.removeNode(ab.E(a))}delete X[T[a].cssURL];delete T[a]},K=function(a,j,i){for(var h in S){ab.E(h)||delete S[h]}S[a]={js:{},css:{}};if(i){for(var h=0,c=i.length;h<c;++h){S[a].css[Z+i[h]]=1}}},J=function(){for(var f in T){var e=!1,h=T[f].cssURL;for(var g in S){if(S[g].css[h]){e=!0;break}}e||M(f)}},I=function(e,d){var f=X[e]||(X[e]={loaded:!1,list:[]});if(f.loaded){d(e);return !1}f.list.push(d);return f.list.length>1?!1:!0},H=function(e){var d=X[e].list;if(d){for(var f=0;f<d.length;f++){d[f](e)}X[e].loaded=!0;delete X[e].list}},G=function(t){var s=t.url,r=t.load_ID,q=t.complete,p=t.pid,o=Z+s,n="css_"+ab.core.util.getUniqueKey();if(!!I(o,q)){P(n,o);var m=ab.C("div");m.id=r;ab.core.util.hideContainer.appendChild(m);var c=3000,a=function(){if(parseInt(ab.core.dom.getStyle(m,"height"))==42){ab.core.util.hideContainer.removeChild(m);H(o)}else{if(--c>0){setTimeout(a,10)}else{ab.log(o+"timeout!");ab.core.util.hideContainer.removeChild(m);H(o);M(n);P(n,o)}}};setTimeout(a,50)}},F=function(e,b){var a=aa+e;!I(a,b)||ab.core.io.scriptLoader({url:a,onComplete:function(){H(a)},onTimeout:function(){ab.log(a+"timeout!");delete X[a]}})},E=function(d,c){V[d]||(V[d]=c)},D=function(a){if(a){if(V[a]){try{U[a]||(U[a]=V[a](ab))}catch(f){ab.log(a,f)}}else{ab.log("start:ns="+a+" ,have not been registed")}}else{var e=[];for(a in V){e.push(a)}ab.core.func.timedChunk(e,{process:function(d){try{U[d]||(U[d]=V[d](ab))}catch(g){ab.log(d,g)}}})}},C=function(v){var u=1,t,s,r,q,p,o,n;v=v||{};s=v.pid;r=v.html;p=v.js?[].concat(v.js):[];q=v.css?[].concat(v.css):[];if(s==undefined){ab.log("node pid["+s+"] is undefined")}else{K(s,p,q);o=function(){--u>0||N(s,function(b){r!=undefined&&(b.innerHTML=r);p.length>0&&n();J()})};n=function(d){p.length>0&&F(p.shift(),n);if(d&&d.indexOf("/pl/")!=-1){var c=d.replace(/^.*?\/(pl\/.*)\.js\??.*$/,"$1").replace(/\//g,".");B(c);D(c)}};if(q.length>0){u+=q.length;for(var m=0,a;a=q[m];m++){G({url:a,load_ID:"js_"+a.replace(/^\/?(.*)\.css\??.*$/i,"$1").replace(/\//g,"_"),complete:o,pid:s})}}o()}},B=function(a){if(a){if(U[a]){ab.log("destroy:"+a);try{U[a].destroy()}catch(d){ab.log(d)}delete U[a]}}else{for(a in U){ab.log("destroy:"+a);try{U[a]&&U[a].destroy&&U[a].destroy()}catch(d){ab.log(a,d)}}U={}}},L={register:E,start:D,view:C,clear:B,destroy:function(){L.clear();X={};U={};V={};W=undefined}};ab.core.dom.ready(function(){ab.core.evt.addEvent(window,"unload",function(){ab.core.evt.removeEvent(window,"unload",arguments.callee);L.destroy()})});return L});STK.register("core.util.winSize",function(b){return function(f){var e,h,g;f?g=f.document:g=document;if(g.compatMode==="CSS1Compat"){e=g.documentElement.clientWidth;h=g.documentElement.clientHeight}else{if(self.innerHeight){f?g=f.self:g=self;e=g.innerWidth;h=g.innerHeight}else{if(g.documentElement&&g.documentElement.clientHeight){e=g.documentElement.clientWidth;h=g.documentElement.clientHeight}else{if(g.body){e=g.body.clientWidth;h=g.body.clientHeight}}}}return{width:e,height:h}}});STK.register("core.util.pageSize",function(b){return function(a){var p;a?p=a.document:p=document;var o=p.compatMode=="CSS1Compat"?p.documentElement:p.body,n,m,l,k;if(window.innerHeight&&window.scrollMaxY){n=o.scrollWidth;m=window.innerHeight+window.scrollMaxY}else{if(o.scrollHeight>o.offsetHeight){n=o.scrollWidth;m=o.scrollHeight}else{n=o.offsetWidth;m=o.offsetHeight}}var j=b.core.util.winSize(a);m<j.height?l=j.height:l=m;n<j.width?k=j.width:k=n;return{page:{width:k,height:l},win:{width:j.width,height:j.height}}}});STK.register("core.util.queue",function(b){return function(){var d={},c=[];d.add=function(a){c.push(a);return d};d.get=function(){return c.length>0?c.shift():!1};return d}});STK.register("core.util.timer",function(b){return function(){var i={},h={},n=0,m=null,l=!1,k=25,j=function(){for(var a in h){h[a].pause||h[a].fun()}return i};i.add=function(c){if(typeof c!="function"){throw"The timer needs add a function as a parameters"}var a=""+(new Date).getTime()+Math.random()*Math.pow(10,17);h[a]={fun:c,pause:!1};n<=0&&i.start();n++;return a};i.remove=function(a){if(h[a]){delete h[a];n--}n<=0&&i.stop();return i};i.pause=function(a){h[a]&&(h[a].pause=!0);return i};i.play=function(a){h[a]&&(h[a].pause=!1);return i};i.stop=function(){clearInterval(m);m=null;return i};i.start=function(){m=setInterval(j,k);return i};i.loop=j;i.get=function(c){if(c==="delay"){return k}if(c==="functionList"){return h}};i.set=function(d,c){d==="delay"&&typeof c=="number"&&(k=Math.max(25,Math.min(c,200)))};return i}()});STK.register("core.util.scrollTo",function(b){return function(r,q){if(!b.core.dom.isNode(r)){throw"core.dom.isNode need element as the first parameter"}var p=b.core.obj.parseParam({box:document.documentElement,top:0,step:2,onMoveStop:null},q);p.step=Math.max(2,Math.min(10,p.step));var o=[],n=b.core.dom.position(r),m;p.box==document.documentElement?m={t:0}:m=b.core.dom.position(p.box);var l=Math.max(0,(n?n.t:0)-(m?m.t:0)-p.top),k=p.box===document.documentElement?p.box.scrollTop||document.body.scrollTop||window.pageYOffset:p.box.scrollTop;while(Math.abs(k-l)>p.step&&k!==0){o.push(Math.round(k+(l-k)*p.step/10));k=o[o.length-1]}o.length||o.push(l);var a=b.core.util.timer.add(function(){if(o.length){p.box===document.documentElement?window.scrollTo(0,o.shift()):p.box.scrollTop=o.shift()}else{p.box===document.documentElement?window.scrollTo(0,l):p.box.scrollTop=l;b.core.util.timer.remove(a);typeof p.onMoveStop=="function"&&p.onMoveStop()}})}});STK.register("core.util.stack",function(b){return function(){var d={},c=[];d.add=function(a){c.push(a);return d};d.get=function(){return c.length>0?c.pop():!1};return d}});STK.register("core.util.swf",function(e){function d(a,n){var m=e.core.obj.parseParam({id:"swf_"+parseInt(Math.random()*10000,10),width:1,height:1,attrs:{},paras:{},flashvars:{},html:""},n);if(a==null){throw"swf: [sURL] 未定义"}var l,k=[],j=[];for(l in m.attrs){j.push(l+'="'+m.attrs[l]+'" ')}var i=[];for(l in m.flashvars){i.push(l+"="+m.flashvars[l])}m.paras.flashvars=i.join("&");if(e.IE){k.push('<object width="'+m.width+'" height="'+m.height+'" id="'+m.id+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" ');k.push(j.join(""));k.push('><param name="movie" value="'+a+'" />');for(l in m.paras){k.push('<param name="'+l+'" value="'+m.paras[l]+'" />')}k.push("</object>")}else{k.push('<embed width="'+m.width+'" height="'+m.height+'" id="'+m.id+'" src="'+a+'" type="application/x-shockwave-flash" ');k.push(j.join(""));for(l in m.paras){k.push(l+'="'+m.paras[l]+'" ')}k.push(" />")}m.html=k.join("");return m}var f={};f.create=function(j,i,h){var b=e.E(j);if(b==null){throw"swf: ["+j+"] 未找到"}var a=d(i,h);b.innerHTML=a.html;return e.E(a.id)};f.html=function(b,h){var g=d(b,h);return g.html};f.check=function(){var a=-1;if(e.IE){try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");a=h.GetVariable("$version")}catch(g){}}else{navigator.plugins["Shockwave Flash"]&&(a=navigator.plugins["Shockwave Flash"].description)}return a};return f});STK.register("core.util.storage",function(g){var f=window.localStorage;if(f){return{get:function(b){return unescape(f.getItem(b))},set:function(b,k,e){f.setItem(b,escape(k))},del:function(b){f.removeItem(b)},clear:function(){f.clear()},getAll:function(){var b=f.length,m=null,l=[];for(var k=0;k<b;k++){m=f.key(k);l.push(m+"="+this.getKey(m))}return l.join("; ")}}}if(window.ActiveXObject){var j=document.documentElement,i="localstorage";try{j.addBehavior("#default#userdata");j.save("localstorage")}catch(h){}return{set:function(d,c){j.setAttribute(d,c);j.save(i)},get:function(b){j.load(i);return j.getAttribute(b)},del:function(b){j.removeAttribute(b);j.save(i)}}}return{get:function(l){var k=document.cookie.split("; "),o=k.length,n=[];for(var m=0;m<o;m++){n=k[m].split("=");if(l===n[0]){return unescape(n[1])}}return null},set:function(e,d,k){if(!(k&&k instanceof Date)){k=new Date;k.setDate(k.getDate()+1)}document.cookie=e+"="+escape(d)+"; expires="+k.toGMTString()},del:function(b){document.cookie=b+"=''; expires=Fri, 31 Dec 1999 23:59:59 GMT;"},clear:function(){var k=document.cookie.split("; "),e=k.length,m=[];for(var l=0;l<e;l++){m=k[l].split("=");this.deleteKey(m[0])}},getAll:function(){return unescape(document.cookie.toString())}}});STK.register("core.util.history",function(X){var W=X.core.util.browser,V=X.core.util.hideContainer,U=X.core.evt.custEvent,T=X.core.str.parseURL,S=X.core.json.queryToJson,R=X.core.evt.addEvent,Q=function(d,c){D&&!c&&D("#!"+d);U.fire(z,"popstate",[d,H]);H=!0},P=function(){return decodeURIComponent(window.location.toString())},O=function(d){var c=T(d||P());return{host:c.host,path:"/"+c.path,query:c.query&&"?"+c.query,hash:c.hash&&"#"+c.hash}},N=function(){var b=T(P());return/^!/.test(b.hash)?T("http://"+b.host+b.hash.substr(1)):b},M=function(a,f){if(!!/^\//.test(a)){f=X.core.obj.parseParam({callChange:!0,callChangeOnSame:!0},f);H=f.callChange;if(G){a=a.replace(/#.*$/,"");if(I==a){if(!f.callChangeOnSame){return}}else{history.pushState(null,null,I=a)}Q(a);return}var e="#!"+a;a=a.replace(/#.*$/,"");I==a?f.callChangeOnSame&&Q(a):window.location.hash=e}},L=function(a,l){if(!!a){l=l||!1;var k=N(),j=S(k.query);for(var i in a){a[i]===null?delete j[i]:j[i]=a[i]}k.query=X.core.json.jsonToQuery(j);var f=["/",k.path,k.query==""?"":"?",k.query,k.hash==""?"":"#",k.hash].join("");M(f,{callChange:l})}},K=function(g,e){if(typeof g=="string"&&!/^!/.test(g)){var j=T(window.location.toString()).hash,i,h=window.location.toString().replace(/#.*$/,"");if(/^!/.test(j)){j=j.replace(/#.*$/,"");i="#"+j+"#"+g}else{i="#"+g}e?window.location.hash=i:window.location.replace(h+i)}return z},J=function(b){U.add(z,"popstate",function(a,f,e){b(f,e)});return z},I,H=!0,G=!!history.pushState,F="onhashchange" in window&&(typeof document.documentMode=="undefined"||document.documentMode==8),E,D,C,B,A=function(){if(!F&&(W.IE6||W.IE7)){(E=X.C("iframe")).style.display="none";V.appendChild(E);E=E.contentWindow;D=function(b){b=encodeURIComponent(b);E.document.open("text/html");E.document.write("<html><head></head><body onload=\"parent.STK&&parent.STK.historyM&&parent.STK.historyM.hashFrameChangeHash&&parent.STK.historyM.hashFrameChangeHash('"+b+"');\"></body></html>");E.document.close()};C=function(b){b=decodeURIComponent(b);if(!C.first){C.first=1}else{window.location.hash=b;b!="#!"+I&&Q(I=b.substr(2),!0)}}}I=P().replace(/^http:\/\/.*?\//,"/").replace(/#.*$/,"");if(G){R(window,"popstate",function(){setTimeout(function(){var d=O(),c=d.path+d.query;I!=c&&Q(I=c)})})}else{B=function(){var d,c=O();/^#!/.test(c.hash)?d=c.hash.substr(2).replace(/#.*$/,""):d=c.path+c.query;I!=d&&Q(I=d)};F?R(window,"hashchange",function(){B()}):setInterval(function(){B()},200)}D&&D("#!"+I);U.define(z,"popstate")},z={parseURL:N,getURL:O,pushState:M,setQuery:L,setPlainHash:K,onpopstate:J,start:A,hashFrameChangeHash:C};return z});(function(){var e=STK.core,d={tween:e.ani.tween,tweenArche:e.ani.tweenArche,arrCopy:e.arr.copy,arrClear:e.arr.clear,hasby:e.arr.hasby,unique:e.arr.unique,foreach:e.arr.foreach,isArray:e.arr.isArray,inArray:e.arr.inArray,arrIndexOf:e.arr.indexOf,findout:e.arr.findout,domNext:e.dom.next,domPrev:e.dom.prev,isNode:e.dom.isNode,addHTML:e.dom.addHTML,insertHTML:e.dom.insertHTML,setXY:e.dom.setXY,contains:e.dom.contains,position:e.dom.position,trimNode:e.dom.trimNode,insertAfter:e.dom.insertAfter,insertBefore:e.dom.insertBefore,removeNode:e.dom.removeNode,replaceNode:e.dom.replaceNode,Ready:e.dom.ready,setStyle:e.dom.setStyle,setStyles:e.dom.setStyles,getStyle:e.dom.getStyle,addClassName:e.dom.addClassName,hasClassName:e.dom.hasClassName,removeClassName:e.dom.removeClassName,builder:e.dom.builder,cascadeNode:e.dom.cascadeNode,selector:e.dom.selector,sizzle:e.dom.sizzle,addEvent:e.evt.addEvent,custEvent:e.evt.custEvent,removeEvent:e.evt.removeEvent,fireEvent:e.evt.fireEvent,fixEvent:e.evt.fixEvent,getEvent:e.evt.getEvent,stopEvent:e.evt.stopEvent,delegatedEvent:e.evt.delegatedEvent,preventDefault:e.evt.preventDefault,hotKey:e.evt.hotKey,memorize:e.func.memorize,bind:e.func.bind,getType:e.func.getType,methodBefore:e.func.methodBefore,timedChunk:e.func.timedChunk,funcEmpty:e.func.empty,ajax:e.io.ajax,jsonp:e.io.jsonp,ijax:e.io.ijax,scriptLoader:e.io.scriptLoader,require:e.io.require,jsonInclude:e.json.include,jsonCompare:e.json.compare,jsonClone:e.json.clone,jsonToQuery:e.json.jsonToQuery,queryToJson:e.json.queryToJson,jsonToStr:e.json.jsonToStr,strToJson:e.json.strToJson,objIsEmpty:e.obj.isEmpty,beget:e.obj.beget,cascade:e.obj.cascade,objSup:e.obj.sup,parseParam:e.obj.parseParam,bLength:e.str.bLength,dbcToSbc:e.str.dbcToSbc,leftB:e.str.leftB,trim:e.str.trim,encodeHTML:e.str.encodeHTML,decodeHTML:e.str.decodeHTML,parseURL:e.str.parseURL,parseHTML:e.str.parseHTML,queryString:e.str.queryString,htmlToJson:e.util.htmlToJson,cookie:e.util.cookie,drag:e.util.drag,timer:e.util.timer,jobsM:e.util.jobsM,listener:e.util.listener,winSize:e.util.winSize,pageSize:e.util.pageSize,templet:e.util.templet,queue:e.util.queue,stack:e.util.stack,swf:e.util.swf,URL:e.util.URL,scrollPos:e.util.scrollPos,scrollTo:e.util.scrollTo,getUniqueKey:e.util.getUniqueKey,storage:e.util.storage,pageletM:e.util.pageletM};for(var f in d){STK.regShort(f,d[f])}})();STK.register("kit.dom.parseDOM",function(a){return function(c){for(var b in c){if(c[b]&&(c[b].length==1)){c[b]=c[b][0]}}return c}});STK.register("kit.io.ajax",function(b){var a=function(d,e,f){e=(e|0)||1;f=f||"fail";var c=d.args;if(c.__rnd){delete c.__rnd}(new Image()).src="http://weibolog.sinaapp.com/?t="+e+"&u="+encodeURIComponent(d.url)+"&p="+encodeURIComponent(b.core.json.jsonToQuery(c))+"&m="+f};return function(d){var g={};var c=[];var i=null;var f=false;var e=b.parseParam({url:"",method:"get",responseType:"json",timeout:30*1000,onTraning:b.funcEmpty,isEncode:true},d);e.onComplete=function(k){f=false;d.onComplete(k,e.args);setTimeout(h,0)};e.onFail=function(k){f=false;if(typeof d.onFail==="function"){try{d.onFail(k,e.args)}catch(l){}}setTimeout(h,0);try{a(e)}catch(l){}};e.onTimeout=function(k){try{a(e);d.onTimeout(k)}catch(l){}};var h=function(){if(!c.length){return}if(f===true){return}f=true;e.args=c.shift();if(e.method.toLowerCase()=="post"){var k=b.core.util.URL(e.url);k.setParam("__rnd",+new Date());e.url=k.toString()}i=b.ajax(e)};var j=function(l){while(c.length){c.shift()}f=false;if(i){try{i.abort()}catch(k){}}i=null};g.request=function(k){if(!k){k={}}if(d.noQueue){j()}if(!d.uniqueRequest||!i){c.push(k);k._t=0;h()}};g.abort=j;return g}});STK.register("kit.io.jsonp",function(a){return function(c){var d=a.parseParam({url:"",method:"get",responseType:"json",varkey:"_v",timeout:30*1000,onComplete:a.funcEmpty,onTraning:a.funcEmpty,onFail:a.funcEmpty,isEncode:true},c);var b=[];var h={};var e=false;var g=function(){if(!b.length){return}if(e===true){return}e=true;h.args=b.shift();h.onComplete=function(i){e=false;d.onComplete(i,h.args);setTimeout(g,0)};h.onFail=function(i){e=false;d.onFail(i);setTimeout(g,0)};a.jsonp(a.core.json.merge(d,{args:h.args,onComplete:function(i){h.onComplete(i)},onFail:function(i){try{h.onFail(i)}catch(j){}}}))};var f={};f.request=function(i){if(!i){i={}}b.push(i);i._t=1;g()};f.abort=function(i){while(b.length){b.shift()}e=false;h=null};return f}});STK.register("kit.io.ijax",function(a){return function(c){var d=a.parseParam({url:"",timeout:30*1000,isEncode:true,abaurl:null,responseName:null,varkey:"callback",abakey:"callback"},c);var b=[];var h=null;var e=false;d.onComplete=function(j,k){e=false;c.onComplete(j,d.form,k);d.form=null;d.args=null;setTimeout(g,0)};d.onFail=function(j,k){e=false;c.onFail(j,d.form,k);d.form=null;d.args=null;setTimeout(g,0)};var g=function(){var j;if(!b.length){return}if(e===true){return}e=true;j=b.shift();d.args=j.args;d.form=j.form;h=a.ijax(d)};var i=function(k){while(b.length){b.shift()}e=false;if(h){try{h.abort()}catch(j){}}h=null};var f={};f.request=function(j,k){if(!a.isNode(j)){throw"[kit.io.ijax.request] need a form as first parameter"}if(!k){k={}}if(c.noQueue){i()}b.push({form:j,args:k});g()};f.abort=i;return f}});STK.register("kit.io.inter",function(a){var b=a.core.json.merge;return function(){var e={};var d={};var c={};var f=function(h,g){return function(j,l){try{g.onComplete(j,l)}catch(m){}try{if(j.code==="100000"){g.onSuccess(j,l)}else{if(j.code==="100002"){location.href=j.data;return}g.onError(j,l)}}catch(m){}for(var i in c[h]){try{c[h][i](j,l)}catch(m){}}}};e.register=function(g,h){if(typeof d[g]!=="undefined"){throw g+" registered"}d[g]=h;c[g]={}};e.addHook=function(g,i){var h=a.core.util.getUniqueKey();c[g][h]=i;return h};e.rmHook=function(g,h){if(c[g]&&c[g][h]){delete c[g][h]}};e.getTrans=function(h,k){var g=b(d[h],k);g.onComplete=f(h,k);var j=d[h].requestMode;var i="ajax";if(j==="jsonp"||j==="ijax"){i=j}return a.kit.io[i](g)};e.request=function(h,k,i){var g=b(d[h],k);g.onComplete=f(h,k);g=a.core.obj.cut(g,["noqueue"]);g.args=i;var j=d[h].requestMode;if(j==="jsonp"){return a.jsonp(g)}else{if(j==="ijax"){return a.ijax(g)}else{return a.ajax(g)}}};return e}});STK.register("common.trans.form",function(c){var a=c.kit.io.inter();var b=a.register;b("checkform",{url:"/signup/v5/formcheck",method:"get"});return a});STK.register("common.trans.account",function(c){var a=c.kit.io.inter();var b=a.register;b("btn_quick_opening",{url:"/signup/v5/fullinfo",method:"post"});b("register",{url:"/signup/v5/reg",method:"post"});b("fullinfo",{url:"/signup/v5/fullinfo",method:"post"});return a});STK.register("common.setting.form",function(a){var b=["input","textarea","select","a","div","ul","li","em"];return function(h,g){var f={},d;var i="form";var c={ctls:{},states:{}};var j={reset:function(m){for(var l in m){c.states[l]=m[l]}}};var e={init:function(){e.pars();e.build();e.bind()},pars:function(){if(!h){throw ("from is undefined")}d=a.parseParam({proxy:null},g)},build:function(){f.domList=a.builder(h).list},bind:function(){a.custEvent.define(f,["reset"]);a.custEvent.add(f,"reset",j.reset)},add:function(k,l){c.ctls[k]=l},getData:function(){var m={};for(var l in c.ctls){var k=c.ctls[l];m[k.name()]=k.value()}return a.parseParam(a.htmlToJson(h,b),m)},check:function(o){if(o){var m=c.ctls[o];c.states[o]=m.check();return c.states[o].type}else{var n=true;for(var l in c.ctls){var m=c.ctls[l];c.states[l]=m.check();n=n&&c.states[l].state}return n}},reset:function(){for(var l in c.ctls){c.states[l].reset()}},states:function(){for(var l in c.ctls){c.states[l]=c.ctls[l].msg}return c.states},destroy:function(){for(var l in c.ctls){c.states[l].destroy()}}};e.init();f.ctls=function(){return c.ctls}();f.states=e.states;f.add=e.add;f.getData=e.getData;f.check=e.check;f.reset=e.reset;f.destroy=e.destroy;return f}});STK.register("common.setting.rule",function(b){var a={};a.isEmpty=function(c){return/^\s*$/g.test(c.replace(/^\s+|\s+$/g,""))};a.isNumber=function(c){return/^[+\-]?\d+(\.\d+)?$/.test(c)};a.isName=function(c){return/^[0-9a-zA-Z\u4e00-\u9fa5_-]+$/.test(c)};a.isChinese=function(c){return/[\u4e00-\u9fa5]+$/.test(c)};a.isCName=function(c){return/^[\u4e00-\u9fa5]+[\u00b7\.]?[\u4e00-\u9fa5]+$/.test(c)};a.isEmail=function(e){if(!/^[0-9a-z_][_.0-9a-z-]{0,31}@([0-9a-z][0-9a-z-]{0,30}\.){1,4}[a-z]{2,4}$/.test(e)){return false}else{if(e&&e!=""&&(e.indexOf("@")!=-1)){var c=e.indexOf("@");var d=e.substring(0,c);if(d.length>64||e.length>256){return false}else{return true}}}return false};a.isEmailName=function(c){return/^[0-9a-z_][_.0-9a-z-]{0,31}$/.test(c)};a.isIDNumber=function(c){return/^[\d]{15}$/.test(c)||/^[\d]{17}([Xx\d]{1}$)$/.test(c)};a.isMobile=function(c){return/^1[3|4|5|7|8][0-9]{9}$/.test(c)};a.isMobileSea=function(d,c){switch(c){case"0086":return isMobile(d);case"00852":return/^[569]\d{7}$/.test(d);case"00853":return/^6\d{7}$/.test(d);case"00886":return/^9\d{8}$/.test(d);case"001":return/^\d{10}$/.test(d);case"0060":return/^1\d{8}$/.test(d);case"0061":return/^4\d{8}$/.test(d);case"0081":return/^[789]0\d{8}$/.test(d);case"0082":return/^1[016789]\d{8}$/.test(d);case"0065":return/^[89]\d{7}$/.test(d);case"0044":return/^(7[45789]\d{8}|7624\d{6})$/.test(d);case"0033":return/^((6\d{8})|(7[345678]\d{7}))$/.test(d);case"007":return/^((90[12345689]\d{7})|(9[1236]\d{8})|(95[0123]\d{7}))$/.test(d);case"0091":return/^[987]\d{9}$/.test(d);case"0066":return/^[98]\d{8}$/.test(d);case"0049":return/^(15[12579]\d{7}|16[023]\d{7}|160\d{8}|17[012345789]\d{7}|176\d{8}|700\d{8})$/.test(d);case"0049":return/^(15[12579]\d{7}|16[023]\d{7}|160\d{8}|17[012345789]\d{7}|176\d{8}|700\d{8})$/.test(d);case"0055":return/^(\d{2}[6789]\d{7,8})$/.test(d);default:return true}};a.isWeird=function(c){return !/^[a-zA-Z0-9\._\-\?\~\!\@\#\$\%\^\&\*\\\+\`\=\[\]\(\)\{\}\|\;\'\:\"\,\/\<\>]+$/i.test(c)};a.isPassportID=function(c){return/^[a-zA-Z0-9]{8,20}$/.test(c)};a.isAbroadName=function(c){return/^[a-zA-Z\u4e00-\u9fa5]+([\u00b7\.\-]?[a-zA-Z\u4e00-\u9fa5]+)*$/.test(c)};a.lenLimit=function(f,e,d){var c=b.bLength(f);return !(c<e||c>d)};a.isUrl=function(c){return/^http:\/\/([\w-]+(\.[\w-]+)+(\/[\w-   .\/\?%@&+=\u4e00-\u9fa5]*)?)?$/i.test(c)};a.turnBoolean=function(c){switch(typeof c){case"boolean":return c;case"number":return !!c;case"string":return c=="true"||c=="1"}};a.reNullChar=function(c){return c.replace(/^\s+|\s+$/g,"")};return a});STK.register("common.setting.textCopy",function(a){var b=a.common.setting.rule,c=a.core.dom.uniqueID;return function(h,d){var l;var e={blur:function(){var n=a.fixEvent().target;if(b.isEmpty(n.value)){n.value=j[c(n)].data.text||""}a.custEvent.fire(k,"blur",{type:pars.actionType,el:n});a.removeClassName(n,pars.focusCS)},focus:function(){var n=a.fixEvent().target;if(n.value==j[c(n)].data.text){n.value=""}a.custEvent.fire(k,"focus",{type:pars.actionType,el:n});a.addClassName(n,pars.focusCS)},keyup:function(){var n=a.fixEvent().target;a.custEvent.fire(k,"keyup",{type:pars.actionType,el:n})}};var f={isCopyText:function(n){var o=n.getAttribute("action-type");var p=a.queryToJson(n.getAttribute("action-data"));return n.value.replace(/^\s+|\s+$/g,"")==(p[o].replace(/^\s+|\s+$/g,"")||"")}};var g=function(p){var o=c(p.el);if(j[o]){return}j[o]=a.parseParam({el:"",data:""},p);for(var n in e){a.addEvent(p.el,n,e[n])}if(p.el.value==p.data[pars.text]){p.el.value=""}a.addClassName(p.el,pars.focusCS)};var j={};var i={click:g,focusin:g};var m={init:function(){m.pars();m.bind()},pars:function(){pars=a.parseParam({actionType:"text_copy",text:"text",focusCS:"W_input_focus"},d)},bind:function(){l=a.core.evt.delegatedEvent(h);for(var n in i){l.add(pars.actionType,n,i[n])}},destroy:function(){l.destroy();for(var o in j){for(var n in e){a.removeEvent(o.el,n,e[n])}}}};m.init();var k={};k.API=f;k.getControl=m.getControl;k.destroy=m.destroy;return k}});STK.register("common.setting.base",function(a){return function(){var c={};c.frame=["id","preInit","init","initPars","build","bind","errText","setMust","disabled","check","name","value","reset","fire","destroy"];for(var b in c.frame){c[c.frame[b]]=a.core.func.empty}return c}});STK.register("kit.extra.language",function(a){window.$LANG||(window.$LANG={});return function(b,c){var d=a.core.util.language(b,$LANG);d=d.replace(/\\}/ig,"}");if(c){d=a.templet(d,c)}return d}});STK.register("common.setting.dataType",function(d){var c=d.kit.extra.language;var a={msg:{id:"",state:true,type:"empty",code:"",action:"",msg:"",iodata:null},initPars:{text:"",hook:null,type:"",proxy:null,iokey:null,disabled:false,iodelay:0,must:true,auto:true},errText:{E00:c("#L{系统繁忙}")}};var b={};b.get=function(e){return d.core.json.clone(a[e])||{}};return b});STK.register("common.setting.control",function(a){return function(d,c,e){var b=a.common.setting.base();b.preInit=function(){b.id=a.core.dom.uniqueID(d);b.dataType=a.common.setting.dataType;b.rule=a.common.setting.rule;b.pars=a.parseParam(b.dataType.get("initPars"),c)};b.init=function(){b.initPars();b.build();b.bind()};b.initPars=function(){b.check();b.msg.msg=b.errText[b.msg.code]||"";b.msg.action="init";b.cache_value=null;b.old_value=b.value();var g=["must","disabled"];for(var h=0,f=g.length;h<f;h++){var j=g[h];b.pars[j]=b.rule.turnBoolean(b.pars[j])}};b.build=function(){b.rule.isEmpty(d.defaultValue)&&b.pars.text&&(d.value=b.pars.text);b.pars.disabled&&b.disabled(b.pars.disabled)};b.bind=function(){for(var f in e.evtAct){a.addEvent(d,f,e.evtAct[f])}};b.check=function(){b.msg=b.dataType.get("msg");b.msg.id=b.id;b.msg.action="check";if(b.pars.disabled){b.msg.state=true;b.msg.type="empty";b.msg.code="E01"}else{e.check&&e.check()}b.msg.msg=b.errText[b.msg.code];return b.msg};b.setMust=function(f){f=b.rule.turnBoolean(f);if(f==undefined){return}b.pars.disabled=f};b.setMsg=function(f){b.msg=a.parseParam(b.dataType.get("msg"),f)};b.fire=function(){b.errText[b.msg.code]&&(b.msg.msg=b.errText[b.msg.code]);var f={};f[b.type]=b.msg;b.pars.hook&&a.custEvent.fire(b.pars.hook,"check",f)};b.disabled=function(f){f=b.rule.turnBoolean(f);if(f==undefined){return}b.pars.disabled=f;if(f){d.disabled=true}else{d.disabled=false}};b.name=function(){return d.getAttribute("name")||b.id};b.value=function(f){if(typeof f!="undefined"){d.value=f}else{if(d.value===b.pars.text){return""}return d.value.replace(/^\s+|\s+$/g,"")}};b.reset=function(f){b.value(b.old_value);b.pars=a.parseParam(b.dataType.get("initPars"),c);b.check();b.msg.action="reset";!!!f&&b.fire()};b.destroy=function(){for(var f in e.evtAct){a.removeEvent(d,f,e.evtAct[f])}};b.preInit();return b}});STK.register("common.setting.email",function(c){var b=c.kit.extra.language;var a={E01:"",E02:b("#L{请输入你的常用邮箱请不要使用私人邮箱作为企业微博的注册邮箱}"),E03:b("#L{请输入正确的邮箱地址}"),E04:b("#L{请输入常用邮箱}")};return function(i,h){var k;var d=function(){var m=f.value(),l=false;if(!f.pars.must&&f.rule.isEmpty(m)){f.msg.state=true;f.msg.type="empty";f.msg.code="E01";return}if(!l&&f.rule.isEmpty(m)){l=true;f.msg.type="err";f.msg.code="E02"}if(!l&&!f.rule.isEmail(m)){l=true;f.msg.type="err";f.msg.code="E03"}if(!l){f.msg.state=true;f.msg.type="ok";f.msg.code="E01"}else{f.msg.state=false}};var j={verify:function(){f.pars.proxy.request(f.pars.iokey,{onSuccess:function(l){f.msg=c.parseParam(f.msg,l.data||{});f.msg.state=true;f.fire()},onError:function(l){l.data.sinamail=l.data.sinamail||false;f.msg=c.core.json.merge(f.msg,l.data||{});f.msg.state=false;f.fire()}},{type:f.type,value:encodeURIComponent(f.value()),from:"qiyewei"})}};var g={focus:function(){f.cache_value=f.value();if(f.rule.isEmpty(f.cache_value)){f.msg.state=false;f.msg.action="focus";f.msg.type="tip";f.msg.code="E02";f.fire()}},blur:function(){i.value=f.rule.reNullChar(i.value);i.value=f.rule.reNullChar(i.value);f.msg.action="focus";var l=f.value();if(l&&f.cache_value==l){return}f.cache_value=null;k=setTimeout(function(){d();if(f.msg.state&&f.pars.proxy&&f.pars.iokey&&!f.rule.isEmpty(l)){f.msg.type="loading";j.verify()}if(l==""){f.msg.code="E04"}f.fire();clearTimeout(k);k=null},f.pars.iodelay)}};var f=c.common.setting.control(i,h,{evtAct:g,check:d});var e=c.core.obj.sup(f,["initPars"]);f.initPars=function(){e.initPars();f.errText=a;f.type="email"};f.pars.auto&&f.init();return f}});STK.register("common.setting.password",function(c){var b=c.kit.extra.language;var a={E01:"",E02:b("#L{6-16字符组成，区分大小写}"),E03:b("#L{请输入密码}"),E04:b("#L{密码为6-16位}"),E05:b("#L{密码请勿使用特殊字符}"),E06:b("#L{请牢记您的密码}"),E07:b("#L{试试字母、数字和标点混合}")};return function(j,i){var k=function(m){var l=-1;if(m.match(/[a-zA-Z]/ig)){l++}if(m.match(/[0-9]/ig)){l++}if(m.match(/(.[^a-z0-9])/ig)){l++}if(m.length<6&&l>0){l--}return l};var d=function(){var n=g.value().replace(/^\s+|\s+$/g,""),m=false;if(!g.pars.must&&g.rule.isEmpty(n)){g.msg.state=true;g.msg.type="empty";g.msg.code="E01";return}if(!m&&g.rule.isEmpty(n)){m=true;g.msg.type="err";g.msg.code="E03"}if(!m&&(n.length<6||n.length>16)){m=true;g.msg.type="err";g.msg.code="E04"}if(!m&&g.rule.isWeird(n)){m=true;g.msg.type="err";g.msg.code="E05"}if(!m){var l=k(n);g.msg.state=true;g.msg.type="power"+l;g.msg.code=l==2?"E06":"E07"}else{g.msg.state=false}};var f=false;var h={focus:function(){f=true;setTimeout(function(){f=false},100);g.cache_value=g.value();if(g.rule.isEmpty(g.cache_value)){g.msg.state=false;g.msg.action="focus";g.msg.type="tip";g.msg.code="E02";g.fire()}},keydown:function(m){var n,l;if(!(n=m)||!(l=n.keyCode)){return}if(l==32){c.stopEvent()}},keyup:function(m){var n,l;if(!(n=m)||!(l=n.keyCode)){return}if(l==32){return}if(f){return}g.msg.action="keyup";d();g.fire()},blur:function(){j.value=g.rule.reNullChar(j.value);g.msg.action="focus";d();g.fire()}};var g=c.common.setting.control(j,i,{evtAct:h,check:d});var e=c.core.obj.sup(g,["initPars"]);g.initPars=function(){e.initPars();g.errText=a;g.type="password"};g.pars.auto&&g.init();return g}});STK.register("common.setting.nickname",function(c){var b=c.kit.extra.language;var a={E01:"",E02:b("#L{请填写企业 \\ 品牌的全称或无歧义简称 可输入4-30位，包含英文、数字和中文}"),E03:b("#L{昵称不能全是数字}"),E04:b('#L{仅支持中英文，数字和"_"}'),E05:b("#L{长度有误，请输入4-30位字符}"),E06:b("#L{请输入昵称}")};return function(i,h){var k;var d=function(){var m=f.value(),l=false;if(!f.pars.must&&f.rule.isEmpty(m)){f.msg.state=true;f.msg.type="empty";f.msg.code="E01";return}if(!l&&f.rule.isEmpty(m)){l=true;f.msg.type="err";f.msg.code="E06"}if(!l&&f.rule.isNumber(m)){l=true;f.msg.type="err";f.msg.code="E03"}if(!l&&!f.rule.isName(m)){l=true;f.msg.type="err";f.msg.code="E04"}if(!l&&!f.rule.lenLimit(m,4,30)){l=true;f.msg.type="err";f.msg.code="E05"}if(!l){f.msg.state=true;f.msg.type="ok";f.msg.code="E01"}else{f.msg.state=false}};var j={verify:function(){f.pars.proxy.request(f.pars.iokey,{onSuccess:function(l){f.msg=c.parseParam(f.msg,l.data||{});f.fire()},onError:function(l){f.msg=c.parseParam(f.msg,l.data||{});f.fire()}},{type:f.type,value:encodeURIComponent(f.value()),from:"qiyewei"})}};var g={focus:function(){f.cache_value=f.value();if(f.rule.isEmpty(f.cache_value)){f.msg.state=false;f.msg.action="focus";f.msg.type="tip";f.msg.code="E02";f.fire()}},blur:function(){i.value=f.rule.reNullChar(i.value);f.msg.action="focus";var l=f.value();if(l&&f.cache_value==l){return}f.cache_value=null;k=setTimeout(function(){d();if(f.msg.state&&f.pars.proxy&&f.pars.iokey&&!f.rule.isEmpty(l)){f.msg.type="loading";j.verify()}f.fire();clearTimeout(k);k=null},f.pars.iodelay)}};var f=c.common.setting.control(i,h,{evtAct:g,check:d});var e=c.core.obj.sup(f,["initPars"]);f.initPars=function(){e.initPars();f.errText=a;f.type="nickname"};f.pars.auto&&f.init();return f}});STK.register("common.setting.recomnick",function(c){var b=c.kit.extra.language;var a={E01:"",E02:b("#L{请填写企业 \\ 品牌的全称或无歧义简称 可输入4-30位，包含英文、数字和中文}"),E03:b("#L{昵称不能全是数字}"),E04:b('#L{仅支持中英文，数字和"_"}'),E05:b("#L{长度有误，请输入4-30位字符}"),E06:b("#L{请输入昵称}")};return function(i,h){var k;var d=function(){var m=f.value(),l=false;if(!f.pars.must&&f.rule.isEmpty(m)){f.msg.state=true;f.msg.type="empty";f.msg.code="E01";return}if(!l&&f.rule.isEmpty(m)){f.msg.state=true;f.msg.type="ok";f.msg.code="E01";return}if(!l&&f.rule.isNumber(m)){l=true;f.msg.type="err";f.msg.code="E03"}if(!l&&!f.rule.isName(m)){l=true;f.msg.type="err";f.msg.code="E04"}if(!l&&!f.rule.lenLimit(m,4,30)){l=true;f.msg.type="err";f.msg.code="E05"}if(!l){f.msg.state=true;f.msg.type="ok";f.msg.code="E01"}else{f.msg.state=false}};var j={verify:function(){}};var g={focus:function(){f.cache_value=f.value();if(f.rule.isEmpty(f.cache_value)){f.msg.state=false;f.msg.action="focus";f.msg.type="tip";f.msg.code="E02";f.fire()}},blur:function(){i.value=f.rule.reNullChar(i.value);f.msg.action="focus";var l=f.value();if(l&&f.cache_value==l){return}f.cache_value=null;k=setTimeout(function(){d();f.fire();clearTimeout(k);k=null},f.pars.iodelay)}};var f=c.common.setting.control(i,h,{evtAct:g,check:d});var e=c.core.obj.sup(f,["initPars"]);f.initPars=function(){e.initPars();f.errText=a;f.type="recomnick"};f.pars.auto&&f.init();return f}});STK.register("common.setting.realname",function(c){var b=c.kit.extra.language;var a={E01:"",E02:b("#L{您的真实姓名仅用于身份验证，新浪将严格保密，请放心填写}"),E03:b("#L{请输入姓名}"),E04:b("#L{请输入正确的姓名}")};return function(i,h){var d=function(){var k=f.value(),j=false;if(!f.pars.must&&f.rule.isEmpty(k)){f.msg.state=true;f.msg.type="empty";f.msg.code="E01";return}if(!j&&f.rule.isEmpty(k)){j=true;f.msg.type="err";f.msg.code="E03"}if(!j&&(!f.rule.isCName(k)||!f.rule.lenLimit(k,4,30))){j=true;f.msg.type="err";f.msg.code="E04"}if(!j){f.msg.state=true;f.msg.type="ok";f.msg.code="E01"}else{f.msg.state=false}};var g={focus:function(){f.cache_value=f.value();if(f.rule.isEmpty(f.cache_value)){f.msg.state=false;f.msg.action="focus";f.msg.type="tip";f.msg.code="E02";f.fire()}},blur:function(){i.value=f.rule.reNullChar(i.value);f.msg.action="focus";d();f.fire()}};var f=c.common.setting.control(i,h,{evtAct:g,check:d});var e=c.core.obj.sup(f,["initPars"]);f.initPars=function(){e.initPars();f.errText=a;f.type="realname"};f.pars.auto&&f.init();return f}});STK.register("common.setting.abroadname",function(c){var b=c.kit.extra.language;var a={E01:"",E02:b("#L{您的真实姓名仅用于身份验证，新浪将严格保密，请放心填写}"),E03:b("#L{请输入姓名}"),E04:b("#L{请输入正确的姓名}")};return function(i,h){var d=function(){var k=f.value(),j=false;if(!f.pars.must&&f.rule.isEmpty(k)){f.msg.state=true;f.msg.type="empty";f.msg.code="E01";return}if(!j&&f.rule.isEmpty(k)){j=true;f.msg.type="err";f.msg.code="E03"}if(!j&&(!f.rule.isAbroadName(k)||!f.rule.lenLimit(k,1,30))){j=true;f.msg.type="err";f.msg.code="E04"}if(!j){f.msg.state=true;f.msg.type="ok";f.msg.code="E01"}else{f.msg.state=false}};var g={focus:function(){f.cache_value=f.value();if(f.rule.isEmpty(f.cache_value)){f.msg.state=false;f.msg.action="focus";f.msg.type="tip";f.msg.code="E02";f.fire()}},blur:function(){i.value=f.rule.reNullChar(i.value);f.msg.action="focus";d();f.fire()}};var f=c.common.setting.control(i,h,{evtAct:g,check:d});var e=c.core.obj.sup(f,["initPars"]);f.initPars=function(){e.initPars();f.errText=a;f.type="abroadname"};f.pars.auto&&f.init();return f}});STK.register("common.setting.idnumber",function(c){var b=c.kit.extra.language;var a={E01:"",E02:b("#L{身份证号码是找回密码的重要凭证，新浪不会透露给任何人，请放心填写}"),E03:b("#L{请输入身份证号}"),E04:b("#L{请输入15位或18位数字（含X）}")};return function(i,h){var d=function(){var k=f.value(),j=false;if(!f.pars.must&&f.rule.isEmpty(k)){f.msg.state=true;f.msg.type="empty";f.msg.code="E01";return}if(!j&&f.rule.isEmpty(k)){j=true;f.msg.type="err";f.msg.code="E03"}if(!j&&!f.rule.isIDNumber(k)){j=true;f.msg.type="err";f.msg.code="E04"}if(!j){f.msg.state=true;f.msg.type="ok";f.msg.code="E01"}else{f.msg.state=false}};var g={focus:function(){f.cache_value=f.value();if(f.rule.isEmpty(f.cache_value)){f.msg.state=false;f.msg.action="focus";f.msg.type="tip";f.msg.code="E02";f.fire()}},blur:function(){i.value=f.rule.reNullChar(i.value);f.msg.action="focus";d();f.fire()}};var f=c.common.setting.control(i,h,{evtAct:g,check:d});var e=c.core.obj.sup(f,["initPars"]);f.initPars=function(){e.initPars();f.errText=a;f.type="idnumber"};f.pars.auto&&f.init();return f}});STK.register("common.setting.verifycode",function(c){var b=c.kit.extra.language;var a={E01:"",E02:b("#L{请输入验证码}")};return function(i,h){var d=function(){var k=f.value().replace(/^\s+|\s+$/g,""),j=false;if(!f.pars.must&&f.rule.isEmpty(k)){f.msg.state=true;f.msg.type="empty";f.msg.code="E01";return}if(!j&&f.rule.isEmpty(k)){j=true;f.msg.type="err";f.msg.code="E02"}if(!j){f.msg.state=true;f.msg.type="ok";f.msg.code="E01"}else{f.msg.state=false}};var g={focus:function(){f.cache_value=f.value();if(f.rule.isEmpty(f.cache_value)){f.msg.state=false;f.msg.action="focus";f.msg.type="tip";f.msg.code="E02";f.fire()}},blur:function(){i.value=f.rule.reNullChar(i.value);f.msg.action="focus";d();f.fire()}};var f=c.common.setting.control(i,h,{evtAct:g,check:d});var e=c.core.obj.sup(f,["initPars"]);f.initPars=function(){e.initPars();f.errText=a;f.type="verifycode"};f.pars.auto&&f.init();return f}});STK.register("common.setting.passport",function(c){var b=c.kit.extra.language;var a={E01:"",E02:b("#L{证件号码是找回密码的重要凭证，新浪不会透露给任何人，请放心填写}"),E03:b("#L{请输入你的护照号码}"),E04:b("#L{请输入正确的护照号码}")};return function(i,h){var d=function(){var k=f.value(),j=false;if(!f.pars.must&&f.rule.isEmpty(k)){f.msg.state=true;f.msg.type="empty";f.msg.code="E01";return}if(!j&&f.rule.isEmpty(k)){j=true;f.msg.type="err";f.msg.code="E03"}if(!j&&!f.rule.isPassportID(k)){j=true;f.msg.type="err";f.msg.code="E04"}if(!j&&!f.rule.isPassportID(k)){j=true;f.msg.type="err";f.msg.code="E04"}if(!j){f.msg.state=true;f.msg.type="ok";f.msg.code="E01"}else{f.msg.state=false}};var g={focus:function(){f.cache_value=f.value();if(f.rule.isEmpty(f.cache_value)){f.msg.state=false;f.msg.action="focus";f.msg.type="tip";f.msg.code="E02";f.fire()}},blur:function(){i.value=f.rule.reNullChar(i.value);f.msg.action="focus";d();f.fire()}};var f=c.common.setting.control(i,h,{evtAct:g,check:d});var e=c.core.obj.sup(f,["initPars"]);f.initPars=function(){e.initPars();f.errText=a;f.type="passport"};f.pars.auto&&f.init();return f}});STK.register("comp.account.templateForm",function(c){var b=c.kit.extra.language;var a={formTips:["<#et createGuide data>",'<#if (data.type=="empty")></#if>','<#if (data.type=="tip")>','<p class="notice"><span class="icon_warnS"></span>${data.msg}</p>',"</#if>",'<#if (data.type=="err")>','<p class="error"><span class="icon_delS"></span>${data.msg}</p>',"</#if>",'<#if (data.type=="loading")>','<p class="notice"><span class="loading"></span></p>',"</#if>",'<#if (data.type=="warn")>','<p class="notice"><span class="icon_warnS"></span>${data.msg}</p>',"</#if>",'<#if (data.type=="ok")>','<span class="icon_succ"></span>',"</#if>",'<#if (data.type=="power0")>','<p class="notice"><span class="color_week">#L{弱}：</span>${data.msg}</p>',"</#if>",'<#if (data.type=="power1")>','<p class="notice"><span class="color_middle">#L{中}：</span>${data.msg}</p>',"</#if>",'<#if (data.type=="power2")>','<p class="notice"><span class="color_strong">#L{强}：</span>${data.msg}</p>',"</#if>","</#et>"].join(""),nickRecommend:["<#et userlist data>","<#list data as item>",'<label for="${item.id}" action-type="selected_nickname" action-data="name=${item.name}"><input type="radio" class="W_radio" value="" name="nickRecommend" id="${item.id}">${item.name}</label>',"</#list>","</#et>"].join("")};return function(e,f){var d=c.parseParam({isEasy:true,data:{}},f);if(d.isEasy){return b(c.core.util.easyTemplate(a[e],d.data||{}).toString())}else{return b(a[e])}}});STK.register("common.extra.keyboardCapture",function(a){var b={13:"enter",27:"esc",38:"up",40:"down",9:"tab"};return function(h,g){var f={},c;var e={keydown:function(j){var l,i;if(!(l=j)||!(i=l.keyCode)){return}b[i]&&a.custEvent.fire(f,b[i])}};var d={init:function(){d.pars();d.bind()},pars:function(){},bind:function(){for(var i in e){a.addEvent(h,i,e[i])}},getKey:function(i){return b[i]},destroy:function(){for(var i in e){a.removeEvent(h,i,e[i])}}};d.init();f.getKey=d.getKey;f.destroy=d.destroy;return f}});STK.register("kit.extra.textareaUtils",function(c){var a={},b=document.selection;a.selectionStart=function(f){if(!b){try{return f.selectionStart}catch(j){return 0}}var k=b.createRange(),i,d,h=0;var g=document.body.createTextRange();try{g.moveToElementText(f)}catch(j){}for(h;g.compareEndPoints("StartToStart",k)<0;h++){g.moveStart("character",1)}return h};a.selectionBefore=function(d){return d.value.slice(0,a.selectionStart(d))};a.selectText=function(d,e,f){d.focus();if(!b){d.setSelectionRange(e,f);return}var g=d.createTextRange();g.collapse(1);g.moveStart("character",e);g.moveEnd("character",f-e);g.select()};a.insertText=function(f,e,h,g){f.focus();g=g||0;if(!b){var i=f.value,k=h-g,d=k+e.length;f.value=i.slice(0,k)+e+i.slice(h,i.length);a.selectText(f,d,d);return}var j=b.createRange();j.moveStart("character",-g);j.text=e};a.replaceText=function(g,e){g.focus();var h=g.value;var k=a.getSelectedText(g);var f=k.length;if(k.length==0){a.insertText(g,e,a.getCursorPos(g))}else{var j=a.getCursorPos(g);if(b){var i=b.createRange();i.text=e;a.setCursor(g,j+e.length)}else{var d=j+k.length;g.value=h.slice(0,j)+e+h.slice(j+f,h.length);a.setCursor(g,j+e.length);return}}};a.getCursorPos=function(g){var f=0;if(STK.core.util.browser.IE){g.focus();var d=null;d=b.createRange();var e=d.duplicate();e.moveToElementText(g);e.setEndPoint("EndToEnd",d);g.selectionStart=e.text.length-d.text.length;g.selectionEnd=g.selectionStart+d.text.length;f=g.selectionStart}else{if(g.selectionStart||g.selectionStart=="0"){f=g.selectionStart}}return f};a.getSelectedText=function(e){var f="";var d=function(g){if(g.selectionStart!=undefined&&g.selectionEnd!=undefined){return g.value.substring(g.selectionStart,g.selectionEnd)}else{return""}};if(window.getSelection){f=d(e)}else{f=b.createRange().text}return f};a.setCursor=function(f,g,e){g=g==null?f.value.length:g;e=e==null?0:e;f.focus();if(f.createTextRange){var d=f.createTextRange();d.move("character",g);d.moveEnd("character",e);d.select()}else{f.setSelectionRange(g,g+e)}};a.unCoverInsertText=function(g,i,f){f=(f==null)?{}:f;f.rcs=f.rcs==null?g.value.length:f.rcs*1;f.rccl=f.rccl==null?0:f.rccl*1;var h=g.value,d=h.slice(0,f.rcs),e=h.slice(f.rcs+f.rccl,h==""?0:h.length);g.value=d+i+e;this.setCursor(g,f.rcs+(i==null?0:i.length))};return a});STK.register("common.layer.emailAutocomplete",function(g){var b=g.kit.extra.textareaUtils,f=g.kit.extra.language;var a=["126.com","139.com","163.com","189.cn","gmail.com","hotmail.com","qq.com","sina.cn","sina.com","sohu.com","vip.sina.com","wo.com.cn","yahoo.cn","yahoo.com.cn"];var e={panel:['<div node-type="layer" class="layer_menu_list" style="display:none;">','<ul><li class="note">#L{请选择邮箱类型}</li></ul>','<ul node-type="panel"></ul>',"</div>"].join(""),item:["<#et userlist data>","<#list data.data as item>",'<li action-type="item" action-data="value=${data.key}@${item}" ><a href="#">${data.key}@${item}</a></li>',"</#list>","</#et>"].join("")};var d=["enter","esc","up","down"];var c={};return function(t,h){var m,j,u,p,o,i;var k={get:function(A){var z=A.split("@");var x=z.length;if(x==2){var y=z[1].toLowerCase();if(!!y&&!/^[0-9a-z]+[0-9a-z-.]*$/.test(y)){return null}if(y){!c[y]&&k.run(y);return c[y]}else{return a}}return null},run:function(x){var y=new RegExp("^"+x+"");c[x]=[];for(var z in a){z=a[z];!!y.exec(z)&&c[x].push(z)}}};var n;var l={build:function(){var x=g.builder(f(m.template.panel));layer=x.list.layer[0];j=x.list.panel[0];document.body.appendChild(x.box)},show:function(){var z=g.core.dom.position(t);var x=g.core.dom.getSize(t);var y=["position:absolute","display:inline-block","z-index:10000","left:"+z.l+"px","top:"+(z.t+x.height)+"px"];layer.style.cssText=y.join(";")},hide:function(){setTimeout(function(){layer.style.display="none"},300)},refresh:function(x,z,y){j.innerHTML=g.core.util.easyTemplate(m.template.item,{key:encodeURIComponent(x),domain:z,data:y}).toString()},indexChange:function(A){var x=i.length;if(x<1){return}var z=g.sizzle("li.cur",j)[0];if(z){n=g.core.dom[A>0?"next":"prev"](z);if(n){g.removeClassName(z,"cur")}}else{var y=g.sizzle("li",j);n=g.sizzle("li",j)[0]}g.addClassName(n,"cur")}};var w={enter:function(){var x=g.queryToJson(n.getAttribute("action-data"));t.value=x.value;t.blur();b.setCursor(t)},esc:function(){v.hide()},up:function(){l.indexChange(-1)},down:function(){l.indexChange(1)}};var s={focus:function(){v.show()},blur:function(){v.hide()},keyup:function(y){var x=y.keyCode;if(!w[p.getKey(x)]&&!u){u=setTimeout(function(){v.show();clearTimeout(u);u=null},500)}}};var r={mousedown:{item:function(x){t.value=x.data.value}},click:{item:function(x){g.preventDefault();b.setCursor(t);v.hide()}}};var v={init:function(){if(!t){throw"input is undefined"}v.pars();v.build();v.bind()},pars:function(){m=g.parseParam({template:e},h)},build:function(){l.build();p=g.common.extra.keyboardCapture(t)},bind:function(){g.custEvent.define(p,d);for(var A=0,x=d.length;A<x;A++){g.custEvent.add(p,d[A],w[d[A]])}for(var z in s){g.addEvent(t,z,s[z])}o=g.delegatedEvent(j);for(var z in r){var B=r[z];for(var y in B){o.add(y,z,B[y])}}},show:function(){i=k.get(t.value);var z=t.value.split("@");var x=z[0],y=z[1];if(i&&i[0]&&/^[0-9a-z_][_.0-9a-z-]{0,31}$/.test(x)){if(i.length==1&&y==i[0]){return}l.refresh(x,y,i);l.show()}else{l.hide()}},hide:function(){l.hide()},destroy:function(){for(var x in s){g.removeEvent(t,x,s[x])}g.custEvent.undefine(p,d);o.destroy();p.destroy()}};v.init();var q={};q.show=v.show;q.hide=v.hide;q.destroy=v.destroy;return q}});STK.register("kit.extra.reuse",function(a){return function(e,j){var i,h,b;i=a.parseParam({},j);b=[];var f=function(){var k=e();b.push({store:k,used:true});return k};var g=function(k){a.foreach(b,function(m,l){if(k===m.store){m.used=true;return false}})};var d=function(k){a.foreach(b,function(m,l){if(k===m.store){m.used=false;return false}})};var c=function(){for(var l=0,k=b.length;l<k;l+=1){if(b[l]["used"]===false){b[l]["used"]=true;return b[l]["store"]}}return f()};h={};h.setUsed=g;h.setUnused=d;h.getOne=c;h.getLength=function(){return b.length};return h}});STK.register("ui.mod.layer",function(b){var c=function(e){var d={};if(e.style.display=="none"){e.style.visibility="hidden";e.style.display="";d.w=e.offsetWidth;d.h=e.offsetHeight;e.style.display="none";e.style.visibility="visible"}else{d.w=e.offsetWidth;d.h=e.offsetHeight}return d};var a=function(g,f){f=f||"topleft";var e=null;if(g.style.display=="none"){g.style.visibility="hidden";g.style.display="";e=b.core.dom.position(g);g.style.display="none";g.style.visibility="visible"}else{e=b.core.dom.position(g)}if(f!=="topleft"){var d=c(g);if(f==="topright"){e.l=e.l+d.w}else{if(f==="bottomleft"){e.t=e.t+d.h}else{if(f==="bottomright"){e.l=e.l+d.w;e.t=e.t+d.h}}}}return e};return function(h){var k=b.core.dom.builder(h);var g=k.list.outer[0],e=k.list.inner[0];var j=b.core.dom.uniqueID(g);var i={};var d=b.core.evt.custEvent.define(i,"show");b.core.evt.custEvent.define(d,"hide");var f=null;i.show=function(){g.style.display="";b.core.evt.custEvent.fire(d,"show");return i};i.hide=function(){g.style.display="none";b.custEvent.fire(d,"hide");return i};i.getPosition=function(l){return a(g,l)};i.getSize=function(l){if(l||!f){f=c.apply(i,[g])}return f};i.html=function(l){if(l!==undefined){e.innerHTML=l}return e.innerHTML};i.text=function(l){if(l!==undefined){e.innerHTML=b.core.str.encodeHTML(l)}return b.core.str.decodeHTML(e.innerHTML)};i.appendChild=function(l){e.appendChild(l);return i};i.getUniqueID=function(){return j};i.getOuter=function(){return g};i.getInner=function(){return e};i.getParentNode=function(){return g.parentNode};i.getDomList=function(){return k.list};i.getDomListByKey=function(l){return k.list[l]};i.getDom=function(m,l){if(!k.list[m]){return false}return k.list[m][l||0]};i.getCascadeDom=function(m,l){if(!k.list[m]){return false}return b.core.dom.cascadeNode(k.list[m][l||0])};return i}});STK.register("ui.mod.dialog",function(a){return function(n,o){if(!n){throw"ui.mod.dialog need template as first parameter"}var k,g,h,f,l,j,q,i,b,c,m,e;b=true;var d=function(){if(b!==false){g.hide()}};var p=function(){k=a.parseParam({t:null,l:null,width:null,height:null},o);g=a.ui.mod.layer(n,k);f=g.getOuter();l=g.getDom("title");i=g.getDom("title_content");j=g.getDom("inner");q=g.getDom("close");a.addEvent(q,"click",function(r){a.preventDefault(r);m();return false});a.custEvent.add(g,"show",function(){a.hotKey.add(document.documentElement,["esc"],d,{type:"keyup",disableInInput:true})});a.custEvent.add(g,"hide",function(){a.hotKey.remove(document.documentElement,["esc"],d,{type:"keyup"});b=true})};p();e=a.objSup(g,["show","hide"]);m=function(r){if(typeof c==="function"&&!r){if(c()===false){return false}}e.hide();if(a.contains(document.body,g.getOuter())){document.body.removeChild(g.getOuter())}return h};h=g;h.show=function(){if(!a.contains(document.body,g.getOuter())){document.body.appendChild(g.getOuter())}e.show();return h};h.hide=m;h.setPosition=function(r){f.style.top=r.t+"px";f.style.left=r.l+"px";return h};h.setMiddle=function(){var s=a.core.util.winSize();var t=g.getSize(true);var r=a.core.util.scrollPos()["top"]+(s.height-t.h)/2;f.style.top=(r>0?r:0)+"px";f.style.left=(s.width-t.w)/2+"px";return h};h.setTitle=function(r){i.innerHTML=r;return h};h.setContent=function(r){if(typeof r==="string"){j.innerHTML=r}else{j.appendChild(r)}return h};h.clearContent=function(){while(j.children.length){a.removeNode(j.children[0])}return h};h.setAlign=function(){};h.setBeforeHideFn=function(r){c=r};h.clearBeforeHideFn=function(){c=null};h.unsupportEsc=function(){b=false};h.supportEsc=function(){b=true};return h}});STK.register("kit.dom.fix",function(d){var a=!(d.core.util.browser.IE6||(document.compatMode!=="CSS1Compat"&&STK.IE)),b=/^(c)|(lt)|(lb)|(rt)|(rb)$/;function c(g){return d.core.dom.getStyle(g,"display")!="none"}function e(h){h=d.core.arr.isArray(h)?h:[0,0];for(var g=0;g<2;g++){if(typeof h[g]!="number"){h[g]=0}}return h}function f(j,r,m){if(!c(j)){return}var q="fixed",t,u,g,p,k=j.offsetWidth,l=j.offsetHeight,n=d.core.util.winSize(),o=0,s=0,h=d.core.dom.cssText(j.style.cssText);if(!a){q="absolute";var i=d.core.util.scrollPos();o=t=i.top;s=u=i.left;switch(r){case"lt":t+=m[1];u+=m[0];break;case"lb":t+=n.height-l-m[1];u+=m[0];break;case"rt":t+=m[1];u+=n.width-k-m[0];break;case"rb":t+=n.height-l-m[1];u+=n.width-k-m[0];break;case"c":default:t+=(n.height-l)/2+m[1];u+=(n.width-k)/2+m[0]}g=p=""}else{t=p=m[1];u=g=m[0];switch(r){case"lt":p=g="";break;case"lb":t=g="";break;case"rt":u=p="";break;case"rb":t=u="";break;case"c":default:t=(n.height-l)/2+m[1];u=(n.width-k)/2+m[0];p=g=""}}if(r=="c"){if(t<o){t=o}if(u<s){u=s}}h.push("position",q).push("top",t+"px").push("left",u+"px").push("right",g+"px").push("bottom",p+"px");j.style.cssText=h.getCss()}return function(h,n,i){var j,o,k=true,g;if(d.core.dom.isNode(h)&&b.test(n)){var l={getNode:function(){return h},isFixed:function(){return k},setFixed:function(p){(k=!!p)&&f(h,j,o);return this},setAlign:function(p,q){if(b.test(p)){j=p;o=e(q);k&&f(h,j,o)}return this},destroy:function(){if(!a){a&&d.core.evt.removeEvent(window,"scroll",m)}d.core.evt.removeEvent(window,"resize",m);d.core.evt.custEvent.undefine(g)}};g=d.core.evt.custEvent.define(l,"beforeFix");l.setAlign(n,i);function m(p){p=p||window.event;d.core.evt.custEvent.fire(g,"beforeFix",p.type);if(k&&(!a||j=="c")){f(h,j,o)}}if(!a){d.core.evt.addEvent(window,"scroll",m)}d.core.evt.addEvent(window,"resize",m);return l}}});STK.register("ui.mask",function(e){var k,c=[],b,j=false,a="STK-Mask-Key";var g=e.core.dom.setStyle,i=e.core.dom.getStyle,h=e.core.evt.custEvent;function d(){k=e.C("div");var m='<div node-type="outer">';if(e.core.util.browser.IE6){m+='<div style="position:absolute;width:100%;height:100%;"></div>'}m+="</div>";k=e.builder(m).list.outer[0];document.body.appendChild(k);j=true;b=e.kit.dom.fix(k,"lt");var n=function(){var o=e.core.util.winSize();k.style.cssText=e.core.dom.cssText(k.style.cssText).push("width",o.width+"px").push("height",o.height+"px").getCss()};h.add(b,"beforeFix",n);n()}function l(m){var n;if(!(n=m.getAttribute(a))){m.setAttribute(a,n=e.getUniqueKey())}return">"+m.tagName.toLowerCase()+"["+a+'="'+n+'"]'}var f={getNode:function(){return k},show:function(n,m){if(j){n=e.core.obj.parseParam({opacity:0.3,background:"#000000"},n);k.style.background=n.background;g(k,"opacity",n.opacity);k.style.display="";b.setAlign("lt");m&&m()}else{d();f.show(n,m)}return f},hide:function(){k.style.display="none";c=[];return f},showUnderNode:function(n,m){if(e.isNode(n)){f.show(m,function(){g(k,"zIndex",i(n,"zIndex"));var p=l(n);var o=e.core.arr.indexOf(c,p);if(o!=-1){c.splice(o,1)}c.push(p);e.core.dom.insertElement(n,k,"beforebegin")})}return f},back:function(){if(c.length<1){return f}var n,m;c.pop();if(c.length<1){f.hide()}else{if((m=c[c.length-1])&&(n=e.sizzle(m,document.body)[0])){g(k,"zIndex",i(n,"zIndex"));e.core.dom.insertElement(n,k,"beforebegin")}else{f.back()}}return f},destroy:function(){h.remove(b);k.style.display="none"}};return f});STK.register("kit.dom.drag",function(a){return function(d,p){var h,g,n,l,c,k,e,i;var q=function(){f();j()};var f=function(){h=a.parseParam({moveDom:d,perchStyle:"border:solid #999999 2px;",dragtype:"perch",actObj:{},pagePadding:5},p);n=h.moveDom;g={};l={};c=a.drag(d,{actObj:h.actObj});if(h.dragtype==="perch"){k=a.C("div");e=false;i=false;n=k}d.style.cursor="move"};var j=function(){a.custEvent.add(h.actObj,"dragStart",m);a.custEvent.add(h.actObj,"dragEnd",b);a.custEvent.add(h.actObj,"draging",o)};var m=function(r,u){document.body.style.cursor="move";var t=a.core.util.pageSize()["page"];l=a.core.dom.position(h.moveDom);l.pageX=u.pageX;l.pageY=u.pageY;l.height=h.moveDom.offsetHeight;l.width=h.moveDom.offsetWidth;l.pageHeight=t.height;l.pageWidth=t.width;if(h.dragtype==="perch"){var s=[];s.push(h.perchStyle);s.push("position:absolute");s.push("z-index:"+(h.moveDom.style.zIndex+10));s.push("width:"+h.moveDom.offsetWidth+"px");s.push("height:"+h.moveDom.offsetHeight+"px");s.push("left:"+l.l+"px");s.push("top:"+l.t+"px");k.style.cssText=s.join(";");i=true;setTimeout(function(){if(i){document.body.appendChild(k);e=true}},100)}if(d.setCapture!==undefined){d.setCapture()}};var b=function(r,s){document.body.style.cursor="auto";if(d.setCapture!==undefined){d.releaseCapture()}if(h.dragtype==="perch"){i=false;h.moveDom.style.top=k.style.top;h.moveDom.style.left=k.style.left;if(e){document.body.removeChild(k);e=false}}};var o=function(B,t){var w=l.t+(t.pageY-l.pageY);var A=l.l+(t.pageX-l.pageX);var z=w+l.height;var s=A+l.width;var u=l.pageHeight-h.pagePadding;var r=l.pageWidth-h.pagePadding;if(z<u&&w>0){n.style.top=w+"px"}else{var v;if(z>=u){v=u-l.height}if(w<0||v<0){v=0}n.style.top=v+"px"}if(s<r&&A>0){n.style.left=A+"px"}else{if(A<0){n.style.left="0px"}if(s>=r){n.style.left=r-l.width+"px"}}};q();g.destroy=function(){document.body.style.cursor="auto";if(typeof n.setCapture==="function"){n.releaseCapture()}if(h.dragtype==="perch"){i=false;if(e){document.body.removeChild(k);e=false}}a.custEvent.remove(h.actObj,"dragStart",m);a.custEvent.remove(h.actObj,"dragEnd",b);a.custEvent.remove(h.actObj,"draging",o);if(c.destroy){c.destroy()}h=null;n=null;l=null;c=null;k=null;e=null;i=null};g.getActObj=function(){return h.actObj};return g}});STK.register("ui.dialog",function(e){var d='<div class="W_layer" node-type="outer" style="display:none;position:absolute;z-index:10001"><div class="bg"><table border="0" cellspacing="0" cellpadding="0"><tr><td><div class="content" node-type="layoutContent"><div class="title" node-type="title"><span node-type="title_content"></span></div><a href="javascript:void(0);" class="W_close" title="#L{关闭}" node-type="close"></a><div node-type="inner"></div></div></td></tr></table></div></div>';var f=e.kit.extra.language;var b=null,c;var a=function(){var h=e.ui.mod.dialog(f(c.template));e.custEvent.add(h,"show",function(){e.ui.mask.showUnderNode(h.getOuter())});e.custEvent.add(h,"hide",function(){e.ui.mask.back();h.setMiddle()});e.kit.dom.drag(h.getDom("title"),{actObj:h,moveDom:h.getOuter()});h.destroy=function(){g(h);try{h.hide(true)}catch(i){}};return h};var g=function(h){h.setTitle("").clearContent();b.setUnused(h)};return function(h){c=e.parseParam({template:d,isHold:false},h);var j=c.isHold;c=e.core.obj.cut(c,["isHold"]);if(!b){b=e.kit.extra.reuse(a)}var i=b.getOne();if(!j){e.custEvent.add(i,"hide",function(){e.custEvent.remove(i,"hide",arguments.callee);g(i)})}return i}});STK.register("ui.alert",function(d){var c='<div node-type="outer" class="layer_point"><dl class="point clearfix"><dt><span class="" node-type="icon"></span></dt><dd node-type="inner"><p class="S_txt1" node-type="textLarge"></p><p class="S_txt2" node-type="textSmall"></p></dd></dl><div class="btn"><a href="javascript:void(0)" class="W_btn_d" node-type="OK"></a></div></div>';var f={success:"icon_succM",error:"icon_errorM",warn:"icon_warnM","delete":"icon_delM",question:"icon_questionM"};var e=d.kit.extra.language;var b=null;var a=function(h,g){h.getDom("icon").className=g.icon;h.getDom("textLarge").innerHTML=g.textLarge;h.getDom("textSmall").innerHTML=g.textSmall;h.getDom("OK").innerHTML="<span>"+g.OKText+"</span>"};return function(m,h){var i,k,l,n,g;i=d.parseParam({title:e("#L{提示}"),icon:"warn",textLarge:m,textSmall:"",OK:d.funcEmpty,OKText:e("#L{确定}"),timeout:0},h);i.icon=f[i.icon];k={};if(!b){b=d.kit.extra.reuse(function(){var o=d.ui.mod.layer(e(c));return o})}l=b.getOne();n=d.ui.dialog();n.setContent(l.getOuter());n.setTitle(i.title);a(l,i);var j=function(o){d.preventDefault(o);n.hide()};d.addEvent(l.getDom("OK"),"click",j);d.custEvent.add(n,"hide",function(){d.custEvent.remove(n,"hide",arguments.callee);d.removeEvent(l.getDom("OK"),"click",j);b.setUnused(l);clearTimeout(g);i.OK()});if(i.timeout){g=setTimeout(n.hide,i.timeout)}n.show().setMiddle();k.alt=l;k.dia=n;return k}});STK.register("ui.confirm",function(c){var b='<div node-type="outer" class="layer_point"><dl class="point clearfix"><dt><span class="" node-type="icon"></span></dt><dd node-type="inner"><p class="S_txt1" node-type="textLarge"></p><p class="S_txt2" node-type="textComplex"></p><p class="S_txt2" node-type="textSmall"></p></dd></dl><div class="btn"><a href="javascript:void(0)" class="W_btn_d" node-type="OK"></a><a href="javascript:void(0)" class="W_btn_b" node-type="cancel"></a></div></div>';var e={success:"icon_succM",error:"icon_errorM",warn:"icon_warnM","delete":"icon_delM",question:"icon_questionM"};var d=c.kit.extra.language;var a=null;return function(g,m){var l,k,h,n,j,f;l=c.parseParam({title:d("#L{提示}"),icon:"question",textLarge:g,textComplex:"",textSmall:"",OK:c.funcEmpty,OKText:d("#L{确定}"),cancel:c.funcEmpty,cancelText:d("#L{取消}")},m);l.icon=e[l.icon];k={};if(!a){a=c.kit.extra.reuse(function(){var o=c.ui.mod.layer(b);return o})}h=a.getOne();n=c.ui.dialog();n.setContent(h.getOuter());h.getDom("icon").className=l.icon;h.getDom("textLarge").innerHTML=l.textLarge;h.getDom("textComplex").innerHTML=l.textComplex;h.getDom("textSmall").innerHTML=l.textSmall;h.getDom("OK").innerHTML="<span>"+l.OKText+"</span>";h.getDom("cancel").innerHTML="<span>"+l.cancelText+"</span>";n.setTitle(l.title);var i=function(){j=true;f=c.htmlToJson(h.getDom("textComplex"));n.hide()};c.addEvent(h.getDom("OK"),"click",i);c.addEvent(h.getDom("cancel"),"click",n.hide);c.custEvent.add(n,"hide",function(){c.custEvent.remove(n,"hide",arguments.callee);c.removeEvent(h.getDom("OK"),"click",i);c.removeEvent(h.getDom("cancel"),"click",n.hide);a.setUnused(h);if(j){l.OK(f)}else{l.cancel(f)}});n.show().setMiddle();k.cfm=h;k.dia=n;return k}});STK.register("kit.io.cssLoader",function(d){var b="";var a="http://img.t.sinajs.cn/t4/";var e="http://timg.sjs.sinajs.cn/t4/";if(typeof $CONFIG!="undefined"){a=$CONFIG.cssPath||a;b=$CONFIG.version||""}var c={};return function(g,l,i,j,p){j=j||b;i=i||function(){};var o=function(t,r){var s=c[t]||(c[t]={loaded:false,list:[]});if(s.loaded){r(t);return false}s.list.push(r);if(s.list.length>1){return false}return true};var k=function(s){var r=c[s].list;for(var t=0;t<r.length;t++){r[t](s)}c[s].loaded=true;delete c[s].list};if(!o(g,i)){return}var n;if(p){n=e+g}else{n=a+g+"?version="+j}var m=d.C("link");m.setAttribute("rel","Stylesheet");m.setAttribute("type","text/css");m.setAttribute("charset","utf-8");m.setAttribute("href",n);document.getElementsByTagName("head")[0].appendChild(m);var f=d.C("div");f.id=l;d.core.util.hideContainer.appendChild(f);var q=3000;var h=function(){if(parseInt(d.core.dom.getStyle(f,"height"))==42){d.core.util.hideContainer.removeChild(f);k(g);return}if(--q>0){setTimeout(h,10)}else{d.log(g+"timeout!");d.core.util.hideContainer.removeChild(f);delete c[g]}};setTimeout(h,50)}});STK.register("common.dialog.authentication",function(a){return function(d){var b=a.kit.extra.language,g=a.core.util.browser;d=a.parseParam({src:"http://account.weibo.com/sguide/identity/iframe?from=home_verification",icon:"warn",isHold:true,width:"455px",height:"180px",title:b("#L{提示}")},d||{});var f={},h,c,i=false;var e="tblog_checkfailed_reform";var j={init:function(){!(g.IE6||g.IE7)&&(window.document.domain="weibo.com");h=a.ui.dialog(d);var m=[];m.push('<div class="layer_point layer_check_identity">');m.push('<dl class="point clearfix">');m.push('	<dt><span class="icon_warnM"></span></dt>');m.push('	<dd><p class="S_txt1">');m.push(b("#L{您的身份信息尚未验证通过，请尽快验证。完成验证后，可以使用全部微博功能，您的账号也将更加安全。}"));m.push('<a suda-data="key=tblog_checkfailed_reform&value=checkfailed_readonly" class="S_spetxt" href="http://weibo.com">');m.push(b("#L{先体验微博，稍候再验证}"));m.push("</a>");m.push("</p></dd></dl>");m.push('<iframe id="account_authentication" name="account_authentication" node-type="frame" width="'+d.width+'" height="'+d.height+'" allowtransparency="true" scrolling="no" frameborder="0" src=""></iframe>');m.push("</div>");var l=a.builder(m.join(""));h.setTitle(d.title);h.setContent(l.box);var k=h.getDomList();a.addEvent(k.close[0],"click",function(){history.go(0)})},show:function(){try{SUDA.uaTrack&&SUDA.uaTrack(e,"checkfailed_box")}catch(l){}if(!i){a.kit.io.cssLoader("style/css/module/layer/layer_check_identity.css","js_style_css_module_layer_check_identity",function(){i=true})}h.show().setMiddle();c=a.E("account_authentication");var k=decodeURIComponent(d.src)+"&rnd=";if(c.attachEvent){c.attachEvent("onload",function(){c.height=d.height;h.setMiddle()})}else{c.onload=function(){c.height=d.height;h.setMiddle()}}c.src=k+a.core.util.getUniqueKey()},destroy:function(){},hook:function(k,m){try{if(k=="100000"){j.verifySucc()}else{j.verifyFail()}}catch(l){}},verifySucc:function(){SUDA.uaTrack&&SUDA.uaTrack(e,"checkfailed_success");h.hide();var k={title:b("#L{提示}"),icon:"success",OK:function(){SUDA.uaTrack&&SUDA.uaTrack(e,"checkfailed_play");history.go(0)},OKText:b("#L{进入首页}"),msg:b("#L{恭喜，您的身份已验证成功，马上进入新浪微博。}")};var l=a.ui.alert(k.msg,k);a.custEvent.add(l,"hide",function(){history.go(0)})},verifyFail:function(){SUDA.uaTrack&&SUDA.uaTrack(e,"checkfailed_twotimes");h.hide();var k={title:b("#L{提示}"),icon:"warn",OK:function(){SUDA.uaTrack&&SUDA.uaTrack(e,"checkfailed_triple");j.show()},OKText:b("#L{再次验证}"),msg:b("#L{抱歉，您的身份信息不准确，请再次验证。<br/>}")+'<a class="S_spetxt" suda-data="key=tblog_checkfailed_reform&value=checkfailed_havealook" href="http://weibo.com">'+b("#L{您也可以先体验微博，随后再验证身份信息>>}")+"</a>"};var l=a.ui.alert(k.msg,k);a.custEvent.add(l,"hide",function(){history.go(0)})}};j.init();f.destroy=j.destory;f.show=j.show;window.App=window.App||{};window.App["checkRealName"]=j.hook;return f}});STK.register("common.layer.ioError",function(b){var c=b.kit.extra.language;var a;return function(e,l,d){var h={},g,f,j=function(){};var k={init:function(){k.data()},data:function(){g=b.parseParam({location:"",icon:"warn",title:c("#L{提示}"),OKText:c("#L{确 定}"),cancelText:c("#L{取 消}"),suda:""},l.data);g.msg=l.msg||c("#L{系统繁忙}");f=b.parseParam({auto:true,call:j,ok:j,cancel:j},d);g.OK=function(){b.preventDefault();var m=b.queryToJson(json.data.suda||"");m=m.ok||{};SUDA.uaTrack&&m.key&&SUDA.uaTrack(m.key,m.value);f.ok();g.location&&(window.location.href=g.location)};g.cancel=function(){b.preventDefault();var m=b.queryToJson(json.data.suda||"");m=m.cancel||{};SUDA.uaTrack&&m.key&&SUDA.uaTrack(m.key,m.value);f.cancel()}},run:function(){var m=i[l.code]||i["100001"];return m()||f.call(g,l)},destroy:function(){a&&a.destroy()}};var i={100001:function(){b.ui.alert(g.msg,g)},100002:function(){window.location.reload()},100003:function(){!a&&(a=b.common.dialog.authentication());a.show()},100004:function(){b.ui.confirm(g.msg,g)}};k.init();h.getdata=function(){return g};h.getAction=function(m){return m?i[m]:i};h.getCode=function(){return l.code||""};h.run=k.run;f.auto&&k.run();return h}});STK.register("common.dialog.loginLayer",function(c){var d="http://tjs.sjs.sinajs.cn/t4/",a;var b=d+"home/js/public/topLogin.js?version=201204091020";return function(e){var f=function(){var g=c.sizzle('[node-type="registUrl"]');if(g.length>0){g[0].href=($CONFIG&&$CONFIG.currentUrl)||"http://weibo.com/signup/signup.php?entry=qiyewei"}else{setTimeout(f,300)}};e=c.core.obj.parseParam({lang:"zh-cn",loginSuccessUrl:window.location.href,mini:false},e);e.loginSuccessUrl="http://weibo.com/login.php?url="+encodeURIComponent(e.loginSuccessUrl);if(window.WBtopPublicLogin){WBtopPublicLogin.showLoginLayer(e);f()}else{if(a){return}else{a=true;c.core.io.scriptLoader({url:b,onComplete:function(){a=false;window.WBtopPublicLogin.showLoginLayer(e);f()},timeout:10000,onTimeout:function(){a=false}})}}}});STK.register("common.school.select",function(a){return function(f,b){b=a.parseParam({selectone:false,items:"",values:"",callback:a.funcEmpty,defvalue:"",tipText:""},b);var h={};var e=a.kit.extra.language;var i={prepack:function(p){var q={};if(!b.selectone){var o=p.items?",":"";var n=b.tipText?b.tipText:e("#L{不限}");q.items=n+o+(p.items?e("#L{"+p.items+"}"):"");q.values="1000"+o+(p.values?e("#L{"+p.values+"}"):"")}else{q.items=(p.items?e("#L{"+p.items+"}"):"");q.values=(p.values?e("#L{"+p.values+"}"):"")}return q}};var k={onChange:function(){b.callback(f.value)}};var m=function(){g();d()};var j=function(u,p){u=i.prepack(u);var r=u.items.split(",");var q=u.values.split(",");var s=f.options;s.length=0;var o=-1;for(var t=0,n=r.length;t<n;t++){s[t]=new Option(r[t],q[t]);if(b.defvalue&&q[t]==b.defvalue){o=t}}if(o!=-1){f.selectedIndex=o}else{!b.selectone&&(f.value=p||1000)}};var d=function(){var n=f.getAttribute("defvalue");j(b,n)};var g=function(){a.addEvent(f,"change",k.onChange)};var l=function(){a.removeEvent(f,"change",k.onChange)};var c=function(n){b.defvalue=n};f&&m();h.setOptions=j;h.destroy=l;h.setDefValue=c;return h}});STK.register("kit.extra.city",function(b){var a=b.kit.extra.language;var c={prov11:"#L{东城区},#L{西城区},#L{崇文区},#L{宣武区},#L{朝阳区},#L{丰台区},#L{石景山区},#L{海淀区},#L{门头沟区},#L{房山区},#L{通州区},#L{顺义区},#L{昌平区},#L{大兴区},#L{怀柔区},#L{平谷区},#L{密云县},#L{延庆县}",code11:"1,2,3,4,5,6,7,8,9,11,12,13,14,15,16,17,28,29",prov12:"#L{和平区},#L{河东区},#L{河西区},#L{南开区},#L{河北区},#L{红桥区},#L{塘沽区},#L{汉沽区},#L{大港区},#L{东丽区},#L{西青区},#L{津南区},#L{北辰区},#L{武清区},#L{宝坻区},#L{宁河县},#L{静海县},#L{蓟县},#L{滨海新区},#L{保税区}",code12:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,21,23,25,26,27",prov13:"#L{石家庄},#L{唐山},#L{秦皇岛},#L{邯郸},#L{邢台},#L{保定},#L{张家口},#L{承德},#L{沧州},#L{廊坊},#L{衡水}",code13:"1,2,3,4,5,6,7,8,9,10,11",prov14:"#L{太原},#L{大同},#L{阳泉},#L{长治},#L{晋城},#L{朔州},#L{晋中},#L{运城},#L{忻州},#L{临汾},#L{吕梁}",code14:"1,2,3,4,5,6,7,8,9,10,23",prov15:"#L{呼和浩特},#L{包头},#L{乌海},#L{赤峰},#L{通辽},#L{鄂尔多斯},#L{呼伦贝尔},#L{兴安盟},#L{锡林郭勒盟},#L{乌兰察布},#L{巴彦淖尔},#L{阿拉善盟}",code15:"1,2,3,4,5,6,7,22,25,26,28,29",prov21:"#L{沈阳},#L{大连},#L{鞍山},#L{抚顺},#L{本溪},#L{丹东},#L{锦州},#L{营口},#L{阜新},#L{辽阳},#L{盘锦},#L{铁岭},#L{朝阳},#L{葫芦岛}",code21:"1,2,3,4,5,6,7,8,9,10,11,12,13,14",prov22:"#L{长春},#L{吉林},#L{四平},#L{辽源},#L{通化},#L{白山},#L{松原},#L{白城},#L{延边朝鲜族自治州}",code22:"1,2,3,4,5,6,7,8,24",prov23:"#L{哈尔滨},#L{齐齐哈尔},#L{鸡西},#L{鹤岗},#L{双鸭山},#L{大庆},#L{伊春},#L{佳木斯},#L{七台河},#L{牡丹江},#L{黑河},#L{绥化},#L{大兴安岭}",code23:"1,2,3,4,5,6,7,8,9,10,11,12,27",prov32:"#L{南京},#L{无锡},#L{徐州},#L{常州},#L{苏州},#L{南通},#L{连云港},#L{淮安},#L{盐城},#L{扬州},#L{镇江},#L{泰州},#L{宿迁}",code32:"1,2,3,4,5,6,7,8,9,10,11,12,13",prov33:"#L{杭州},#L{宁波},#L{温州},#L{嘉兴},#L{湖州},#L{绍兴},#L{金华},#L{衢州},#L{舟山},#L{台州},#L{丽水}",code33:"1,2,3,4,5,6,7,8,9,10,11",prov34:"#L{合肥},#L{芜湖},#L{蚌埠},#L{淮南},#L{马鞍山},#L{淮北},#L{铜陵},#L{安庆},#L{黄山},#L{滁州},#L{阜阳},#L{宿州},#L{巢湖},#L{六安},#L{亳州},#L{池州},#L{宣城}",code34:"1,2,3,4,5,6,7,8,10,11,12,13,14,15,16,17,18",prov35:"#L{福州},#L{厦门},#L{莆田},#L{三明},#L{泉州},#L{漳州},#L{南平},#L{龙岩},#L{宁德}",code35:"1,2,3,4,5,6,7,8,9",prov36:"#L{南昌},#L{景德镇},#L{萍乡},#L{九江},#L{新余},#L{鹰潭},#L{赣州},#L{吉安},#L{宜春},#L{抚州},#L{上饶}",code36:"1,2,3,4,5,6,7,8,9,10,11",prov37:"#L{济南},#L{青岛},#L{淄博},#L{枣庄},#L{东营},#L{烟台},#L{潍坊},#L{济宁},#L{泰安},#L{威海},#L{日照},#L{莱芜},#L{临沂},#L{德州},#L{聊城},#L{滨州},#L{菏泽}",code37:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17",prov31:"#L{黄浦区},#L{卢湾区},#L{徐汇区},#L{长宁区},#L{静安区},#L{普陀区},#L{闸北区},#L{虹口区},#L{杨浦区},#L{闵行区},#L{宝山区},#L{嘉定区},#L{浦东新区},#L{金山区},#L{松江区},#L{青浦区},#L{南汇区},#L{奉贤区},#L{崇明县}",code31:"1,3,4,5,6,7,8,9,10,12,13,14,15,16,17,18,19,20,30",prov41:"#L{郑州},#L{开封},#L{洛阳},#L{平顶山},#L{安阳},#L{鹤壁},#L{新乡},#L{焦作},#L{濮阳},#L{许昌},#L{漯河},#L{三门峡},#L{南阳},#L{商丘},#L{信阳},#L{周口},#L{驻马店},#L{济源}",code41:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18",prov42:"#L{武汉},#L{黄石},#L{十堰},#L{宜昌},#L{襄阳},#L{鄂州},#L{荆门},#L{孝感},#L{荆州},#L{黄冈},#L{咸宁},#L{随州},#L{恩施土家族苗族自治州},#L{仙桃},#L{潜江},#L{天门},#L{神农架}",code42:"1,2,3,5,6,7,8,9,10,11,12,13,28,29,30,31,32",prov43:"#L{长沙},#L{株洲},#L{湘潭},#L{衡阳},#L{邵阳},#L{岳阳},#L{常德},#L{张家界},#L{益阳},#L{郴州},#L{永州},#L{怀化},#L{娄底},#L{湘西土家族苗族自治州}",code43:"1,2,3,4,5,6,7,8,9,10,11,12,13,31",prov44:"#L{广州},#L{韶关},#L{深圳},#L{珠海},#L{汕头},#L{佛山},#L{江门},#L{湛江},#L{茂名},#L{肇庆},#L{惠州},#L{梅州},#L{汕尾},#L{河源},#L{阳江},#L{清远},#L{东莞},#L{中山},#L{潮州},#L{揭阳},#L{云浮}",code44:"1,2,3,4,5,6,7,8,9,12,13,14,15,16,17,18,19,20,51,52,53",prov45:"#L{南宁},#L{柳州},#L{桂林},#L{梧州},#L{北海},#L{防城港},#L{钦州},#L{贵港},#L{玉林},#L{百色},#L{贺州},#L{河池},#L{来宾},#L{崇左}",code45:"1,22,3,4,5,6,7,8,9,10,11,12,13,14",prov46:"#L{海口},#L{三亚},#L{其他}",code46:"1,2,90",prov50:"#L{万州区},#L{涪陵区},#L{渝中区},#L{大渡口区},#L{江北区},#L{沙坪坝区},#L{九龙坡区},#L{南岸区},#L{北碚区},#L{万盛经济技术开发区},#L{双桥经济技术开发区},#L{渝北区},#L{巴南区},#L{黔江区},#L{长寿区},#L{綦江区},#L{潼南县},#L{铜梁区},#L{大足区},#L{荣昌县},#L{璧山区},#L{梁平县},#L{城口县},#L{丰都县},#L{垫江县},#L{武隆县},#L{忠县},#L{开县},#L{云阳县},#L{奉节县},#L{巫山县},#L{巫溪县},#L{石柱土家族自治县},#L{秀山土家族苗族自治县},#L{酉阳土家族苗族自治县},#L{彭水苗族土家族自治县},#L{江津区},#L{合川区},#L{永川区},#L{南川区}",code50:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,40,41,42,43,81,82,83,84",prov51:"#L{成都},#L{自贡},#L{攀枝花},#L{泸州},#L{德阳},#L{绵阳},#L{广元},#L{遂宁},#L{内江},#L{乐山},#L{南充},#L{眉山},#L{宜宾},#L{广安},#L{达州},#L{雅安},#L{巴中},#L{资阳},#L{阿坝},#L{甘孜},#L{凉山}",code51:"1,3,4,5,6,7,8,9,10,11,13,14,15,16,17,18,19,20,32,33,34",prov52:"#L{贵阳},#L{六盘水},#L{遵义},#L{安顺},#L{铜仁},#L{黔西南},#L{毕节},#L{黔东南},#L{黔南}",code52:"1,2,3,4,22,23,24,26,27",prov53:"#L{昆明},#L{曲靖},#L{玉溪},#L{保山},#L{昭通},#L{楚雄},#L{红河},#L{文山},#L{普洱},#L{西双版纳},#L{大理},#L{德宏},#L{丽江},#L{怒江},#L{迪庆},#L{临沧}",code53:"1,3,4,5,6,23,25,26,27,28,29,31,32,33,34,35",prov54:"#L{拉萨},#L{昌都},#L{山南},#L{日喀则},#L{那曲},#L{阿里},#L{林芝}",code54:"1,21,22,23,24,25,26",prov61:"#L{西安},#L{铜川},#L{宝鸡},#L{咸阳},#L{渭南},#L{延安},#L{汉中},#L{榆林},#L{安康},#L{商洛}",code61:"1,2,3,4,5,6,7,8,9,10",prov62:"#L{兰州},#L{嘉峪关},#L{金昌},#L{白银},#L{天水},#L{武威},#L{张掖},#L{平凉},#L{酒泉},#L{庆阳},#L{定西},#L{陇南},#L{临夏},#L{甘南}",code62:"1,2,3,4,5,6,7,8,9,10,24,26,29,30",prov63:"#L{西宁},#L{海东},#L{海北},#L{黄南},#L{海南},#L{果洛},#L{玉树},#L{海西}",code63:"1,21,22,23,25,26,27,28",prov64:"#L{银川},#L{石嘴山},#L{吴忠},#L{固原},#L{中卫}",code64:"1,2,3,4,5",prov65:"#L{乌鲁木齐},#L{克拉玛依},#L{吐鲁番},#L{哈密},#L{昌吉},#L{博尔塔拉},#L{巴音郭楞},#L{阿克苏},#L{克孜勒苏},#L{喀什},#L{和田},#L{伊犁},#L{塔城},#L{阿勒泰},#L{石河子}",code65:"1,2,21,22,23,27,28,29,30,31,32,40,42,43,44",prov71:"#L{台北市},#L{高雄市},#L{基隆市},#L{台中市},#L{台南市},#L{新竹市},#L{嘉义市},#L{新北市},#L{宜兰县},#L{桃园县},#L{新竹县},#L{苗栗县},#L{台中县},#L{彰化县},#L{南投县},#L{云林县},#L{嘉义县},#L{台南县},#L{高雄县},#L{屏东县},#L{澎湖县},#L{台东县},#L{花莲县},#L{其他}",code71:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,90",prov81:"#L{中西区},#L{东区},#L{九龙城区},#L{观塘区},#L{南区},#L{深水埗区},#L{黄大仙区},#L{湾仔区},#L{油尖旺区},#L{离岛区},#L{葵青区},#L{北区},#L{西贡区},#L{沙田区},#L{屯门区},#L{大埔区},#L{荃湾区},#L{元朗区},#L{其他}",code81:"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,1",prov82:"#L{花地玛堂区},#L{圣安多尼堂区},#L{大堂区},#L{望德堂区},#L{风顺堂区},#L{氹仔},#L{路环},#L{其他}",code82:"2,3,4,5,6,7,8,1",prov400:"#L{美国},#L{英国},#L{法国},#L{俄罗斯},#L{加拿大},#L{巴西},#L{澳大利亚},#L{印尼},#L{泰国},#L{马来西亚},#L{新加坡},#L{菲律宾},#L{越南},#L{印度},#L{日本},#L{新西兰},#L{韩国},#L{德国},#L{意大利},#L{爱尔兰},#L{荷兰},#L{瑞士},#L{乌克兰},#L{南非},#L{芬兰},#L{瑞典},#L{奥地利},#L{西班牙},#L{比利时},#L{挪威},#L{丹麦},#L{波兰},#L{阿根廷},#L{白俄罗斯},#L{哥伦比亚},#L{古巴},#L{埃及},#L{希腊},#L{匈牙利},#L{伊朗},#L{蒙古},#L{墨西哥},#L{葡萄牙},#L{沙特阿拉伯},#L{土耳其},#L{阿联酋},#L{以色列},#L{马尔代夫},#L{其他}",code400:"1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,16",prov100:"",code100:"",prov:"#L{安徽},#L{北京},#L{重庆},#L{福建},#L{甘肃},#L{广东},#L{广西},#L{贵州},#L{海南},#L{河北},#L{黑龙江},#L{河南},#L{湖北},#L{湖南},#L{内蒙古},#L{江苏},#L{江西},#L{吉林},#L{辽宁},#L{宁夏},#L{青海},#L{山西},#L{山东},#L{上海},#L{四川},#L{天津},#L{西藏},#L{新疆},#L{云南},#L{浙江},#L{陕西},#L{台湾地区},#L{香港地区},#L{澳门地区},#L{海外},#L{其他}",code:"34,11,50,35,62,44,45,52,46,13,23,41,42,43,15,32,36,22,21,64,63,14,37,31,51,12,54,65,53,33,61,71,81,82,400,100"};return function(d){var e={};e.items=a(c["prov"+d])||"";e.values=c["code"+d]||"";return e}});STK.register("common.trans.schoolSelect",function(c){var a=c.kit.io.inter();var b=a.register;b("getarea",{url:"/aj3/person/aj_getarea.php",method:"post"});b("filter",{url:"/aj3/person/relateschool.php",method:"get"});return a});STK.register("common.school.city",function(a){return function(r,j){var o=a.kit.extra.language;var i={},e,g,c,u,m,y,h,w,d=[],s,l,n;a.custEvent.define(i,["cityChange"]);j=j||{};j=a.core.json.merge({city:false,area:false,proDef:"",cityDef:""},j);var t={DOM:{}};var v=function(){q();b();x()};var q=function(){if(!r){throw"node 没有定义"}};var C=function(E){var G=E.length;var I={};var F=[],H=[];for(var D=0;D<G;D++){F.push(E[D].text);H.push(E[D].value)}I.items=F.join(",");I.values=H.join(",");return I};var b=function(){t.DOM=a.kit.dom.parseDOM(a.builder(r).list);s=t.DOM.province;l=t.DOM.area;n=t.DOM.city;p()};var k=function(D,F){if(!y){return}D.lang=$CONFIG.lang;if(d[D.province]&&d[D.province][D.city]){var E=d[D.province][D.city];if(E.area){F&&(F.style.display="");y&&y.setOptions(E)}else{F&&(F.style.display="none")}}else{F&&(F.style.display="none");!d[D.province]&&(d[D.province]={});y&&a.common.trans.schoolSelect.getTrans("getarea",{onComplete:function(G){if(G.code=="A00006"){var H=C(G.data);d[D.province][D.city]=H;d[D.province][D.city].area=(H.items!="");if(F&&(H.items!="")){y&&y.setOptions(H);F.style.display=""}}}}).request(D)}};var x=function(){if(s){e=a.kit.extra.city("");e.callback=function(M){g&&g.setOptions(a.kit.extra.city(M));if((!j.city&&M!="400")||M=="100"){n&&(n.style.display="none");l&&(l.style.display="none")}else{if(M=="400"){n&&(n.style.display="")}else{if(j.city){n&&(n.style.display="")}else{n&&(n.style.display="none")}}}if(!w){a.custEvent.fire(i,"cityChange",{province:s.value})}else{if((!j.city&&M!="400")||M=="100"){a.custEvent.fire(i,"cityChange",{province:s.value})}else{if(M=="100"){l&&(l.style.display="none");a.custEvent.fire(i,"cityChange",{province:s.value})}else{var L={province:s.value,city:n.value};a.custEvent.fire(i,"cityChange",L);y&&k(L,l)}}}};var G=a.kit.extra.city("");var F=G.items.split(",");var E=G.values.split(",");for(var I=0;I<F.length;I++){if(F[I]==j.proDef){j.proDef=E[I];break}}e.defvalue=j.proDef;e.selectone=true;c=a.common.school.select(s,e);var D=s.value;m=a.kit.extra.city(D);var H=m.items.split(",");var K=m.values.split(",");for(var I=0;I<H.length;I++){if(H[I]==j.cityDef){j.cityDef=K[I];break}}m.defvalue=j.cityDef||"";if(n){w=true;m.selectone=true;m.callback=function(M){var L={province:s.value,city:n.value};a.custEvent.fire(i,"cityChange",L);y&&k(L,l)};g=a.common.school.select(n,m)}if(l&&j.area){h={};h.tipText=o("#L{选择区县}");h.callback=function(L){a.custEvent.fire(i,"cityChange",{province:s.value,city:n.value,area:l.value})};y=a.common.school.select(l,h);var J={province:s.value,city:n.value};y&&k(J,l)}}};var p=function(){if(!j.city){n&&(n.style.display="none");l&&(l.style.display="none")}else{n&&(n.style.display="")}if(j.area){j.city&&n&&l&&(l.style.display="")}else{l&&(l.style.display="none")}};var A=function(D){D=D||{};p();j=a.core.json.merge({city:false,area:false},D);B();v()};v();var f=function(){var D={};s&&s.value&&(D.province=s.value),j.city&&n&&n.value&&(D.city=n.value);l&&l.value&&(D.area=l.value);return D};var B=function(){e&&e.callback&&(e.callback=null);c&&c.destroy&&c.destroy();m&&m.callback&&(m.callback=null);g&&g.destroy&&g.destroy();h&&h.callback&&(h.callback=null);y&&y.destroy&&y.destroy();e=g=c=u=y=w=undefined};var z=function(){a.custEvent.undefine(i,["cityChange"]);d=null;B()};i.destroy=z;i.reset=A;i.getSelectOpts=f;return i}});STK.register("comp.account.rejectFake",function(a){return function(d){var j={};var m;var c={evt:{clickCount:0,subBtnClick:0,keyPress:0,menuClick:0,mouseMove:0},buttonClick:{checkcode:0,subBtnPosx:0,subBtnPosy:0,subBtnDelay:0},app:{keycode:""},navigator:{winWidth:0,winHeight:0,userAgent:0}};var e={keycode:[]};var f={checkcode:"checkcode",submit:"submit"};var i={isBubble:function(o,p){if(o===p){return true}else{return a.core.dom.contains(o,p)}},findTarDom:function(o){if(!o||o==document.body){return false}else{if(o.getAttribute("refake-type")){return o.getAttribute("refake-type")}else{return arguments.callee(o.parentNode)}}}};var h={click:function(p){c.evt.clickCount++;a.core.evt.fixEvent();var o=p.target||p.srcElement;m=i.findTarDom(o);if(m&&m==f.checkcode){c.buttonClick.checkcode++}if(m&&m==f.submit){c.evt.subBtnClick++;c.buttonClick.subBtnPosx=p.clientX;c.buttonClick.subBtnPosy=p.clientY}},contextmenu:function(o){c.evt.menuClick++},mouseDown:function(p){a.core.evt.fixEvent();var o=p.target||p.srcElement;m=i.findTarDom(o);if(m&&m==f.submit){c.buttonClick.subBtnDelay=(new Date()).getTime();c.buttonClick.subBtnPosx=p.clientX;c.buttonClick.subBtnPosy=p.clientY}},mouseMove:function(){c.evt.mouseMove++},mouseUp:function(o){if(m&&m==f.submit){c.buttonClick.subBtnDelay=(new Date()).getTime()-c.buttonClick.subBtnDelay}},keyPress:function(o){c.evt.keyPress++;e.keycode.push(o.keyCode)}};var b=function(){a.core.evt.addEvent(document.body,"mousedown",h.mouseDown);a.core.evt.addEvent(document.body,"mousemove",h.mouseMove);a.core.evt.addEvent(document.body,"mouseup",h.mouseUp);a.core.evt.addEvent(document.body,"click",h.click);a.core.evt.addEvent(document.body,"keypress",h.keyPress);a.core.evt.addEvent(document.body,"contextmenu",h.contextmenu)};var k=function(){c.navigator.userAgent=window.navigator.userAgent;c.navigator.winWidth=window.innerWidth||document.body.clientWidth;c.navigator.winHeight=window.innerHeight||document.body.clientHeight};var g=function(){c.app.keycode=e.keycode.join(",");var o=[];for(var p in c){o.push(a.core.json.jsonToQuery(c[p]))}return encodeURIComponent(o.join("&"))};var n=function(){b();k()};n();var l=function(){a.core.evt.removeEvent(document.body,"mousedown",h.mouseDown);a.core.evt.removeEvent(document.body,"mousemove",h.mouseMove);a.core.evt.removeEvent(document.body,"mouseup",h.mouseUp);a.core.evt.removeEvent(document.body,"click",h.click);a.core.evt.removeEvent(document.body,"keypress",h.keyPress);a.core.evt.removeEvent(document.body,"contextmenu",h.contextmenu)};j.getData=g;j.destroy=l;return j}});STK.register("kit.dom.layoutPos",function(a){return function(d,c,b){if(!a.isNode(c)){throw"kit.dom.layerOutElement need element as first parameter"}if(c===document.body){return false}if(!c.parentNode){return false}if(c.style.display==="none"){return false}var f,e,h,j,g,i;f=a.parseParam({pos:"left-bottom",offsetX:0,offsetY:0},b);e=c;if(!e){return false}while(e!==document.body){e=e.parentNode;if(e.style.display==="none"){return false}i=a.getStyle(e,"position");shellAttr=e.getAttribute("layout-shell");if(i==="absolute"||i==="fixed"){break}if(shellAttr==="true"&&i==="relative"){break}}e.appendChild(d);h=a.position(c,{parent:e});j={w:c.offsetWidth,h:c.offsetHeight};g=f.pos.split("-");if(g[0]==="left"){d.style.left=h.l+f.offsetX+"px"}else{if(g[0]==="right"){d.style.left=h.l+j.w+f.offsetX+"px"}else{if(g[0]==="center"){d.style.left=h.l+j.w/2+f.offsetX+"px"}}}if(g[1]==="top"){d.style.top=h.t+f.offsetY+"px"}else{if(g[1]==="bottom"){d.style.top=h.t+j.h+f.offsetY+"px"}else{if(g[1]==="middle"){d.style.top=h.t+j.h/2+f.offsetY+"px"}}}return true}});STK.register("common.layer.errTip",function(b){var a='<div node-type="outer" style="position: absolute; top: 100px; left: 68px;" class="layer_tips"><div node-type="inner" class="error"><div class="error_text"><span node-type="ico" class="icon"></span><span node-type="msg">大写锁定已打开，请注意大小写</span></div></div><a action-type="common_layer_errtip_close" node-type="close" href="javascript:;" class="W_close_color" node-type="close"></a><span node-type="arrow" class="arrow_down"></span></div>';return function(g){var h={},d,i,c,j,e;var f={common_layer_errtip_close:function(){i.hide()}};var k={init:function(){k.pars();k.build();k.bind()},pars:function(){d=b.parseParam({template:a},g||{})},build:function(){i=b.ui.mod.layer(d.template);c=b.kit.dom.parseDOM(i.getDomList())},bind:function(){j=b.delegatedEvent(c.outer);for(var l in f){j.add(l,"click",f[l])}},show:function(p,o,m){var l=b.core.dom.getSize(o);var n=Math.max(l.height,b.getStyle(o,"height").replace("px",""));m=b.parseParam({offsetX:0,offsetY:0-n-34,stopBoxClose:0},m);b.kit.dom.layoutPos(c.outer,o,m);c.msg.innerHTML=p;k.stopBoxClose();m.stopBoxClose&&k.startBoxClose(m.stopBoxClose);i.show()},hide:function(){i.hide()},destroy:function(){i.destroy();i=null},startBoxClose:function(l){setTimeout(k.hide,Math.abs(l))},stopBoxClose:function(){if(e){clearTimeout(e)}}};k.init();h.layer=i;h.show=k.show;h.hide=k.hide;h.domList=c;h.destroy=k.destroy;return h}});STK.register("common.setting.activation",function(c){var b=c.kit.extra.language;var a={E01:"",E02:b("#L{请输入短信激活码}"),E03:b("#L{激活码输入有误}")};return function(i,h){var d=function(){var k=f.value().replace(/^\s+|\s+$/g,""),j=false;if(!f.pars.must&&f.rule.isEmpty(k)){f.msg.state=true;f.msg.type="empty";f.msg.code="E01";return}if(!j&&f.rule.isEmpty(k)){j=true;f.msg.type="err";f.msg.code="E02"}if(!j&&!f.rule.lenLimit(k,0,6)){j=true;f.msg.type="err";f.msg.code="E03"}if(!j){f.msg.state=true;f.msg.type="ok";f.msg.code="E01"}else{f.msg.state=false}};var g={focus:function(){f.cache_value=f.value();if(f.rule.isEmpty(f.cache_value)){f.msg.state=false;f.msg.action="focus";f.msg.type="tip";f.msg.code="E02";f.fire()}},blur:function(){i.value=f.rule.reNullChar(i.value);f.msg.action="focus";d();f.fire()}};var f=c.common.setting.control(i,h,{evtAct:g,check:d});var e=c.core.obj.sup(f,["initPars"]);f.initPars=function(){e.initPars();f.errText=a;f.type="activation"};f.pars.auto&&f.init();return f}});STK.register("common.setting.mobile",function(c){var b=c.kit.extra.language;var a={E01:"",E02:b("#L{请输入11位数字,海外用户请使用邮箱注册}"),E03:b("#L{请输入手机号码}"),E04:b("#L{手机号码为11位数字，以13/14/15/17/18开头}"),E05:b("#L{手机号码错误}")};return function(i,h){var d=function(){var k=f.value(),j=false;if(!f.pars.must&&f.rule.isEmpty(k)){f.msg.state=true;f.msg.type="empty";f.msg.code="E01";return}if(!j&&f.rule.isEmpty(k)){j=true;f.msg.type="err";f.msg.code="E03"}if(h.hook.domList.mobilesea_selectvalue&&h.hook.domList.mobilesea_selectvalue.value&&h.hook.domList.mobilesea_selectvalue.value=="0086"){if(!j&&!f.rule.isMobile(k)){j=true;f.msg.type="err";f.msg.code="E04"}}else{if(!j&&!f.rule.isMobileSea(k,h.hook.domList.mobilesea_selectvalue.value)){j=true;f.msg.type="err";f.msg.code="E05"}}if(!j){f.msg.state=true;f.msg.type="ok";f.msg.code="E01"}else{f.msg.state=false}};var g={focus:function(){f.cache_value=f.value();if(f.rule.isEmpty(f.cache_value)){f.msg.state=false;f.msg.action="focus";f.msg.type="tip";f.msg.code="E02";f.fire()}},blur:function(){i.value=f.rule.reNullChar(i.value);f.msg.action="focus";var j=f.value();if(j&&f.cache_value==j){return}f.cache_value=null;ioDelay=setTimeout(function(){d();if(f.msg.state&&f.pars.proxy&&f.pars.iokey){f.msg.type="loading";f.pars.proxy.request(f.pars.iokey,{onSuccess:function(k){f.msg=c.parseParam(f.msg,k.data||{});f.msg.state=true;f.fire()},onError:function(k){f.msg=c.parseParam(f.msg,k.data||{});f.msg.state=false;f.fire()}},{type:f.type,value:encodeURIComponent(f.value()),from:"qiyewei"})}f.fire()},f.pars.iodelay)}};var f=c.common.setting.control(i,h,{evtAct:g,check:d});var e=c.core.obj.sup(f,["initPars"]);f.initPars=function(){e.initPars();f.errText=a;f.type="mobile"};f.pars.auto&&f.init();return f}});STK.register("common.setting.timer",function(a){var b={ss:1,mm:60,hh:60*60,dd:60*60*24};return function(h,g){var f={},d,c;var e={init:function(){d=a.parseParam({time:0,loop:"ss"},h);g=g||function(){}},start:function(j){var j=d.time;var i=function(){g({last:j,dd:Math.floor(j/b.dd),hh:Math.floor(j%b.dd/b.hh),mm:Math.floor(j%b.dd%b.hh/b.mm),ss:j%b.mm});if(j==0){clearInterval(c)}j-=b[d.loop]};c=setInterval(i,b[d.loop]*1000)},stop:function(){clearInterval(c)},destroy:function(){}};e.init();f.start=e.start;f.stop=e.stop;f.destroy=e.destroy;return f}});STK.register("common.setting.newmobilesea",function(e){var a=e.kit.dom.parentElementBy;var d=e.kit.dom.parseDOM;var c=e.kit.extra.mobileCountry;var b=function(f){return{set:function(g,i){if(!e.isNode(f)){return}var h=e.queryToJson(f.getAttribute("action-data")||"")||{};h[g]=i;f.setAttribute("action-data",e.jsonToQuery(h))},get:function(g){if(!e.isNode(f)){return""}var h=e.queryToJson(f.getAttribute("action-data")||"")||{};return h[g]||""}}};return function(j,f){f=f||{};var g=d(e.builder(j).list);var h={};h.el=g.mobilesea_selectlayer.getElementsByTagName("li")[0];h.key=b(h.el).get("key");h.data=b(h.el).get("code");g.mobilesea_selectvalue.value=h.data;var n=function(o){if(h.el==o.el){g.mobilesea_selectlayer.style.display="none";e.removeClassName(g.mobilesea_select,"W_input_focus")}else{e.removeClassName(h.el,"select");e.addClassName(o.el,"select");e.removeClassName(g.mobilesea_select,h.key);h.el=o.el;h.key=o.data.key;h.data=o.data.code;e.addClassName(g.mobilesea_select,h.key);g.mobilesea_selectlayer.style.display="none";e.removeClassName(g.mobilesea_select,"W_input_focus");var p=o.data.code;g.mobilesea_txt.innerHTML=p;g.mobilesea_selectvalue.value=h.data}};var m=e.delegatedEvent(g.mobilesea_selectlayer);m.add("select","click",n);var k=function(p){var o=e.fixEvent(p).target;if(e.hasClassName(g.mobilesea_select,"W_input_focus")){e.removeClassName(g.mobilesea_select,"W_input_focus")}else{e.addClassName(g.mobilesea_select,"W_input_focus")}e.kit.dom.layoutPos(g.mobilesea_selectlayer,o);g.mobilesea_selectlayer.style.display=g.mobilesea_selectlayer.style.display==""?"none":""};var i=function(p){var o=e.fixEvent(p).target;if(e.contains(g.mobilesea_selectlayer,o)||o==g.mobilesea_select){return}e.removeClassName(g.mobilesea_select,"W_input_focus");g.mobilesea_selectlayer.style.display="none"};e.addEvent(g.mobilesea_select,"click",k);e.addEvent(document.body,"click",i);var l}});STK.register("common.dialog.validateMobileCode",function(d){var k,g=["activation","mobile"],i=d.comp.account.templateForm,j=d.common.trans.account,e=d.common.trans.form,c=d.common.layer.ioError,a=d.kit.extra.language;var h={CONTENT:a('<div class="W_tips tips_error clearfix"><p class="icon"><span class="icon_errorS"></span></p><p class="txt">#L{本次注册需要短信验证，请按照以下提示操作}</p></div><div class="layer_msn_search msg_verify"><div class="W_reg_form"><div class="info_list clearfix"><div class="tit"><i>*</i>#L{手机号}：</div><div class="inp flag_tel clearfix">                                <!-- 获得焦点时增加  -->                                <a href="javascript:void(0);" class="tel_country CH" node-type="mobilesea_select"></a>                                <input type="hidden" name="zone" value="0086" node-type="mobilesea_selectvalue">								 <div style="position:absolute;z-index: 99; position:absolute;top:30px;display:none" class="layer_menu_list msg_set_select layer_set_country" node-type="mobilesea_selectlayer">                                    <!-- 选中态 select, a内增加 em -->                                    <ul class="y_scroll">                                                                                                                                                    <li class="select" action-type="select" action-data="key=CH&code=0086"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{中国}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=HK&code=00852"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{中国香港}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=MO&code=00853"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{中国澳门}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=TW&code=00886"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{中国台湾}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=US&code=001"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{美国}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=CA&code=001"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{加拿大}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=BR&code=0055"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{巴西}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=MY&code=0060"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{马来西亚}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=AU&code=0061"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{澳洲}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=JP&code=0081"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{日本}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=KP&code=0082"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{韩国}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=SG&code=0065"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{新加坡}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=UK&code=0044"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{英国}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=FR&code=0033"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{法国}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=RU&code=007"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{俄罗斯}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=ID&code=0091"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{印度}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=TH&code=0066"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{泰国}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=DE&code=0049"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{德国}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=IN&code=0062"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{印尼}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=KH&code=00855"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{柬埔寨}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=MM&code=0095"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{缅甸}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=BN&code=00673"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{文莱}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=PH&code=0063"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{菲律宾}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=VN&code=0084"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{越南}</a></li>                                                                                                                                                    <li action-type="select" action-data="key=LA&code=00856"><a href="javascript:void(0);"><em class="W_ico12 icon_addone"></em>#L{老挝}</a></li>                                                                        </ul>                                </div>                                <div class="W_input foreign_tel" style="width:154px"><span class="tel_forenum" node-type="mobilesea_txt">0086</span>                                <input type="text" value="" class="tel_num  W_input " style="width:100px;" name="mobile" action-type="text_copy" action-data="text=#L{请输入手机号码}" node-type="mobile">                                </div>                            </div></div><div class="info_list clearfix"><div class="tit"><i>*</i>#L{激活码}：</div><div class="inp active"><a action-data="type=sendsms" node-type="btn_sms_activation" action-type="btn_sms_activation" class="W_btn_e" href="javascript:void(0);"><span>#L{免费获取短信激活码}</span></a><a node-type="btn_sms_activation_disable" style="display:none" class="W_btn_e_disable" href="javascript:void(0);"><span><em node-type="sms_timer">180</em>#L{秒后重新获取短信}</span></a><input type="text" value="" class="W_input" name="pincode" node-type="activation"></div></div><div class="info_verify clearfix"><div class="inp"><a refake-type="submit" href="javascript:void(0);" class="W_btn_e" action-type="btn_submit" action-data="validateExtra=1"><span>下一步</span></a></div></div></div></div>'),TITLE:a("#L{短信验证}"),ERROR_TIP:'<div node-type="outer" style="position:absolute;width:180px;" class="layer_tips"><div node-type="inner" class="error"><div node-type="msg"></div></div><span node-type="arrow" class="arrow_down"></span></div>'};var b=d.common.layer.errTip({template:h.ERROR_TIP});var f=function(n,m){b.show(n,m,{stopBoxClose:1300});d.kit.dom.layoutPos(b.domList.outer,m.parentNode,{pos:"left-top"});var l=d.core.json.merge(d.core.dom.position(b.domList.outer),d.core.dom.getSize(b.domList.outer));var m=d.core.json.merge(d.core.dom.position(m),d.core.dom.getSize(m));d.core.dom.setXY(b.domList.outer,{t:l.t-l.height-3,l:l.l});d.core.dom.setStyle(b.domList.arrow,"left",l.width-m.width+20+"px")};return function(l){var s,m,t,p,u,v,q=0,o;var r={init:function(){r.parseParam();r.build();r.bind();r.show()},parseParam:function(){k=d.parseParam({content:h.CONTENT,resData:{}},l)},build:function(){s=d.ui.dialog();m=d.kit.dom.parseDOM(s.getDomList());m.inner.innerHTML=k.content;n.create();d.common.setting.newmobilesea(m.inner)},show:function(){s.show();s.setMiddle()},bind:function(){t=d.core.evt.delegatedEvent(m.inner);t.add("btn_submit","click",n.submit);t.add("btn_sms_activation","click",n.sendSMS);d.custEvent.define(w,["data","submit","close"]);d.custEvent.add(w,"data",n.resData);d.custEvent.add(s,"hide",function(){d.custEvent.remove(s,"hide",arguments.callee);d.custEvent.fire(w,"close")})},unbind:function(){d.custEvent.remove(w,"data",n.resDate);d.custEvent.undefine(w,["data","submit","close"]);t.destroy()},destroy:function(){r.unbind();s.destroy();t=r=s=m=undefined}};var n={create:function(){p=d.common.setting.form(m.inner);u=d.kit.dom.parseDOM(p.domList);for(var x in u){if(d.inArray(x,g)&&d.common.setting[x]){p.add(x,d.common.setting[x](u[x],d.core.json.merge({hook:p},d.queryToJson(u[x].getAttribute("action-data")||""))))}}o=d.common.setting.textCopy(m.inner)},submit:function(x){var y=n.getData();if(y){y=d.core.json.merge(d.core.json.merge(k.resData,y),x.data);j.request("register",{onSuccess:function(z){if(FrameClient&&FrameClient.sendMessage){FrameClient.sendMessage({jump:z.data.href,inner:true})}},onError:function(A){for(var z in A.data){if(p.ctls[z]){p.ctls[z].setMsg(A.data[z])}}A.data&&n.showTips(A.data);A.msg&&c(A.code,A)}},y)}},resData:function(x){k.resData=x||{}},getData:function(){var x=p.states();if(p.check()){return p.getData()}else{n.showTips(x)}return false},showTips:function(y){for(var x in y){if(!y[x].state){f(i("formTips",{data:y[x]}),u[x]);break}}},sendSMS:function(x){d.preventDefault();if(p.ctls.mobile.msg.state&&p.ctls.mobile.msg.type=="ok"){x=x.data||{};x.value=p.ctls.mobile.value();try{x.zone=p.ctls.mobile.pars.hook.domList.mobilesea_selectvalue.value}catch(z){x.zone="0086"}var y=function(B){u.sms_timer.innerHTML=B.last;u.btn_sms_activation_disable.style.display=B.last==0?"none":"";u.btn_sms_activation.style.display=B.last==0?"":"none";if(q==3){u.btn_sms_activation.className=u.btn_sms_activation_disable.className;t.remove("btn_sms_activation","click",n.sendSMS)}};v=d.common.setting.timer({time:179},y);v.start();var A=p.ctls.activation.dataType.get("msg");A.type="tip";A.msg=a("#L{激活码发送成功。如3分钟后仍未收到，请重新获取}");e.request("checkform",{onSuccess:function(B){++q;n.showTips({activation:A});if(q==3){d.ui.confirm(a("#L{如仍未收到激活码，请使用电子邮箱注册}"),{OK:function(){d.preventDefault();window.location.href="http://weibo.com/signup/mobile.php?entry=qiyewei&lang=zh-cn"}})}},onError:function(B){c(B.code,B);v.stop()}},x)}else{d.fireEvent(u.mobile,"click");d.kit.extra.textareaUtils.setCursor(u.mobile)}}};var w={};r.init();return w}});STK.register("comp.account.RSAkey",function(){var av;var ah=244837814094590;var Y=((ah&16777215)==15715070);function aq(z,t,az){if(z!=null){if("number"==typeof z){this.fromNumber(z,t,az)}else{if(t==null&&"string"!=typeof z){this.fromString(z,256)}else{this.fromString(z,t)}}}}function h(){return new aq(null)}function b(aB,t,z,aA,aD,aC){while(--aC>=0){var az=t*this[aB++]+z[aA]+aD;aD=Math.floor(az/67108864);z[aA++]=az&67108863}return aD}function ax(aB,aG,aH,aA,aE,t){var aD=aG&32767,aF=aG>>15;while(--t>=0){var az=this[aB]&32767;var aC=this[aB++]>>15;var z=aF*az+aC*aD;az=aD*az+((z&32767)<<15)+aH[aA]+(aE&1073741823);aE=(az>>>30)+(z>>>15)+aF*aC+(aE>>>30);aH[aA++]=az&1073741823}return aE}function aw(aB,aG,aH,aA,aE,t){var aD=aG&16383,aF=aG>>14;while(--t>=0){var az=this[aB]&16383;var aC=this[aB++]>>14;var z=aF*az+aC*aD;az=aD*az+((z&16383)<<14)+aH[aA]+aE;aE=(az>>28)+(z>>14)+aF*aC;aH[aA++]=az&268435455}return aE}if(Y&&(navigator.appName=="Microsoft Internet Explorer")){aq.prototype.am=ax;av=30}else{if(Y&&(navigator.appName!="Netscape")){aq.prototype.am=b;av=26}else{aq.prototype.am=aw;av=28}}aq.prototype.DB=av;aq.prototype.DM=((1<<av)-1);aq.prototype.DV=(1<<av);var Z=52;aq.prototype.FV=Math.pow(2,Z);aq.prototype.F1=Z-av;aq.prototype.F2=2*av-Z;var ad="0123456789abcdefghijklmnopqrstuvwxyz";var af=new Array();var ao,v;ao="0".charCodeAt(0);for(v=0;v<=9;++v){af[ao++]=v}ao="a".charCodeAt(0);for(v=10;v<36;++v){af[ao++]=v}ao="A".charCodeAt(0);for(v=10;v<36;++v){af[ao++]=v}function ay(t){return ad.charAt(t)}function A(z,t){var az=af[z.charCodeAt(t)];return(az==null)?-1:az}function X(z){for(var t=this.t-1;t>=0;--t){z[t]=this[t]}z.t=this.t;z.s=this.s}function n(t){this.t=1;this.s=(t<0)?-1:0;if(t>0){this[0]=t}else{if(t<-1){this[0]=t+DV}else{this.t=0}}}function c(t){var z=h();z.fromInt(t);return z}function w(aD,z){var aA;if(z==16){aA=4}else{if(z==8){aA=3}else{if(z==256){aA=8}else{if(z==2){aA=1}else{if(z==32){aA=5}else{if(z==4){aA=2}else{this.fromRadix(aD,z);return}}}}}}this.t=0;this.s=0;var aC=aD.length,az=false,aB=0;while(--aC>=0){var t=(aA==8)?aD[aC]&255:A(aD,aC);if(t<0){if(aD.charAt(aC)=="-"){az=true}continue}az=false;if(aB==0){this[this.t++]=t}else{if(aB+aA>this.DB){this[this.t-1]|=(t&((1<<(this.DB-aB))-1))<<aB;this[this.t++]=(t>>(this.DB-aB))}else{this[this.t-1]|=t<<aB}}aB+=aA;if(aB>=this.DB){aB-=this.DB}}if(aA==8&&(aD[0]&128)!=0){this.s=-1;if(aB>0){this[this.t-1]|=((1<<(this.DB-aB))-1)<<aB}}this.clamp();if(az){aq.ZERO.subTo(this,this)}}function O(){var t=this.s&this.DM;while(this.t>0&&this[this.t-1]==t){--this.t}}function q(z){if(this.s<0){return"-"+this.negate().toString(z)}var az;if(z==16){az=4}else{if(z==8){az=3}else{if(z==2){az=1}else{if(z==32){az=5}else{if(z==4){az=2}else{return this.toRadix(z)}}}}}var aB=(1<<az)-1,aE,t=false,aC="",aA=this.t;var aD=this.DB-(aA*this.DB)%az;if(aA-->0){if(aD<this.DB&&(aE=this[aA]>>aD)>0){t=true;aC=ay(aE)}while(aA>=0){if(aD<az){aE=(this[aA]&((1<<aD)-1))<<(az-aD);aE|=this[--aA]>>(aD+=this.DB-az)}else{aE=(this[aA]>>(aD-=az))&aB;if(aD<=0){aD+=this.DB;--aA}}if(aE>0){t=true}if(t){aC+=ay(aE)}}}return t?aC:"0"}function R(){var t=h();aq.ZERO.subTo(this,t);return t}function ak(){return(this.s<0)?this.negate():this}function G(t){var az=this.s-t.s;if(az!=0){return az}var z=this.t;az=z-t.t;if(az!=0){return az}while(--z>=0){if((az=this[z]-t[z])!=0){return az}}return 0}function j(z){var aA=1,az;if((az=z>>>16)!=0){z=az;aA+=16}if((az=z>>8)!=0){z=az;aA+=8}if((az=z>>4)!=0){z=az;aA+=4}if((az=z>>2)!=0){z=az;aA+=2}if((az=z>>1)!=0){z=az;aA+=1}return aA}function u(){if(this.t<=0){return 0}return this.DB*(this.t-1)+j(this[this.t-1]^(this.s&this.DM))}function ap(az,z){var t;for(t=this.t-1;t>=0;--t){z[t+az]=this[t]}for(t=az-1;t>=0;--t){z[t]=0}z.t=this.t+az;z.s=this.s}function W(az,z){for(var t=az;t<this.t;++t){z[t-az]=this[t]}z.t=Math.max(this.t-az,0);z.s=this.s}function s(aE,aA){var z=aE%this.DB;var t=this.DB-z;var aC=(1<<t)-1;var aB=Math.floor(aE/this.DB),aD=(this.s<<z)&this.DM,az;for(az=this.t-1;az>=0;--az){aA[az+aB+1]=(this[az]>>t)|aD;aD=(this[az]&aC)<<z}for(az=aB-1;az>=0;--az){aA[az]=0}aA[aB]=aD;aA.t=this.t+aB+1;aA.s=this.s;aA.clamp()}function l(aD,aA){aA.s=this.s;var aB=Math.floor(aD/this.DB);if(aB>=this.t){aA.t=0;return}var z=aD%this.DB;var t=this.DB-z;var aC=(1<<z)-1;aA[0]=this[aB]>>z;for(var az=aB+1;az<this.t;++az){aA[az-aB-1]|=(this[az]&aC)<<t;aA[az-aB]=this[az]>>z}if(z>0){aA[this.t-aB-1]|=(this.s&aC)<<t}aA.t=this.t-aB;aA.clamp()}function aa(z,aA){var az=0,aB=0,t=Math.min(z.t,this.t);while(az<t){aB+=this[az]-z[az];aA[az++]=aB&this.DM;aB>>=this.DB}if(z.t<this.t){aB-=z.s;while(az<this.t){aB+=this[az];aA[az++]=aB&this.DM;aB>>=this.DB}aB+=this.s}else{aB+=this.s;while(az<z.t){aB-=z[az];aA[az++]=aB&this.DM;aB>>=this.DB}aB-=z.s}aA.s=(aB<0)?-1:0;if(aB<-1){aA[az++]=this.DV+aB}else{if(aB>0){aA[az++]=aB}}aA.t=az;aA.clamp()}function D(z,aA){var t=this.abs(),aB=z.abs();var az=t.t;aA.t=az+aB.t;while(--az>=0){aA[az]=0}for(az=0;az<aB.t;++az){aA[az+t.t]=t.am(0,aB[az],aA,az,0,t.t)}aA.s=0;aA.clamp();if(this.s!=z.s){aq.ZERO.subTo(aA,aA)}}function Q(az){var t=this.abs();var z=az.t=2*t.t;while(--z>=0){az[z]=0}for(z=0;z<t.t-1;++z){var aA=t.am(z,t[z],az,2*z,0,1);if((az[z+t.t]+=t.am(z+1,2*t[z],az,2*z+1,aA,t.t-z-1))>=t.DV){az[z+t.t]-=t.DV;az[z+t.t+1]=1}}if(az.t>0){az[az.t-1]+=t.am(z,t[z],az,2*z,0,1)}az.s=0;az.clamp()}function E(aH,aE,aD){var aN=aH.abs();if(aN.t<=0){return}var aF=this.abs();if(aF.t<aN.t){if(aE!=null){aE.fromInt(0)}if(aD!=null){this.copyTo(aD)}return}if(aD==null){aD=h()}var aB=h(),z=this.s,aG=aH.s;var aM=this.DB-j(aN[aN.t-1]);if(aM>0){aN.lShiftTo(aM,aB);aF.lShiftTo(aM,aD)}else{aN.copyTo(aB);aF.copyTo(aD)}var aJ=aB.t;var az=aB[aJ-1];if(az==0){return}var aI=az*(1<<this.F1)+((aJ>1)?aB[aJ-2]>>this.F2:0);var aQ=this.FV/aI,aP=(1<<this.F1)/aI,aO=1<<this.F2;var aL=aD.t,aK=aL-aJ,aC=(aE==null)?h():aE;aB.dlShiftTo(aK,aC);if(aD.compareTo(aC)>=0){aD[aD.t++]=1;aD.subTo(aC,aD)}aq.ONE.dlShiftTo(aJ,aC);aC.subTo(aB,aB);while(aB.t<aJ){aB[aB.t++]=0}while(--aK>=0){var aA=(aD[--aL]==az)?this.DM:Math.floor(aD[aL]*aQ+(aD[aL-1]+aO)*aP);if((aD[aL]+=aB.am(0,aA,aD,aK,0,aJ))<aA){aB.dlShiftTo(aK,aC);aD.subTo(aC,aD);while(aD[aL]<--aA){aD.subTo(aC,aD)}}}if(aE!=null){aD.drShiftTo(aJ,aE);if(z!=aG){aq.ZERO.subTo(aE,aE)}}aD.t=aJ;aD.clamp();if(aM>0){aD.rShiftTo(aM,aD)}if(z<0){aq.ZERO.subTo(aD,aD)}}function N(t){var z=h();this.abs().divRemTo(t,null,z);if(this.s<0&&z.compareTo(aq.ZERO)>0){t.subTo(z,z)}return z}function K(t){this.m=t}function U(t){if(t.s<0||t.compareTo(this.m)>=0){return t.mod(this.m)}else{return t}}function aj(t){return t}function J(t){t.divRemTo(this.m,null,t)}function H(t,az,z){t.multiplyTo(az,z);this.reduce(z)}function at(t,z){t.squareTo(z);this.reduce(z)}K.prototype.convert=U;K.prototype.revert=aj;K.prototype.reduce=J;K.prototype.mulTo=H;K.prototype.sqrTo=at;function B(){if(this.t<1){return 0}var t=this[0];if((t&1)==0){return 0}var z=t&3;z=(z*(2-(t&15)*z))&15;z=(z*(2-(t&255)*z))&255;z=(z*(2-(((t&65535)*z)&65535)))&65535;z=(z*(2-t*z%this.DV))%this.DV;return(z>0)?this.DV-z:-z}function f(t){this.m=t;this.mp=t.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<(t.DB-15))-1;this.mt2=2*t.t}function ai(t){var z=h();t.abs().dlShiftTo(this.m.t,z);z.divRemTo(this.m,null,z);if(t.s<0&&z.compareTo(aq.ZERO)>0){this.m.subTo(z,z)}return z}function ar(t){var z=h();t.copyTo(z);this.reduce(z);return z}function P(t){while(t.t<=this.mt2){t[t.t++]=0}for(var az=0;az<this.m.t;++az){var z=t[az]&32767;var aA=(z*this.mpl+(((z*this.mph+(t[az]>>15)*this.mpl)&this.um)<<15))&t.DM;z=az+this.m.t;t[z]+=this.m.am(0,aA,t,az,0,this.m.t);while(t[z]>=t.DV){t[z]-=t.DV;t[++z]++}}t.clamp();t.drShiftTo(this.m.t,t);if(t.compareTo(this.m)>=0){t.subTo(this.m,t)}}function al(t,z){t.squareTo(z);this.reduce(z)}function y(t,az,z){t.multiplyTo(az,z);this.reduce(z)}f.prototype.convert=ai;f.prototype.revert=ar;f.prototype.reduce=P;f.prototype.mulTo=y;f.prototype.sqrTo=al;function i(){return((this.t>0)?(this[0]&1):this.s)==0}function x(aE,aF){if(aE>4294967295||aE<1){return aq.ONE}var aD=h(),az=h(),aC=aF.convert(this),aB=j(aE)-1;aC.copyTo(aD);while(--aB>=0){aF.sqrTo(aD,az);if((aE&(1<<aB))>0){aF.mulTo(az,aC,aD)}else{var aA=aD;aD=az;az=aA}}return aF.revert(aD)}function am(az,t){var aA;if(az<256||t.isEven()){aA=new K(t)}else{aA=new f(t)}return this.exp(az,aA)}aq.prototype.copyTo=X;aq.prototype.fromInt=n;aq.prototype.fromString=w;aq.prototype.clamp=O;aq.prototype.dlShiftTo=ap;aq.prototype.drShiftTo=W;aq.prototype.lShiftTo=s;aq.prototype.rShiftTo=l;aq.prototype.subTo=aa;aq.prototype.multiplyTo=D;aq.prototype.squareTo=Q;aq.prototype.divRemTo=E;aq.prototype.invDigit=B;aq.prototype.isEven=i;aq.prototype.exp=x;aq.prototype.toString=q;aq.prototype.negate=R;aq.prototype.abs=ak;aq.prototype.compareTo=G;aq.prototype.bitLength=u;aq.prototype.mod=N;aq.prototype.modPowInt=am;aq.ZERO=c(0);aq.ONE=c(1);function k(){this.i=0;this.j=0;this.S=new Array()}function e(aB){var aA,z,az;for(aA=0;aA<256;++aA){this.S[aA]=aA}z=0;for(aA=0;aA<256;++aA){z=(z+this.S[aA]+aB[aA%aB.length])&255;az=this.S[aA];this.S[aA]=this.S[z];this.S[z]=az}this.i=0;this.j=0}function a(){var z;this.i=(this.i+1)&255;this.j=(this.j+this.S[this.i])&255;z=this.S[this.i];this.S[this.i]=this.S[this.j];this.S[this.j]=z;return this.S[(z+this.S[this.i])&255]}k.prototype.init=e;k.prototype.next=a;function an(){return new k()}var M=256;var m;var T;var ab;function d(t){T[ab++]^=t&255;T[ab++]^=(t>>8)&255;T[ab++]^=(t>>16)&255;T[ab++]^=(t>>24)&255;if(ab>=M){ab-=M}}function S(){d(new Date().getTime())}if(T==null){T=new Array();ab=0;var I;if(navigator.appName=="Netscape"&&navigator.appVersion<"5"&&window.crypto&&typeof(window.crypto.random)==="function"){var F=window.crypto.random(32);for(I=0;I<F.length;++I){T[ab++]=F.charCodeAt(I)&255}}while(ab<M){I=Math.floor(65536*Math.random());T[ab++]=I>>>8;T[ab++]=I&255}ab=0;S()}function C(){if(m==null){S();m=an();m.init(T);for(ab=0;ab<T.length;++ab){T[ab]=0}ab=0}return m.next()}function au(z){var t;for(t=0;t<z.length;++t){z[t]=C()}}function ac(){}ac.prototype.nextBytes=au;function g(z,t){return new aq(z,t)}function ag(az,aA){var t="";var z=0;while(z+aA<az.length){t+=az.substring(z,z+aA)+"\n";z+=aA}return t+az.substring(z,az.length)}function r(t){if(t<16){return"0"+t.toString(16)}else{return t.toString(16)}}function ae(aA,aD){if(aD<aA.length+11){alert("Message too long for RSA");return null}var aC=new Array();var az=aA.length-1;while(az>=0&&aD>0){var aB=aA.charCodeAt(az--);if(aB<128){aC[--aD]=aB}else{if((aB>127)&&(aB<2048)){aC[--aD]=(aB&63)|128;aC[--aD]=(aB>>6)|192}else{aC[--aD]=(aB&63)|128;aC[--aD]=((aB>>6)&63)|128;aC[--aD]=(aB>>12)|224}}}aC[--aD]=0;var z=new ac();var t=new Array();while(aD>2){t[0]=0;while(t[0]==0){z.nextBytes(t)}aC[--aD]=t[0]}aC[--aD]=2;aC[--aD]=0;return new aq(aC)}function L(){this.n=null;this.e=0;this.d=null;this.p=null;this.q=null;this.dmp1=null;this.dmq1=null;this.coeff=null}function o(z,t){if(z!=null&&t!=null&&z.length>0&&t.length>0){this.n=g(z,16);this.e=parseInt(t,16)}else{alert("Invalid RSA public key")}}function V(t){return t.modPowInt(this.e,this.n)}function p(az){var t=ae(az,(this.n.bitLength()+7)>>3);if(t==null){return null}var aA=this.doPublic(t);if(aA==null){return null}var z=aA.toString(16);if((z.length&1)==0){return z}else{return"0"+z}}L.prototype.doPublic=V;L.prototype.setPublic=o;L.prototype.encrypt=p;return function(){return new L()}});STK.register("comp.account.regEmail",function(d){var c=d.comp.account.templateForm,a=d.common.trans.form,b=d.common.trans.account,e=d.common.dialog.loginLayer,f=d.common.layer.ioError;return function(k){var o={};var g,p,s,h;var i=["email","password","nickname","recomnick","realname","abroadname","idnumber","passport","verifycode"];var r=d.comp.account.rejectFake();var u=false;var j={formCheck:function(w,v){if(v.email&&v.email.code=="600001"&&v.email.sinamail==true){u=true;setTimeout(function(){l.btn_login()},100)}else{u=false}m(v)}};var l={btn_submit:function(v){d.preventDefault();if(u){setTimeout(function(){l.btn_login()},100);return}var y=function(){};var x=g.check();if(x){var w=g.getData();w.rejectFake=r.getData();w=t.RSAkey(w);b.request("register",{onSuccess:function(z){FrameClient.sendMessage({jump:z.data.href,inner:true})},onError:function(z){if(z.data.type=="validateMobileCode"){q.mobileCode()}else{z.code=="100001"&&f(z.code,z);g.ctls.verifycode.reset();t.changeVerifycode();z.data&&m(z.data)}}},d.core.json.merge(w,v.data))}else{g.ctls.verifycode.reset();t.changeVerifycode();m(g.states(),true)}},btn_area:function(y){d.preventDefault();var B=y.data;var x=["chinese","abroad"];for(var A=0,v=x.length;A<v;A++){var z=x[A];p[z].style.display=z==B.type?"":"none"}var w=B.type=="abroad";g.ctls.realname.disabled(w);g.ctls.idnumber.disabled(w);g.ctls.abroadname.disabled(!w);g.ctls.passport.disabled(!w)},btn_change_nickname:function(){d.preventDefault();a.request("checkform",{onSuccess:function(v){},onError:function(v){n.nickname(v.data)}},{type:"nickname",value:g.ctls.nickname.value()})},btn_change_verifycode:function(){d.preventDefault();t.changeVerifycode()},selected_nickname:function(v){g.ctls.nickname.value(v.data.name);g.ctls.nickname.check();g.ctls.nickname.fire();d.core.evt.fireEvent(p.nickname,"blur")},btn_login:function(v){if(v){d.preventDefault()}e({lang:$CONFIG.lang,loginSuccessUrl:(v&&v.href)||window.location.href})}};var m=function(x,w){w=w||false;for(var v in x){var z=x[v];if(w&&z.state){continue}var y=p[v+"_tip"];y&&(y.innerHTML=c("formTips",{data:z}));n[v]&&n[v](z)}};var n={nickname:function(y){p.recomnick_container.style.display="none";if(!y.iodata){y.iodata=[];p.nickname_panel.style.display="none"}else{if(y.iodata.length>0){p.nickname_panel.style.display=""}}var x=[];for(var w=0,v=y.iodata.length;w<v;w++){x.push({id:"nick_recommend_"+w,name:y.iodata[w]})}if(y.iodata.length>0){p.nickname_list.innerHTML=c("nickRecommend",{data:x})}if(y.code==="600002"){p.recomnick_container.style.display=""}}};var t={init:function(){t.pars();t.build();t.bind()},pars:function(){},build:function(){g=d.common.setting.form(k);p=d.kit.dom.parseDOM(g.domList);for(var z=0,y,x,A,v=i.length;z<v;z++){y=i[z];x=p[y];if(p[y]&&d.common.setting[y]){A=d.queryToJson(x.getAttribute("action-data")||"");A.hook=g;A.proxy=a;A.iokey="checkform";var C=d.common.setting[y](x,A);g.add(y,C)}}h=d.common.setting.textCopy(k);d.common.layer.emailAutocomplete(p.email);if(p.nickname.getAttribute("nick")){p.nickname.value=p.nickname.getAttribute("nick")}var w="";if(p.province.getAttribute("province")){w=p.province.getAttribute("province")}var B="";if(p.city.getAttribute("city")){B=p.city.getAttribute("city")}d.common.school.city(p.citySelect,{city:true,area:false,proDef:(w||"11"),cityDef:(B||"")})},bind:function(){d.custEvent.define(g,["check"]);d.custEvent.add(g,"check",j.formCheck);s=d.delegatedEvent(k);for(var v in l){s.add(v,"click",l[v])}},changeVerifycode:function(){var v=p.btn_change_verifycode;v.src=v.src.replace(/(\?|\&)r=([^&]+)/,"$1r="+d.core.util.getUniqueKey())},getData:function(){return g.getData()},RSAkey:function(y){var w=d.comp.account.RSAkey();var x=$CONFIG&&$CONFIG.key||"";var v=$CONFIG&&$CONFIG.key_plus||"10001";w.setPublic(x,v);y.passwd=w.encrypt(y.passwd);return y},destroy:function(){d.custEvent.remove(g,"check",j.formCheck);s.destroy();h.destroy()}};var q={mobileCode:function(){var v=t.getData();v=t.RSAkey(v);d.common.dialog.validateMobileCode({resData:d.core.json.merge(v,{rejectFake:r.getData()})})}};t.init();o.destroy=t.destroy;return o}});STK.pageletM.register("pl.account.regEmail",function(a){return a.comp.account.regEmail(a.E("pl_account_regmail"))});STK.register("common.trans.global",function(c){var a=c.kit.io.inter();var b=a.register;b("language",{url:"/aj/user/lang?_wv=5",method:"post"});b("followList",{url:"/aj/mblog/attention?_wv=5"});b("topicList",{url:"/aj/mblog/topic?_wv=5"});b("myFollowList",{url:"/aj/relation/attention?_wv=5"});b("closetipsbar",{url:"/aj/tipsbar/closetipsbar?_wv=5",method:"post"});b("weiqunnew",{url:"/ajm/weiqun?action=aj_remindunread"});b("quiet_suggest",{url:"/aj/f/lenovo?ct=10&_wv=5",method:"get"});return a});STK.register("comp.content.changeLanguage",function(a){var b=null;return function(e){var i={},c=a.kit.extra.language,l={"zh-cn":c("#L{确认切换到简体版吗}"),"zh-tw":c("#L{确认切换到中文(台湾)版吗}"),"zh-hk":c("#L{确认切换到中文(香港)版吗}"),"en-us":c("#L{确认切换到英文版吗}")};var d;var f=(function(){var p=function(q){window.location.reload()};var n=function(q){a.ui.alert(q.msg)};var o=a.common.trans.global.getTrans("language",{onSuccess:p,onError:n});return function(q){o.request({lang:q})}})();var g={changeLanguage:function(){var n=e.value;a.ui.confirm(l[n],{OK:function(){a.preventDefault();if(d.login){f(n)}else{var o=window.location.href;if(/\?/.test(o)){if(/(\?|\&)lang=([^&]+)/.test(o)){o=o.replace(/(\?|\&)lang=([^&]+)/,"$1lang="+n)}else{o=o+"&lang="+n}}else{o=o+"?lang="+n}window.location.href=o}},cancel:function(){a.preventDefault();e.value=$CONFIG.lang}})}};var j=function(){if(!a.core.dom.isNode(e)){throw"[STK.comp.content.changeLanguage]:node is not a Node!"}d=a.parseParam({login:1},a.queryToJson(e.getAttribute("action-data")||""));d.login=parseInt(d.login)};var h=function(){a.addEvent(e,"change",g.changeLanguage)};var k=function(){a.removeEvent(e,"change",g.changeLanguage);g.changeLanguage&&(g.changeLanguage=null)};var m=function(){if(b){return}b=e;j();h()};m();i.destroy=function(){return};return i}});STK.pageletM.register("pl.content.changeLanguage",function(c){var b=c.E("pl_content_changeLanguage");var a=c.comp.content.changeLanguage(b);return a});STK.pageletM.start();